!function(){"use strict";angular.module("sky.alert",["sky.alert.directive"])}(),function(){"use strict";angular.module("sky.avatar",["sky.avatar.config","sky.avatar.directive"])}(),function(){"use strict";angular.module("sky.card",["sky.card.directive"])}(),function(){"use strict";angular.module("sky.checklist",["sky.checklist.directive","sky.checklist.column.directive","sky.checklist.columns.directive","sky.checklist.model.directive"])}(),function(){"use strict";angular.module("sky.chevron",["sky.chevron.directive"])}(),function(){"use strict";angular.module("sky.contextmenu",["sky.contextmenu.directive","sky.contextmenu.button.directive","sky.contextmenu.item.directive","sky.submenu"])}(),function(){"use strict";angular.module("sky.submenu",["sky.submenu.directive"])}(),function(){"use strict";angular.module("sky.error",["sky.error.directive","sky.errormodal.service"])}(),function(){"use strict";angular.module("sky.pagesummary",[])}(),function(){"use strict";angular.module("sky.reorder",["sky.reorder.directive"])}(),function(){"use strict";angular.module("sky.repeater",["sky.repeater.directive","sky.repeater.item.directive"])}(),function(){"use strict";angular.module("sky.selectfield",["sky.selectfield.directive","sky.selectfieldpicker.directive","sky.selectfield.item.animation"])}(),function(){"use strict";function bbActionBar(){return{controller:angular.noop,controllerAs:"bbActionBar",bindToController:!0,scope:{},transclude:!0,restrict:"E",templateUrl:"sky/templates/actionbar/actionbar.html"}}function bbActionBarItemGroup(bbResources,bbMediaBreakpoints){return{replace:!0,transclude:!0,controller:function(){var vm=this;(null===vm.title||angular.isUndefined(vm.title))&&(vm.title=bbResources.action_bar_actions)},controllerAs:"bbActionBarItemGroup",bindToController:{title:"=?bbActionBarItemGroupTitle"},restrict:"E",scope:{},link:function($scope,el){function mediaBreakpointHandler(breakpoints){breakpoints.xs?el.find(".bb-action-bar-buttons > ng-transclude").appendTo(el.find(".bb-action-bar-dropdown > .dropdown > ul")):el.find(".bb-action-bar-dropdown .dropdown > ul > ng-transclude").appendTo(el.find(".bb-action-bar-buttons"))}bbMediaBreakpoints.register(mediaBreakpointHandler),$scope.$on("$destroy",function(){bbMediaBreakpoints.unregister(mediaBreakpointHandler)})},templateUrl:"sky/templates/actionbar/actionbaritemgroup.html"}}function bbActionBarItem(bbMediaBreakpoints){return{replace:!0,controller:angular.noop,controllerAs:"bbActionBarItem",bindToController:!0,scope:{},require:"?^bbActionBarItemGroup",transclude:!0,restrict:"E",link:function($scope,el,attrs,groupCtrl){function mediaBreakpointHandler(breakpoints){breakpoints.xs?el.parent().is("li")||el.wrap("<li></li>"):el.parent().is("li")&&el.unwrap()}null!==groupCtrl&&(bbMediaBreakpoints.register(mediaBreakpointHandler),$scope.$on("$destroy",function(){bbMediaBreakpoints.unregister(mediaBreakpointHandler),el.parent().is("li")&&el.unwrap()}))},templateUrl:"sky/templates/actionbar/actionbaritem.html"}}bbActionBarItemGroup.$inject=["bbResources","bbMediaBreakpoints"],bbActionBarItem.$inject=["bbMediaBreakpoints"],angular.module("sky.actionbar",["sky.resources","sky.mediabreakpoints","ui.bootstrap.dropdown"]).directive("bbActionBar",bbActionBar).directive("bbActionBarItemGroup",bbActionBarItemGroup).directive("bbActionBarItem",bbActionBarItem)}(),function(){"use strict";function bbAlert(){function Controller(){}function link(scope,el,attrs,vm){vm.close=function(){vm.bbAlertClosed=!0}}return{restrict:"E",controller:Controller,controllerAs:"bbAlert",bindToController:{bbAlertType:"@",bbAlertCloseable:"@",bbAlertClosed:"="},link:link,scope:{},templateUrl:"sky/templates/alert/alert.html",transclude:!0}}angular.module("sky.alert.directive",["sky.resources"]).directive("bbAlert",bbAlert)}(),function(){"use strict";angular.module("sky.autofocus",[]).directive("bbAutofocus",["$timeout",function($timeout){return{restrict:"A",link:function($scope,$element){$timeout(function(){$element.focus()},500)}}}])}(),function($){"use strict";function getBaseSettings(bbAutoNumericConfig,configType){var baseSettings,configSettings;return baseSettings=angular.extend({},$.fn.autoNumeric.defaults,bbAutoNumericConfig.number),configType&&(configSettings=angular.isObject(configType)?configType:bbAutoNumericConfig[configType],configSettings&&angular.extend(baseSettings,configSettings)),baseSettings}angular.module("sky.autonumeric",["sky.resources","sky.window"]).constant("bbAutonumericConfig",{number:{aSep:",",dGroup:3,aDec:".",pSign:"p",mDec:2},money:{aSign:"$"},percent:{aSign:"%",pSign:"s",mDec:0}}).directive("bbAutonumeric",["$timeout","bbAutonumericConfig","bbWindow","$document",function($timeout,bbAutoNumericConfig,bbWindow,$document){return{require:"ngModel",restrict:"A",link:function($scope,el,attrs,ngModel){function applySettings(){el.autoNumeric("update",angular.extend({},getBaseSettings(bbAutoNumericConfig,attrs.bbAutonumeric),customSettings))}function applyCssSettings(el){attrs.bbAutonumeric&&el.addClass("bb-autonumeric-"+attrs.bbAutonumeric)}function autonumericChange(){return $scope.$apply(function(){var value=parseFloat(el.autoNumeric("get"));return isNaN(value)&&(value=null),ngModel.$setViewValue(value)})}var customSettings={},isIosUserAgent=bbWindow.isIosUserAgent();attrs.bbAutonumericSettings&&$scope.$watch(attrs.bbAutonumericSettings,function(newValue){customSettings=newValue||{},applySettings()},!0),el.autoNumeric(getBaseSettings(bbAutoNumericConfig,attrs.bbAutonumeric)),applyCssSettings(el),$scope.$watch(attrs.ngModel,function(newValue,oldValue){var getValue,selectionStart;void 0===newValue||null===newValue||isNaN(newValue)?null===newValue&&el.val(null):(parseFloat(newValue)!==parseFloat(oldValue)&&(selectionStart=el[0].selectionStart),el.autoNumeric("set",newValue),getValue=el.autoNumeric("get"),parseFloat(getValue)!==parseFloat(newValue)?$timeout(autonumericChange):el[0]&&angular.isFunction(el[0].setSelectionRange)&&angular.isDefined(selectionStart)&&$timeout(function(){$document[0]&&$document[0].activeElement===el[0]&&el[0].setSelectionRange(selectionStart,selectionStart)}))}),el.on("keydown",function(event){13===event.which&&autonumericChange()}),el.on("change paste onpaste",function(){autonumericChange()}),el.on("focusin.bbAutonumeric",function(){$timeout(function(){el.is(":focus")&&(isIosUserAgent?el[0].setSelectionRange(0,9999):el.select())})})}}}]).filter("bbAutonumeric",["bbAutonumericConfig","bbResources",function(bbAutonumericConfig,bbResources){return function(input,configType,abbreviate){var aSign,dividend,mDec,formatted,settings,suffix,tempEl;return null===input||angular.isUndefined(input)?"":isNaN(input)?input:(tempEl=$("<span></span>"),settings=getBaseSettings(bbAutonumericConfig,configType),abbreviate&&("s"===settings.pSign&&(aSign=settings.aSign,settings.aSign=""),input=Math.round(input),input>=1e9?(dividend=1e8,suffix=bbResources.autonumeric_abbr_billions):input>=1e6?(dividend=1e5,suffix=bbResources.autonumeric_abbr_millions):input>=1e4&&(dividend=100,suffix=bbResources.autonumeric_abbr_thousands),suffix?(input=Math.floor(input/dividend)/10,mDec=Math.floor(input)===input?0:1):mDec=0,settings.mDec=mDec),tempEl.autoNumeric(settings),tempEl.autoNumeric("set",input),formatted=tempEl.text(),suffix&&(formatted+=suffix),abbreviate&&"s"===settings.pSign&&aSign&&(formatted+=aSign),formatted)}}])}(jQuery),function(){"use strict";var bbAvatarConfig={maxFileSize:5e5};angular.module("sky.avatar.config",[]).constant("bbAvatarConfig",bbAvatarConfig)}(),function($){"use strict";function bbAvatar($filter,$templateCache,$window,bbAvatarConfig,bbErrorModal,bbFormat,bbPalette,bbResources){function link(scope,el,attrs,vm){function setImageUrl(url){el.find(".bb-avatar-image").css("background-image","url("+url+")")}function getInitial(name){return name.charAt(0).toUpperCase()}function getInitials(name){var initials,nameSplit;return name&&(nameSplit=name.split(" "),initials=getInitial(nameSplit[0]),nameSplit.length>1&&(initials+=getInitial(nameSplit[nameSplit.length-1]))),initials}function getPlaceholderColor(name){var colorIndex,seed,colors=bbPalette.getColorSequence(6);return name?(seed=name.charCodeAt(0)+name.charCodeAt(name.length-1)+name.length,colorIndex=Math.abs(seed%colors.length)):colorIndex=0,colors[colorIndex]}function drawPlaceolderImage(){var canvas,context,devicePixelRatio,initials,name,fontSize="46px",size=100;name=vm.bbAvatarName,initials=getInitials(name),canvas=el.find(".bb-avatar-initials")[0],context=canvas.getContext("2d"),devicePixelRatio=$window.devicePixelRatio,devicePixelRatio&&($(canvas).attr("width",size*devicePixelRatio).attr("height",size*devicePixelRatio),context.scale(devicePixelRatio,devicePixelRatio)),context.fillStyle=getPlaceholderColor(name),context.fillRect(0,0,canvas.width,canvas.height),initials&&(context.font=fontSize+" Arial",context.textAlign="center",context.fillStyle="#FFF",context.fillText(initials,.5*size,size*(2/3)))}function revokeBlobUrl(){blobUrl&&($window.URL.revokeObjectURL(blobUrl),blobUrl=null)}function loadPhoto(){var src,url;revokeBlobUrl(),templateLoaded&&(src=vm.bbAvatarSrc,src?(src instanceof $window.File?(url=$window.URL.createObjectURL(src),blobUrl=url):url=src,setImageUrl(url)):drawPlaceolderImage())}function handleInvalidFileDrop(rejectedFile){var errorDescription,errorTitle,maxFileSizeFormatted;0!==rejectedFile.type.toUpperCase().indexOf("IMAGE/")?(errorDescription=bbResources.avatar_error_not_image_description,errorTitle=bbResources.avatar_error_not_image_title):(maxFileSizeFormatted=$filter("bbFileSize")(bbAvatarConfig.maxFileSize),errorDescription=bbFormat.formatText(bbResources.avatar_error_too_large_description,maxFileSizeFormatted),errorTitle=bbResources.avatar_error_too_large_title),bbErrorModal.open({errorDescription:errorDescription,errorTitle:errorTitle})}var blobUrl,templateLoaded;vm.onTemplateLoad=function(){templateLoaded=!0},vm.photoDrop=function(files,rejectedFiles){angular.isArray(rejectedFiles)&&rejectedFiles.length>0?handleInvalidFileDrop(rejectedFiles[0]):vm.bbAvatarChange({file:files[0]})},vm.showInitials=function(){return!(!vm.bbAvatarName||vm.bbAvatarSrc)},attrs.bbAvatarChange&&(vm.canChange=!0),scope.$watch(function(){return templateLoaded},loadPhoto),scope.$watch(function(){return vm.bbAvatarSrc},loadPhoto),scope.$watch(function(){return vm.bbAvatarName},loadPhoto),scope.$on("$destroy",function(){revokeBlobUrl()}),vm.maxFileSize=bbAvatarConfig.maxFileSize}function template(el){var dropEl;el.html($templateCache.get("sky/templates/avatar/avatar.directive.html")),dropEl=el.find(".bb-avatar-file-drop"),dropEl.attr("bb-file-drop-max-size",bbAvatarConfig.maxFileSize)}return{scope:{},bindToController:{bbAvatarSrc:"=",bbAvatarName:"=",bbAvatarChange:"&"},controller:angular.noop,controllerAs:"bbAvatar",link:link,template:template}}bbAvatar.$inject=["$filter","$templateCache","$window","bbAvatarConfig","bbErrorModal","bbFormat","bbPalette","bbResources"],angular.module("sky.avatar.directive",["sky.avatar.config","sky.error","sky.format","sky.palette","sky.resources"]).directive("bbAvatar",bbAvatar)}(jQuery),function(){"use strict";function makeCardComponent(component){function Controller($scope){var vm=this;$scope.$on("$destroy",function(){vm.onDestroy(),vm=null})}function componentFn(){function link(scope,el,attrs,ctrls){var vm=ctrls[0],bbCard=ctrls[1];vm.el=el,bbCard["set"+name](vm)}return{restrict:"E",require:["bbCard"+name,"^bbCard"],controller:controllerName,controllerAs:"bbCard"+name,bindToController:!0,link:link,scope:{}}}var controllerName,name=component.name;Controller.$inject=["$scope"],controllerName="BBCard"+name+"Controller",cardModule.controller(controllerName,Controller).directive("bbCard"+name,componentFn)}function getCtrlPropName(component){var name=component.name;return name.charAt(0).toLowerCase()+name.substr(1)+"Ctrl"}function BBCardController(){function addComponentSetter(component){var name=component.name;vm["set"+name]=function(ctrl){var propName=getCtrlPropName(component);vm[propName]=ctrl,ctrl.onDestroy=function(){vm[propName]=null}}}var vm=this;components.forEach(addComponentSetter),vm.getClass=function(){var cls=[];switch(vm.bbCardSize){case"small":cls.push("bb-card-small")}return vm.bbCardSelectable&&(cls.push("bb-card-selectable"),vm.bbCardSelected&&cls.push("bb-card-selected")),cls},nextId++,vm.cardCheckId="bb-card-check-"+nextId}function bbCard(){function link(scope,el,attrs,vm){function watchForComponent(component){scope.$watch(function(){return vm[getCtrlPropName(component)]},function(newValue){newValue&&el.find(".bb-card-"+component.cls).empty().append(newValue.el)})}components.forEach(watchForComponent)}return{bindToController:{bbCardSelectable:"@?",bbCardSelected:"=?",bbCardSize:"@?"},controller:"BBCardController",controllerAs:"bbCard",link:link,restrict:"E",scope:{},templateUrl:"sky/templates/card/card.directive.html",transclude:!0}}var components=[{name:"Title",cls:"title"},{name:"Content",cls:"content"},{name:"Actions",cls:"actions"}],cardModule=angular.module("sky.card.directive",["sky.check"]),nextId=0;cardModule.controller("BBCardController",BBCardController).directive("bbCard",bbCard),components.forEach(makeCardComponent)}(),function(){"use strict";angular.module("sky.check",[]).directive("bbCheck",["$templateCache",function($templateCache){function createEl(name){return angular.element($templateCache.get("sky/templates/check/"+name+".html"))}return{link:function(scope,el,attr){var styledEl,typeClass,labelEl=el.parent("label");labelEl.length<1?el.wrap(createEl("wrapper")):labelEl.addClass("bb-check-wrapper"),typeClass="radio"===attr.type?"bb-check-radio":"bb-check-checkbox",styledEl=createEl("styled"),styledEl.addClass(typeClass),el.after(styledEl)}}}])}(),function(){"use strict";function BBChecklistController($scope,bbChecklistUtility){function itemMatchesCategory(item,category){return!category||item.category===category}function itemMatchesFilter(item,category,searchTextUpper){var i,p,len,val;if(itemMatchesCategory(item,category)){if(!searchTextUpper)return!0;for(i=0,len=SEARCH_PROPS.length;len>i;i++)if(p=SEARCH_PROPS[i],item.hasOwnProperty(p)&&(val=item[p],angular.isString(val)&&val.toUpperCase().indexOf(searchTextUpper)>=0))return!0}return!1}function invokeFilterLocal(){var filteredItems,i,item,n,items=vm.bbChecklistItems,searchTextUpper=(vm.searchText||"").toUpperCase(),selectedCategory=vm.selectedCategory;if(searchTextUpper||selectedCategory)for(filteredItems=[],i=0,n=items.length;n>i;i++)item=items[i],itemMatchesFilter(item,selectedCategory,searchTextUpper)&&filteredItems.push(item);else filteredItems=items.slice(0);vm.filteredItems=filteredItems}function invokeFilter(){vm.filterLocal?invokeFilterLocal():vm.bbChecklistFilterCallback&&vm.bbChecklistFilterCallback({searchText:vm.searchText,category:vm.selectedCategory})}function itemIsSelected(item){return bbChecklistUtility.contains(vm.bbChecklistSelectedItems,item)}function eachFilteredItem(callback){vm.filteredItems.forEach(callback)}function selectItem(item){bbChecklistUtility.add(vm.bbChecklistSelectedItems,item)}function unselectItem(item){bbChecklistUtility.remove(vm.bbChecklistSelectedItems,item)}var vm=this;vm.bbChecklistSelectedItems=vm.bbChecklistSelectedItems||[],vm.itemIsSelected=itemIsSelected,vm.selectAll=function(){eachFilteredItem(selectItem)},vm.clear=function(){eachFilteredItem(unselectItem)},vm.rowClicked=function(item){itemIsSelected(item)?unselectItem(item):selectItem(item)},vm.filterByCategory=function(selectedCategory){vm.selectedCategory=selectedCategory,invokeFilter()},vm.isSingleSelect=function(){return"single"===vm.bbChecklistSelectStyle},vm.getChecklistCls=function(){return{"bb-checklist-single":vm.isSingleSelect()}},vm.getRowCls=function(item){return{"bb-checklist-row-selected":itemIsSelected(item)}},vm.singleSelectRowClick=function(item){vm.bbChecklistSelectedItems=[item],$scope.$emit("bbPickerSelected",{selectedItems:vm.bbChecklistSelectedItems})},vm.setColumns=function(columns){vm.columns=columns},$scope.$watch(function(){return vm.bbChecklistItems},function(){vm.filteredItems=vm.bbChecklistItems,vm.highlightRefresh=(new Date).getTime()}),$scope.$watch(function(){return vm.searchText},function(newValue,oldValue){newValue!==oldValue&&invokeFilter()}),$scope.$emit("bbPickerReady",{setSelectedItems:function(selectedItems){vm.bbChecklistSelectedItems=selectedItems}})}var SEARCH_PROPS=["title","description"];BBChecklistController.$inject=["$scope","bbChecklistUtility"],angular.module("sky.checklist.controller",["sky.checklist.utility"]).controller("BBChecklistController",BBChecklistController)}(),function(){"use strict";function bbChecklist(){return{replace:!0,restrict:"E",transclude:!0,templateUrl:"sky/templates/checklist/checklist.directive.html",bindToController:{bbChecklistItems:"=",bbChecklistSelectedItems:"=",bbChecklistFilterCallback:"=",bbChecklistIncludeSearch:"=",bbChecklistSearchDebounce:"=",bbChecklistSearchPlaceholder:"@",bbChecklistNoItemsMessage:"@",bbChecklistAutomationField:"=",bbChecklistCategories:"=",bbChecklistMode:"@",bbChecklistSelectStyle:"@",bbChecklistIsLoading:"="},controller:"BBChecklistController",controllerAs:"bbChecklist",scope:{},link:function(scope,el,attrs,vm){vm.filterLocal=angular.isDefined(attrs.bbChecklistFilterLocal)}}}angular.module("sky.checklist.directive",["sky.check","sky.checklist.controller","sky.resources","sky.wait"]).directive("bbChecklist",bbChecklist)}(),function(){"use strict";function bbChecklistColumn(){return{require:["bbChecklistColumn","^bbChecklistColumns"],restrict:"E",bindToController:{bbChecklistColumnCaption:"=",bbChecklistColumnField:"=",bbChecklistColumnClass:"=",bbChecklistColumnWidth:"=",bbChecklistColumnAutomationId:"="},controller:function(){},controllerAs:"bbChecklistColumn",scope:{},link:function($scope,element,attrs,ctrls){var column,bbChecklistColumns=ctrls[1],vm=ctrls[0];column={caption:vm.bbChecklistColumnCaption,field:vm.bbChecklistColumnField,"class":vm.bbChecklistColumnClass,width:vm.bbChecklistColumnWidth,automationId:vm.bbChecklistColumnAutomationId},bbChecklistColumns.addColumn(column)}}}angular.module("sky.checklist.column.directive",["sky.checklist.columns.directive"]).directive("bbChecklistColumn",bbChecklistColumn)}(),function(){"use strict";function BBChecklistColumnsController(){var vm=this;vm.columns=[],vm.addColumn=function(column){vm.columns.push(column)}}angular.module("sky.checklist.columns.controller",[]).controller("BBChecklistColumnsController",BBChecklistColumnsController)}(),function(){"use strict";function bbChecklistColumns(){function link($scope,element,attrs,ctrls){var bbChecklist=ctrls[1],vm=ctrls[0];bbChecklist.setColumns(vm.columns)}return{require:["bbChecklistColumns","^bbChecklist"],restrict:"E",scope:{},bindToController:{},controller:"BBChecklistColumnsController",controllerAs:"bbChecklistColumns",link:link}}angular.module("sky.checklist.columns.directive",["sky.checklist.columns.controller"]).directive("bbChecklistColumns",bbChecklistColumns)}(),function(){"use strict";function checklistModel($compile,$parse,bbChecklistUtility){function postLinkFn(scope,elem,attrs){var getter,setter,value;$compile(elem)(scope),getter=$parse(attrs.checklistModel),setter=getter.assign,value=$parse(attrs.checklistValue)(scope.$parent),scope.$watch("checked",function(newValue,oldValue){var current;newValue!==oldValue&&(current=getter(scope.$parent),newValue===!0?setter(scope.$parent,bbChecklistUtility.add(current,value)):setter(scope.$parent,bbChecklistUtility.remove(current,value)))}),scope.$parent.$watch(attrs.checklistModel,function(newArr){scope.checked=bbChecklistUtility.contains(newArr,value)},!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(tElement,tAttrs){if("INPUT"!==tElement[0].tagName||!tElement.attr("type","checkbox"))throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!tAttrs.checklistValue)throw"You should provide `checklist-value`.";return tElement.removeAttr("checklist-model"),tElement.attr("ng-model","checked"),postLinkFn}}}checklistModel.$inject=["$compile","$parse","bbChecklistUtility"],angular.module("sky.checklist.model.directive",["sky.checklist.utility"]).directive("checklistModel",checklistModel)}(),function(){"use strict";angular.module("sky.checklist.utility",[]).factory("bbChecklistUtility",function(){return{contains:function(arr,item){var i;if(angular.isArray(arr))for(i=0;i<arr.length;i+=1)if(angular.equals(arr[i],item))return!0;return!1},add:function(arr,item,isSingleSelect){var i;for(arr=!isSingleSelect&&angular.isArray(arr)?arr:[],i=0;i<arr.length;i+=1)if(angular.equals(arr[i],item))return arr;return arr.push(item),arr},remove:function(arr,item){var i;if(angular.isArray(arr))for(i=0;i<arr.length;i+=1)if(angular.equals(arr[i],item)){arr.splice(i,1);break}return arr}}})}(),function(){"use strict";function BBChevronController(bbResources){function getDirection(){return vm.bbChevronDirection||"up"}var vm=this;vm.getCls=function(){return"bb-chevron-flip-"+getDirection()},vm.getLabel=function(){return bbResources["chevron_"+("up"===getDirection()?"collapse":"expand")]},vm.click=function($event){$event.stopPropagation(),vm.bbChevronDirection="up"===getDirection()?"down":"up"}}BBChevronController.$inject=["bbResources"],angular.module("sky.chevron.controller",["sky.resources"]).controller("BBChevronController",BBChevronController)}(),function(){"use strict";function bbChevron(){return{bindToController:{bbChevronDirection:"=?"},controller:"BBChevronController",controllerAs:"bbChevron",scope:{},templateUrl:"sky/templates/chevron/chevron.directive.html"}}angular.module("sky.chevron.directive",["sky.chevron.controller"]).directive("bbChevron",bbChevron)}(),function(){"use strict";function BBContextMenuButtonController(bbResources){var vm=this;vm.getAriaLabel=function(){var ariaLabel;return vm.bbContextMenu&&(ariaLabel=vm.bbContextMenu.getAriaLabel()),ariaLabel||(ariaLabel=vm.bbContextMenuButtonLabel||bbResources.context_menu_default_label),ariaLabel}}BBContextMenuButtonController.$inject=["bbResources"],angular.module("sky.contextmenu.button.controller",["sky.resources"]).controller("BBContextMenuButtonController",BBContextMenuButtonController)}(),function(){"use strict";function bbContextMenuButton(){function link(scope,el,attrs,ctrls){var bbContextMenu=ctrls[1],vm=ctrls[0];vm.bbContextMenu=bbContextMenu}return{bindToController:{bbContextMenuButtonLabel:"@"},controller:"BBContextMenuButtonController",controllerAs:"bbContextMenuButton",link:link,restrict:"E",replace:!0,require:["bbContextMenuButton","?^bbContextMenu"],scope:{},templateUrl:"sky/templates/contextmenu/menubutton.html"}}angular.module("sky.contextmenu.button.directive",["sky.contextmenu.button.controller","sky.resources"]).directive("bbContextMenuButton",bbContextMenuButton)}(),function(){"use strict";function BBContextMenuController(){var vm=this;vm.contextButtonStopPropagation=function($event){$event.stopPropagation()},vm.getAriaLabel=function(){return vm.bbContextMenuLabel}}angular.module("sky.contextmenu.controller",[]).controller("BBContextMenuController",BBContextMenuController)}(),function(){"use strict";function bbContextMenu(){return{bindToController:{bbContextMenuLabel:"@"},controller:"BBContextMenuController",controllerAs:"bbContextMenu",replace:!0,restrict:"E",scope:{},transclude:!0,templateUrl:"sky/templates/contextmenu/contextmenu.html"}}angular.module("sky.contextmenu.directive",["ui.bootstrap.dropdown","ui.bootstrap.accordion","sky.contextmenu.controller"]).directive("bbContextMenu",bbContextMenu)}(),function(){"use strict";function bbContextMenuItem(){return{bindToController:{clickItem:"&bbContextMenuAction"},controller:angular.noop,controllerAs:"bbContextMenuItem",restrict:"E",transclude:!0,replace:!0,scope:{},templateUrl:"sky/templates/contextmenu/menuitem.html"}}angular.module("sky.contextmenu.item.directive",[]).directive("bbContextMenuItem",bbContextMenuItem)}(),function(){"use strict";function bbContextMenuToggleAccordion(){return function($event,vm){$event.preventDefault(),$event.stopPropagation(),vm.accordionOpen=!vm.accordionOpen}}angular.module("sky.contextmenu.toggleaccordion.factory",[]).factory("bbContextMenuToggleAccordion",bbContextMenuToggleAccordion)}(),function(){"use strict";function bbSubmenu(bbContextMenuToggleAccordion){return{bindToController:{heading:"=?bbSubmenuHeading"},controller:angular.noop,controllerAs:"bbSubmenu",restrict:"E",scope:{},link:function(scope,el,attrs,vm){vm.accordionOpen=!1,vm.staticHeader=!1,angular.isDefined(attrs.bbSubmenuHeading)&&(vm.staticHeader=!0),vm.toggleAccordion=function($event){bbContextMenuToggleAccordion($event,vm)}},transclude:!0,templateUrl:"sky/templates/contextmenu/submenu.html"}}bbSubmenu.$inject=["bbContextMenuToggleAccordion"],angular.module("sky.submenu.directive",["sky.submenu.heading.directive","sky.contextmenu.toggleaccordion.factory","ui.bootstrap.dropdown","ui.bootstrap.accordion"]).directive("bbSubmenu",bbSubmenu)}(),function(){"use strict";function bbSubmenuHeading(){return{bindToController:!0,controller:angular.noop,controllerAs:"bbSubmenuHeading",restrict:"E",require:["bbSubmenuHeading","^bbSubmenu"],scope:!0,link:function($scope,el,attrs,ctrls){var submenuCtrl=ctrls[1],vm=ctrls[0];vm.toggleAccordion=function($event){submenuCtrl.toggleAccordion($event)}},transclude:!0,templateUrl:"sky/templates/contextmenu/submenuheading.html"}}angular.module("sky.submenu.heading.directive",[]).directive("bbSubmenuHeading",bbSubmenuHeading)}(),function($){"use strict";function fillUrls(option,props,urls){var item,p,url;if(option){(angular.isString(option)||option.BB_DATA_POST)&&(url=option,option={},option[DEFAULT_PROP]=url);for(p in option)option.hasOwnProperty(p)&&(item=option[p],url=item,props.push(p),urls.push(url))}}function loadManager(options){function cancelWaiting(){options.waitForFirstItem=!1,options.nonblockWaitForAdditionalItems=!1,nonblockingForAdditionalItems&&(nonblockingForAdditionalItems=!1,scope.$emit("bbEndWait",{nonblocking:!0})),waitingForFirstItem&&(waitingForFirstItem=!1,scope.$emit("bbEndWait"))}function startNonblockingForAdditionalItems(){nonblockingForAdditionalItems=!0,scope.$emit("bbBeginWait",{nonblocking:!0})}function markCompleted(item){var i=loadingItems.indexOf(item);-1!==i&&(loadingItems.splice(i,1),0===loadingItems.length&&(result.isLoading=!1,nonblockingForAdditionalItems&&(nonblockingForAdditionalItems=!1,scope.$emit("bbEndWait",{nonblocking:!0})))),result.isFirstItemLoaded||(result.isFirstItemLoaded=!0,waitingForFirstItem&&(waitingForFirstItem=!1,scope.$emit("bbEndWait"))),result.isLoading&&options.nonblockWaitForAdditionalItems&&!nonblockingForAdditionalItems&&startNonblockingForAdditionalItems()}function registerItem(item){result.isLoading||result.isFirstItemLoaded&&options.nonblockWaitForAdditionalItems&&startNonblockingForAdditionalItems(),loadingItems.push(item),result.isLoading=!0}var item,result,scope,loadingItems=[],nonblockingForAdditionalItems=!1,waitingForFirstItem=!1;return scope=options.scope,options.load&&(item={name:options.name,load:options.load}),result={isFirstItemLoaded:!1,isLoading:!1,loadingItems:loadingItems,cancelWaiting:cancelWaiting},options.waitForFirstItem&&(waitingForFirstItem=!0,scope.$emit("bbBeginWait")),item&&(registerItem(item),result.loaded=item.load()["finally"](function(){markCompleted(item),scope.$parent.$emit("bbData.loadManager.markCompleted",item)}),scope.$parent.$emit("bbData.loadManager.registerItem",item)),options.isAggregate&&(scope.$on("bbData.loadManager.registerItem",function(e,item){e.stopPropagation(),registerItem(item)}),scope.$on("bbData.loadManager.markCompleted",function(e,item){e.stopPropagation(),markCompleted(item)})),result}function bbData($http,$q,$templateCache,bbDataConfig,$window){function ajaxUrl(url,requestType){var filter,parts;switch(requestType=requestType||0,$window.define&&$window.define.amd&&$window.require&&(parts=url.split("?"),url=parts.shift(),url=require.toUrl(url),url+="?"+parts.join("")),requestType){case REQUEST_TYPE_DATA:filter=bbDataConfig.dataUrlFilter;break;case REQUEST_TYPE_RESOURCES:filter=bbDataConfig.resourceUrlFilter;break;case REQUEST_TYPE_TEXT:filter=bbDataConfig.textUrlFilter}return angular.isFunction(filter)&&(url=filter(url)),url}function createAjaxPromise(item,isPost,requestType,timeoutPromise){var data,httpOptions,isGet,textContent,type,url;return requestType=requestType||0,item.BB_DATA_POST||isPost?(data=item.data,type=item.type||"post",url=item.url):(type="get",url=item,isGet=!0),isGet&&requestType===REQUEST_TYPE_TEXT&&(textContent=$templateCache.get(url))?$q(function(resolve){resolve({data:textContent})}):(url=ajaxUrl(url,requestType),httpOptions={method:type,url:url,cache:0!==requestType,data:data?JSON.stringify(data):null,dataType:0!==requestType?"text":"json",withCredentials:0===requestType,timeout:timeoutPromise},data instanceof $window.FormData&&angular.extend(httpOptions,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}),$http(httpOptions))}function addPromises(items,urls,requestType,timeoutPromise){var i,n,url;if(urls)for(i=0,n=urls.length;n>i;i++)url=urls[i],items.push(createAjaxPromise(url,null,requestType,timeoutPromise))}function nextId(){return nextId.index=nextId.index||0,nextId.index++,nextId.index}function trackHTTPTimeoutForPromise(fn){function clearPromiseId(){delete trackHTTPTimeoutForPromise[id]}var promise,id=nextId(),httpTimeout=$q.defer();return trackHTTPTimeoutForPromise[id]=httpTimeout,promise=fn(httpTimeout.promise),promise._id=id,promise.then(clearPromiseId,clearPromiseId),promise}function loadData(options){return trackHTTPTimeoutForPromise(function(timeoutPromise){return $q(function(resolve,reject){function success(args){function addResult(name,props){var resultData,httpResult,i,n,p,resultItem,resultItemHttpResults;if(props)for(i=0,n=props.length;n>i;i++)p=props[i],httpResult=args[argIndex],resultData=httpResult.data,p===DEFAULT_PROP?(resultItem=resultData,resultItemHttpResults=httpResult):(resultItem=resultItem||{},resultItem[p]=resultData,resultItemHttpResults=resultItemHttpResults||{},resultItemHttpResults[p]=httpResult),argIndex++;angular.isDefined(resultItem)&&(result[name]=resultItem),angular.isDefined(resultItemHttpResults)&&(result.httpResults[name]=resultItemHttpResults)}var argIndex=0,result={httpResults:{}};addResult("data",dataProps,!0),addResult("resources",resourcesProps),addResult("text",textProps),resolve(result)}function failure(){reject.apply(this,arguments)}var dataOption,dataProps,dataUrls,resourcesOption,resourcesProps,resourcesUrls,textOption,textProps,textUrls,promises=[];dataOption=options.data,resourcesOption=options.resources,textOption=options.text,dataOption&&(dataProps=[],dataUrls=[],fillUrls(dataOption,dataProps,dataUrls)),resourcesOption&&(resourcesProps=[],resourcesUrls=[],fillUrls(resourcesOption,resourcesProps,resourcesUrls)),textOption&&(textProps=[],textUrls=[],fillUrls(textOption,textProps,textUrls)),addPromises(promises,dataUrls,REQUEST_TYPE_DATA,timeoutPromise),addPromises(promises,resourcesUrls,REQUEST_TYPE_RESOURCES,timeoutPromise),addPromises(promises,textUrls,REQUEST_TYPE_TEXT,timeoutPromise),$q.all(promises).then(success)["catch"](failure)})})}return{cancel:function(promise){promise&&promise._id&&trackHTTPTimeoutForPromise[promise._id]&&trackHTTPTimeoutForPromise[promise._id].resolve()},load:function(options){return options.loadManager?(options.loadManager.load=function(){return loadData(options)},loadManager(options.loadManager).loaded):loadData(options)},loadManager:loadManager,query:function(url,params){return url+"?"+$.param(params)},post:function(url,data){return{url:url,data:data,BB_DATA_POST:!0}},save:function(options){return trackHTTPTimeoutForPromise(function(timeoutPromise){return createAjaxPromise(options,!0,null,timeoutPromise)})}}}var DEFAULT_PROP="__DEFAULT__",REQUEST_TYPE_DATA=0,REQUEST_TYPE_RESOURCES=1,REQUEST_TYPE_TEXT=2;bbData.$inject=["$http","$q","$templateCache","bbDataConfig","$window"],
angular.module("sky.data",[]).constant("bbDataConfig",{}).factory("bbData",bbData)}(jQuery),function($){"use strict";angular.module("sky.datepicker",["sky.resources","sky.moment","ui.bootstrap.datepicker"]).constant("bbDatepickerConfig",{currentCultureDateFormatString:"MM/dd/yyyy",showWeeks:!1,startingDay:0,minDate:"",maxDate:""}).directive("bbDatepicker",["bbResources","bbDatepickerConfig","bbDatepickerParser","$timeout","$q",function(bbResources,bbDatepickerConfig,bbDatepickerParser,$timeout,$q){return{replace:!0,restrict:"E",require:"ngModel",scope:{date:"=ngModel",dateOptions:"=?bbDateOptions",customValidation:"=?bbCustomValidation",format:"=?bbDateFormat",maxDate:"=?maxDate",minDate:"=?minDate",placeholderText:"=?placeholder"},templateUrl:"sky/templates/datepicker/datepicker.html",controller:["$scope",function($scope){var self=this;$scope.getInputNgModel=function(){return angular.isFunction(self.getInputNgModel)?self.getInputNgModel():null}}],link:function($scope,el,attr,ngModel){function getBodyDatepicker(){return $("body > ul[uib-datepicker-popup-wrap]")}function positionAbsoluteDatepicker(){var inputWidth,buttonWidth,datepickerWidth,calendarButtonEl=el.find("span.bb-datepicker-button-container"),inputEl=el.find("input"),datepickerScope=el.find("input").isolateScope(),datepickerEl=getBodyDatepicker();inputWidth=inputEl.innerWidth(),buttonWidth=calendarButtonEl.innerWidth(),datepickerWidth=datepickerEl.innerWidth(),inputWidth+buttonWidth>datepickerWidth&&(datepickerScope.position.left=datepickerScope.position.left+inputWidth+buttonWidth-datepickerWidth)}function open($event){$event.preventDefault(),$event.stopPropagation(),$scope.locals.appendToBody&&$timeout(function(){getBodyDatepicker().addClass("bb-datefield"),positionAbsoluteDatepicker()}),$scope.locals.opened=!$scope.locals.opened}function setDate(){var inputNgModel;angular.isDate($scope.date)?$scope.locals.date=$scope.date:$scope.locals.hasCustomValidation?$scope.locals.date=$scope.date:(parsedDate=bbDatepickerParser.runParsers($scope.date,$scope.format),angular.isDate(parsedDate)?($scope.date=parsedDate,$scope.locals.date=parsedDate):($scope.locals.date=$scope.date,inputNgModel=$scope.getInputNgModel(),inputNgModel&&!inputNgModel.$validators.date($scope.date)&&(inputNgModel.invalidFormatMessage=bbResources.date_field_invalid_date_message,inputNgModel.$setValidity("dateFormat",!1))))}function runValidators(){var inputNgModel=$scope.getInputNgModel();inputNgModel&&inputNgModel.$validate()}function hasRequiredError(){var inputNgModel=$scope.getInputNgModel();return inputNgModel&&inputNgModel.$error&&inputNgModel.$error.required}function hasMinMaxError(){var inputNgModel=$scope.getInputNgModel();return inputNgModel&&inputNgModel.$error&&(inputNgModel.$error.minDate||inputNgModel.$error.maxDate)}function dateFormatValidator(){function resolveValidation(){var inputNgModel=$scope.getInputNgModel();null!==inputNgModel?(deferred[inputNgModel.invalidFormatMessage?"reject":"resolve"](),inputNgModel.$setValidity("dateFormat",!inputNgModel.invalidFormatMessage||""===inputNgModel.invalidFormatMessage)):deferred.resolve()}function setInvalidFormatMessage(errorMessage){var inputNgModel=$scope.getInputNgModel();null!==inputNgModel&&(inputNgModel.invalidFormatMessage=errorMessage)}function handleCustomFormattingValidation(result){result=result||{},setInvalidFormatMessage(result.formattingErrorMessage),resolveValidation(),result.formattedValue!==$scope.date&&(skipValidation=!0,dateChangeInternal=!0,$scope.date=result.formattedValue,$scope.locals.date=result.formattedValue)}function datepickerIsPristine(){var inputNgModel=$scope.getInputNgModel();return null!==inputNgModel?inputNgModel.$pristine:!0}var customFormattingResult,deferred,inputNgModel;if(deferred=$q.defer(),skipValidation||angular.isDate($scope.locals.date)||""===$scope.locals.date||$scope.locals.required&&hasRequiredError()||hasMinMaxError()||!$scope.locals.required&&null===$scope.locals.date||datepickerIsPristine())setInvalidFormatMessage(null),resolveValidation();else if($scope.locals.hasCustomValidation&&angular.isString($scope.locals.date)){if(customFormattingResult=$scope.customValidation.formatValue($scope.locals.date),!customFormattingResult.then)return handleCustomFormattingValidation(customFormattingResult),deferred.promise;customFormattingResult.then(handleCustomFormattingValidation)}else inputNgModel=$scope.getInputNgModel(),null!==inputNgModel&&inputNgModel.$error&&inputNgModel.$error.date&&setInvalidFormatMessage(bbResources.date_field_invalid_date_message),resolveValidation();return skipValidation=!1,deferred.promise}function inputChange(){var inputNgModel;angular.isUndefined($scope.locals.date)&&angular.isDefined(inputEl.val())&&""!==inputEl.val()?(dateChangeInternal=!0,$scope.date=inputEl.val()):$scope.locals.required&&hasRequiredError()?(dateChangeInternal=!0,$scope.date="",inputNgModel=$scope.getInputNgModel(),inputNgModel.invalidFormatMessage=null,inputNgModel.$setValidity("dateFormat",!0)):$scope.date!==$scope.locals.date&&(dateChangeInternal=!0,$scope.date=$scope.locals.date)}function enterPress($event){13===$event.keyCode&&inputChange()}var parsedDate,inputEl,skipValidation=!1,dateChangeInternal=!1;$scope.locals={showButtonBar:!1,appendToBody:!1,date:"",opened:!1,open:open,loaded:!1,closeOnSelection:!0,dateOptions:{showWeeks:bbDatepickerConfig.showWeeks,startingDay:bbDatepickerConfig.startingDay},hasCustomValidation:!1,inputName:attr.bbDatepickerName},!$scope.maxDate&&bbDatepickerConfig.maxDate&&($scope.maxDate=bbDatepickerConfig.maxDate),!$scope.minDate&&bbDatepickerConfig.minDate&&($scope.minDate=bbDatepickerConfig.minDate),$scope.resources=bbResources,angular.isDefined(attr.showButtonBar)&&($scope.locals.showButtonBar=attr.showButtonBar),angular.isDefined(attr.closeOnDateSelection)&&($scope.locals.closeOnSelection=attr.closeOnDateSelection),angular.isDefined(attr.datepickerAppendToBody)&&($scope.locals.appendToBody="true"===attr.datepickerAppendToBody),angular.isUndefined($scope.format)&&($scope.format=bbDatepickerConfig.currentCultureDateFormatString),angular.isDefined($scope.dateOptions)&&angular.extend($scope.locals.dateOptions,$scope.dateOptions),angular.isDefined($scope.customValidation)&&angular.isFunction($scope.customValidation.formatValue)&&($scope.locals.hasCustomValidation=!0),$scope.locals.required=angular.isDefined(attr.required),(null===$scope.placeholderText||angular.isUndefined($scope.placeholderText))&&($scope.placeholderText=$scope.format.toLowerCase()),setDate(),$scope.$watch("date",function(newValue,oldValue){newValue===oldValue||dateChangeInternal?dateChangeInternal&&(dateChangeInternal=!1):setDate()}),$scope.$watch("locals.date",function(){$scope.date!==$scope.locals.date&&angular.isDate($scope.locals.date)&&(dateChangeInternal=!0,$scope.date=$scope.locals.date)}),$scope.$watch("maxDate",function(){runValidators()}),$scope.$watch("minDate",function(){runValidators()}),ngModel.$asyncValidators.dateFormat=dateFormatValidator,$scope.locals.loaded=!0,$scope.locals.enterPress=enterPress,$timeout(function(){inputEl=el.find("input"),inputEl.on("change blur",function(){$timeout(function(){inputChange()})})})}}}]).directive("bbDatepickerCustomValidate",["$filter","bbDatepickerParser",function($filter,bbDatepickerParser){return{restrict:"A",require:["ngModel","^bbDatepicker"],link:function($scope,el,attr,controllers){var ngModel=controllers[0],format=attr.uibDatepickerPopup;attr.bbDatepickerCustomValidate&&"true"===attr.bbDatepickerCustomValidate?(ngModel.$parsers=[],ngModel.$validators.date=function(){return!0}):ngModel.$parsers.unshift(function(viewValue){var newDate=ngModel.$viewValue,date=null;return"object"==typeof newDate||""===newDate?newDate:(date=bbDatepickerParser.runParsers(newDate,format),angular.isDate(date)&&el.val($filter("date")(date,format)),date?date:viewValue)}),controllers[1].getInputNgModel=function(){return ngModel}}}}]).directive("bbMinDate",function(){return{restrict:"A",require:"ngModel",link:function($scope,element,attrs,ngModel){ngModel.$validators.minDate=function(modelValue){return!$scope.minDate||!modelValue||!angular.isDate(modelValue)||!angular.isDate($scope.minDate)||modelValue>=$scope.minDate}}}}).directive("bbMaxDate",function(){return{restrict:"A",require:"ngModel",link:function($scope,element,attrs,ngModel){ngModel.$validators.maxDate=function(modelValue){return!$scope.maxDate||!modelValue||!angular.isDate(modelValue)||!angular.isDate($scope.maxDate)||modelValue<=$scope.maxDate}}}}).factory("bbDatepickerParser",["bbMoment",function(bbMoment){function parseUTCString(value){var dateArray,datePart,date=null;return angular.isString(value)&&-1!==value.indexOf("T00:00:00")&&(datePart=value.split("T")[0],dateArray=datePart.split("-"),date=new Date(dateArray[0],dateArray[1]-1,dateArray[2])),date}function parseNoSeparatorDateString(value,format){var yearIndex,monthIndex,dayIndex,date=null,yearBegin=format.indexOf("y"),monthBegin=format.indexOf("M"),dayBegin=format.indexOf("d");if(angular.isString(value)&&8===value.length&&!isNaN(value)){if(yearBegin>dayBegin&&yearBegin>monthBegin)yearIndex=4,dayBegin>monthBegin?(dayIndex=2,monthIndex=0):(dayIndex=0,monthIndex=2);else{if(!(monthBegin>yearBegin&&dayBegin>monthBegin))return null;yearIndex=0,monthIndex=4,dayIndex=6}date=new Date(value.substr(yearIndex,4),value.substr(monthIndex,2)-1,value.substr(dayIndex,2))}return date}function matchSeparator(value){return value.match(/[.\/\-\s].*?/)}function dateHasSeparator(value){var separator=matchSeparator(value),valueArray=value.split(separator),separatorAtEnd=-1!==value.indexOf(separator,value.length-1),separatorAtBeginning=0===value.indexOf(separator),hasTwoSeparators=valueArray.length-1===2,anyPartIsZero=valueArray.some(function(e){return 0===Number(e)});return separator&&!separatorAtEnd&&!separatorAtBeginning&&hasTwoSeparators&&!anyPartIsZero}function isMomentParsable(value,format){var yearParts,yearIndex,monthIndex,dayIndex,separator;if(angular.isString(value)&&dateHasSeparator(value)){if(10===value.length)return!0;if(9===value.length||8===value.length){if(separator=matchSeparator(value),yearParts=value.split(separator),yearIndex=format.indexOf("y"),monthIndex=format.indexOf("M"),dayIndex=format.indexOf("d"),yearIndex>monthIndex&&yearIndex>dayIndex)return 4===yearParts[2].length;if(monthIndex>yearIndex&&dayIndex>yearIndex)return 4===yearParts[0].length}}return!1}function parseMoment(value,format){var momentDate,date=null;return isMomentParsable(value,format)&&(momentDate=bbMoment(value,format.toUpperCase()),momentDate.isValid()&&(date=momentDate.toDate())),date}return{parseUTCString:parseUTCString,parseNoSeparatorDateString:parseNoSeparatorDateString,parseMoment:parseMoment,runParsers:function(value,format){var date=null;return!value||angular.isDate(value)||""===value?value:(date=parseUTCString(value),angular.isDate(date)?date:(date=parseNoSeparatorDateString(value,format),angular.isDate(date)?date:date=parseMoment(value,format)))}}}])}(jQuery),function(){"use strict";function bbDateRangePickerFactory(bbResources){function getTypeInfoFromDateRangePickerValue(dateRangePickerValue,getDateRangeTypeInfo){var info;return info=getDateRangeTypeInfo(dateRangePickerValue&&dateRangePickerValue.dateRangeType?dateRangePickerValue.dateRangeType:dateRangePickerValue)}function getDateRangeTypeCaption(dateRangePickerValue,getDateRangeTypeInfo){var info;return angular.isFunction(getDateRangeTypeInfo)&&(info=getTypeInfoFromDateRangePickerValue(dateRangePickerValue,getDateRangeTypeInfo),info&&info.caption)?info.caption:(dateRangePickerValue=angular.isNumber(dateRangePickerValue)?{dateRangeType:dateRangePickerValue}:dateRangePickerValue||{},angular.isDefined(dateRangePickerValue.dateRangeType)||(dateRangePickerValue.dateRangeType=dateRangeTypes.AT_ANY_TIME),angular.isDefined(dateRangeMap[dateRangePickerValue.dateRangeType])?dateRangeMap[dateRangePickerValue.dateRangeType].caption:"")}function getDateRangeFilterDescription(dateRangePickerValue,getDateRangeTypeInfo){var info;return angular.isFunction(getDateRangeTypeInfo)&&(info=getTypeInfoFromDateRangePickerValue(dateRangePickerValue,getDateRangeTypeInfo),info&&info.description)?info.description:(dateRangePickerValue=angular.isNumber(dateRangePickerValue)?{dateRangeType:dateRangePickerValue}:dateRangePickerValue||{},angular.isDefined(dateRangePickerValue.dateRangeType)||(dateRangePickerValue.dateRangeType=dateRangeTypes.AT_ANY_TIME),angular.isDefined(dateRangeMap[dateRangePickerValue.dateRangeType])?dateRangeMap[dateRangePickerValue.dateRangeType].description:"")}function getDateRangeOptions(optionTypes){var dateRangeOptions=[dateRangeTypes.AT_ANY_TIME];return optionTypes=optionTypes||{},optionTypes.includeDefault&&(dateRangeOptions.push(dateRangeTypes.YESTERDAY),dateRangeOptions.push(dateRangeTypes.TODAY),dateRangeOptions.push(dateRangeTypes.TOMORROW),dateRangeOptions.push(dateRangeTypes.LAST_WEEK),dateRangeOptions.push(dateRangeTypes.THIS_WEEK),dateRangeOptions.push(dateRangeTypes.NEXT_WEEK),dateRangeOptions.push(dateRangeTypes.LAST_MONTH),dateRangeOptions.push(dateRangeTypes.THIS_MONTH),dateRangeOptions.push(dateRangeTypes.NEXT_MONTH),dateRangeOptions.push(dateRangeTypes.LAST_QUARTER),dateRangeOptions.push(dateRangeTypes.THIS_QUARTER),dateRangeOptions.push(dateRangeTypes.NEXT_QUARTER),dateRangeOptions.push(dateRangeTypes.LAST_CALENDAR_YEAR),dateRangeOptions.push(dateRangeTypes.THIS_CALENDAR_YEAR),dateRangeOptions.push(dateRangeTypes.NEXT_CALENDAR_YEAR),dateRangeOptions.push(dateRangeTypes.LAST_FISCAL_YEAR),dateRangeOptions.push(dateRangeTypes.THIS_FISCAL_YEAR),dateRangeOptions.push(dateRangeTypes.NEXT_FISCAL_YEAR)),optionTypes.includePast&&!optionTypes.includeDefault&&(dateRangeOptions.push(dateRangeTypes.YESTERDAY),dateRangeOptions.push(dateRangeTypes.TODAY),dateRangeOptions.push(dateRangeTypes.LAST_WEEK),dateRangeOptions.push(dateRangeTypes.THIS_WEEK),dateRangeOptions.push(dateRangeTypes.LAST_MONTH),dateRangeOptions.push(dateRangeTypes.THIS_MONTH),dateRangeOptions.push(dateRangeTypes.LAST_QUARTER),dateRangeOptions.push(dateRangeTypes.THIS_QUARTER),dateRangeOptions.push(dateRangeTypes.LAST_CALENDAR_YEAR),dateRangeOptions.push(dateRangeTypes.THIS_CALENDAR_YEAR),dateRangeOptions.push(dateRangeTypes.LAST_FISCAL_YEAR),dateRangeOptions.push(dateRangeTypes.THIS_FISCAL_YEAR)),optionTypes.includeSpecific&&dateRangeOptions.push(dateRangeTypes.SPECIFIC_RANGE),dateRangeOptions}var dateRangeTypes,defaultDateRangeOptions,specificDateRangeOptions,pastDateRangeOptions,dateRangeMap;return dateRangeTypes={AT_ANY_TIME:0,NEXT_WEEK:1,THIS_MONTH:2,NEXT_MONTH:3,THIS_QUARTER:4,NEXT_QUARTER:5,THIS_FISCAL_YEAR:6,NEXT_FISCAL_YEAR:7,THIS_CALENDAR_YEAR:8,NEXT_CALENDAR_YEAR:9,LAST_WEEK:10,LAST_MONTH:11,LAST_QUARTER:12,LAST_FISCAL_YEAR:13,LAST_CALENDAR_YEAR:14,TODAY:15,YESTERDAY:16,TOMORROW:17,THIS_WEEK:18,SPECIFIC_RANGE:19},defaultDateRangeOptions=[dateRangeTypes.AT_ANY_TIME,dateRangeTypes.YESTERDAY,dateRangeTypes.TODAY,dateRangeTypes.TOMORROW,dateRangeTypes.LAST_WEEK,dateRangeTypes.THIS_WEEK,dateRangeTypes.NEXT_WEEK,dateRangeTypes.LAST_MONTH,dateRangeTypes.THIS_MONTH,dateRangeTypes.NEXT_MONTH,dateRangeTypes.LAST_QUARTER,dateRangeTypes.THIS_QUARTER,dateRangeTypes.NEXT_QUARTER,dateRangeTypes.LAST_CALENDAR_YEAR,dateRangeTypes.THIS_CALENDAR_YEAR,dateRangeTypes.NEXT_CALENDAR_YEAR,dateRangeTypes.LAST_FISCAL_YEAR,dateRangeTypes.THIS_FISCAL_YEAR,dateRangeTypes.NEXT_FISCAL_YEAR],specificDateRangeOptions=defaultDateRangeOptions.concat([dateRangeTypes.SPECIFIC_RANGE]),pastDateRangeOptions=[dateRangeTypes.AT_ANY_TIME,dateRangeTypes.YESTERDAY,dateRangeTypes.TODAY,dateRangeTypes.LAST_WEEK,dateRangeTypes.THIS_WEEK,dateRangeTypes.LAST_MONTH,dateRangeTypes.THIS_MONTH,dateRangeTypes.LAST_QUARTER,dateRangeTypes.THIS_QUARTER,dateRangeTypes.LAST_CALENDAR_YEAR,dateRangeTypes.THIS_CALENDAR_YEAR,dateRangeTypes.LAST_FISCAL_YEAR,dateRangeTypes.THIS_FISCAL_YEAR],dateRangeMap={},dateRangeMap[dateRangeTypes.AT_ANY_TIME]={caption:bbResources.date_range_picker_at_any_time,description:bbResources.date_range_picker_filter_description_at_any_time},dateRangeMap[dateRangeTypes.YESTERDAY]={caption:bbResources.date_range_picker_yesterday,description:bbResources.date_range_picker_filter_description_yesterday},dateRangeMap[dateRangeTypes.TODAY]={caption:bbResources.date_range_picker_today,description:bbResources.date_range_picker_filter_description_today},dateRangeMap[dateRangeTypes.TOMORROW]={caption:bbResources.date_range_picker_tomorrow,description:bbResources.date_range_picker_filter_description_tomorrow},dateRangeMap[dateRangeTypes.LAST_WEEK]={caption:bbResources.date_range_picker_last_week,description:bbResources.date_range_picker_filter_description_last_week},dateRangeMap[dateRangeTypes.THIS_WEEK]={caption:bbResources.date_range_picker_this_week,description:bbResources.date_range_picker_filter_description_this_week},dateRangeMap[dateRangeTypes.NEXT_WEEK]={caption:bbResources.date_range_picker_next_week,description:bbResources.date_range_picker_filter_description_next_week},dateRangeMap[dateRangeTypes.LAST_QUARTER]={caption:bbResources.date_range_picker_last_quarter,description:bbResources.date_range_picker_filter_description_last_quarter},dateRangeMap[dateRangeTypes.THIS_QUARTER]={caption:bbResources.date_range_picker_this_quarter,description:bbResources.date_range_picker_filter_description_this_quarter},dateRangeMap[dateRangeTypes.NEXT_QUARTER]={caption:bbResources.date_range_picker_next_quarter,description:bbResources.date_range_picker_filter_description_next_quarter},dateRangeMap[dateRangeTypes.LAST_CALENDAR_YEAR]={caption:bbResources.date_range_picker_last_calendar_year,description:bbResources.date_range_picker_filter_description_last_calendar_year},dateRangeMap[dateRangeTypes.THIS_CALENDAR_YEAR]={caption:bbResources.date_range_picker_this_calendar_year,description:bbResources.date_range_picker_filter_description_this_calendar_year},dateRangeMap[dateRangeTypes.NEXT_CALENDAR_YEAR]={caption:bbResources.date_range_picker_next_calendar_year,description:bbResources.date_range_picker_filter_description_next_calendar_year},dateRangeMap[dateRangeTypes.LAST_FISCAL_YEAR]={caption:bbResources.date_range_picker_last_fiscal_year,description:bbResources.date_range_picker_filter_description_last_fiscal_year},dateRangeMap[dateRangeTypes.THIS_FISCAL_YEAR]={caption:bbResources.date_range_picker_this_fiscal_year,description:bbResources.date_range_picker_filter_description_this_fiscal_year},dateRangeMap[dateRangeTypes.NEXT_FISCAL_YEAR]={caption:bbResources.date_range_picker_next_fiscal_year,description:bbResources.date_range_picker_filter_description_next_fiscal_year},dateRangeMap[dateRangeTypes.THIS_MONTH]={caption:bbResources.date_range_picker_this_month,description:bbResources.date_range_picker_filter_description_this_month},dateRangeMap[dateRangeTypes.NEXT_MONTH]={caption:bbResources.date_range_picker_next_month,description:bbResources.date_range_picker_filter_description_next_month},dateRangeMap[dateRangeTypes.LAST_MONTH]={caption:bbResources.date_range_picker_last_month,description:bbResources.date_range_picker_filter_description_last_month},dateRangeMap[dateRangeTypes.SPECIFIC_RANGE]={caption:bbResources.date_range_picker_specific_range,description:bbResources.date_range_picker_filter_description_specific_range},{defaultDateRangeOptions:defaultDateRangeOptions,pastDateRangeOptions:pastDateRangeOptions,specificDateRangeOptions:specificDateRangeOptions,dateRangeTypes:dateRangeTypes,getDateRangeOptions:getDateRangeOptions,getDateRangeTypeCaption:getDateRangeTypeCaption,getDateRangeFilterDescription:getDateRangeFilterDescription}}function bbDateRangePickerDirective(bbDateRangePicker,bbResources){return{replace:!0,restrict:"E",templateUrl:"sky/templates/daterangepicker/daterangepicker.html",scope:{},controllerAs:"bbDateRangePickerCtrl",bindToController:{bbDateRangePickerValue:"=",bbDateRangePickerAutomationId:"=",bbDateRangePickerOptions:"=",fromDate:"=?bbDateRangePickerFromDate",toDate:"=?bbDateRangePickerToDate",pickerLabel:"=?bbDateRangePickerLabel",isValid:"=?bbDateRangePickerValid"},controller:["$scope",function($scope){var vm=this;vm.resources=bbResources,vm.defaultDateRangeOptions=bbDateRangePicker.getDateRangeOptions({includeDefault:!0}),vm.getDateRangeTypeCaption=function(dateRangeTypeValue){var infoFunction;return vm.bbDateRangePickerOptions&&angular.isFunction(vm.bbDateRangePickerOptions.getDateRangeTypeInfo)&&(infoFunction=vm.bbDateRangePickerOptions.getDateRangeTypeInfo),bbDateRangePicker.getDateRangeTypeCaption(dateRangeTypeValue,infoFunction)},$scope.$watch(function(){return vm.dateRangeForm.$valid},function(newVal){vm.isValid=newVal}),$scope.$watch(function(){return vm.fromDate},function(newVal){vm.minDate=angular.copy(newVal)}),$scope.$watch(function(){return vm.toDate},function(newVal){vm.maxDate=angular.copy(newVal)}),$scope.$watch(function(){return vm.bbDateRangePickerValue},function(newVal){return newVal?(vm.specificRangeIsVisible=vm.bbDateRangePickerValue.dateRangeType===bbDateRangePicker.dateRangeTypes.SPECIFIC_RANGE,void(newVal.dateRangeType=newVal.dateRangeType||bbDateRangePicker.dateRangeTypes.AT_ANY_TIME)):void(vm.bbDateRangePickerValue={dateRangeType:bbDateRangePicker.dateRangeTypes.AT_ANY_TIME})},!0)}],link:function($scope,el,attr,vm){vm.noLabels=attr.bbDateRangePickerNoLabels,vm.noLabels?(vm.toPlaceholder=bbResources.date_range_picker_to_date,vm.fromPlaceholder=bbResources.date_range_picker_from_date):(vm.toPlaceholder="",vm.fromPlaceholder="")}}}bbDateRangePickerFactory.$inject=["bbResources"],bbDateRangePickerDirective.$inject=["bbDateRangePicker","bbResources"],angular.module("sky.daterangepicker",["sky.resources","sky.datepicker"]).factory("bbDateRangePicker",bbDateRangePickerFactory).directive("bbDateRangePicker",bbDateRangePickerDirective)}(),function(){"use strict";function BBErrorActionController($scope){var vm=this;$scope.$on("$destroy",function(){vm.onDestroy(),vm=null})}function bbErrorAction(){function link(scope,el,attrs,ctrls){var vm=ctrls[0],bbError=ctrls[1];vm.el=el,null!==bbError&&bbError.setAction(vm)}return{restrict:"E",require:["bbErrorAction","?^bbError"],controller:BBErrorActionController,controllerAs:"bbErrorAction",link:link,scope:{}}}BBErrorActionController.$inject=["$scope"],angular.module("sky.error.action.directive",[]).directive("bbErrorAction",bbErrorAction)}(),function(){"use strict";function BBErrorDescriptionController($scope,bbResources){var vm=this;$scope.$on("$destroy",function(){vm.onDestroy(),vm=null}),$scope.$watch(function(){return vm.bbErrorType||vm.errorType},function(newValue){switch(newValue){case"broken":vm.description=bbResources.error_description_broken;break;case"construction":vm.description=bbResources.error_description_construction;break;case"notFound":vm.description=""}})}function bbErrorDescription(){function link(scope,el,attrs,ctrls){var vm=ctrls[0],bbError=ctrls[1];vm.el=el,null!==bbError&&bbError.setDescription(vm,"errorDefault"in attrs)}return{restrict:"E",require:["bbErrorDescription","?^bbError"],controller:BBErrorDescriptionController,controllerAs:"bbErrorDescription",bindToController:{errorType:"@",bbErrorType:"@"},link:link,scope:{},transclude:!0,templateUrl:"sky/templates/error/error.description.directive.html"}}BBErrorDescriptionController.$inject=["$scope","bbResources"],angular.module("sky.error.description.directive",[]).directive("bbErrorDescription",bbErrorDescription)}(),function(){"use strict";function getCtrlPropName(component){var name=component.name;return name.charAt(0).toLowerCase()+name.substr(1)+"Ctrl"}function getOverridePropName(component){var name=component.name;return name.charAt(0).toLowerCase()+name.substr(1)+"HasOverride"}function BBErrorController($scope){function addComponentSetter(component){var name=component.name;vm["set"+name]=function(ctrl,isDefaultError){var ctrlName=getCtrlPropName(component),hasOverride=getOverridePropName(component);vm[ctrlName]=ctrl,isDefaultError||(vm[hasOverride]=!0),ctrl.onDestroy=function(){vm[ctrlName]=null}}}var vm=this;$scope.$watch(function(){return vm.bbErrorType||vm.errorType},function(newValue){vm.imageType=newValue,vm.titleType=newValue,vm.descriptionType=newValue}),components.forEach(addComponentSetter)}function bbError(){function link(scope,el,attrs,vm){function watchForComponent(component){scope.$watch(function(){return vm[getCtrlPropName(component)]},function(newValue){newValue&&el.find(".bb-error-"+component.cls).empty().append(newValue.el)})}components.forEach(watchForComponent)}return{restrict:"E",controller:"BBErrorController",controllerAs:"bbError",bindToController:{errorType:"@",bbErrorType:"@"},link:link,scope:{},templateUrl:"sky/templates/error/error.directive.html",transclude:!0}}var components=[{name:"Image",cls:"image"},{name:"Title",cls:"title"},{name:"Description",cls:"description"},{name:"Action",cls:"action"}];BBErrorController.$inject=["$scope"],angular.module("sky.error.directive",["sky.error.image.directive","sky.error.title.directive","sky.error.description.directive","sky.error.action.directive"]).controller("BBErrorController",BBErrorController).directive("bbError",bbError)}(),function(){"use strict";function BBErrorImageController($scope){var vm=this;$scope.$on("$destroy",function(){vm.onDestroy(),vm=null})}function bbErrorImage(){function link(scope,el,attrs,ctrls){var vm=ctrls[0],bbError=ctrls[1];vm.el=el,null!==bbError&&bbError.setImage(vm,"errorDefault"in attrs),angular.isDefined(attrs.errorType)&&scope.$watch(function(){return vm.errorType},function(newValue){newValue!==vm.bbErrorType&&(vm.bbErrorType=newValue)})}return{restrict:"E",require:["bbErrorImage","?^bbError"],controller:BBErrorImageController,controllerAs:"bbErrorImage",bindToController:{errorType:"@",bbErrorType:"@"},link:link,scope:{},transclude:!0,templateUrl:"sky/templates/error/error.image.directive.html"}}BBErrorImageController.$inject=["$scope"],angular.module("sky.error.image.directive",[]).directive("bbErrorImage",bbErrorImage)}(),function(){"use strict";function BBErrorTitleController($scope,bbResources){var vm=this;$scope.$on("$destroy",function(){vm.onDestroy(),vm=null}),$scope.$watch(function(){return vm.bbErrorType||vm.errorType},function(newValue){switch(newValue){case"broken":vm.title=bbResources.error_title_broken;break;case"construction":vm.title=bbResources.error_title_construction;break;case"notFound":vm.title=bbResources.error_title_notfound}})}function bbErrorTitle(){function link(scope,el,attrs,ctrls){var vm=ctrls[0],bbError=ctrls[1];vm.el=el,null!==bbError&&bbError.setTitle(vm,"errorDefault"in attrs)}return{restrict:"E",require:["bbErrorTitle","?^bbError"],controller:BBErrorTitleController,controllerAs:"bbErrorTitle",bindToController:{errorType:"@",bbErrorType:"@"},link:link,scope:{},transclude:!0,templateUrl:"sky/templates/error/error.title.directive.html"}}BBErrorTitleController.$inject=["$scope","bbResources"],angular.module("sky.error.title.directive",[]).directive("bbErrorTitle",bbErrorTitle)}(),function(){"use strict";function BBErrorModalController($uibModalInstance,options){var vm=this;vm.options=options,vm.close=function(){$uibModalInstance.close()}}BBErrorModalController.$inject=["$uibModalInstance","options"],angular.module("sky.errormodal.controller",["sky.error.directive"]).controller("BBErrorModalController",BBErrorModalController)}(),function(){"use strict";function bbErrorModal(bbModal){return{open:function(options){return bbModal.open({controller:"BBErrorModalController as bbErrorModal",templateUrl:"sky/templates/error/errormodal.template.html",resolve:{options:function(){return options}}})}}}bbErrorModal.$inject=["bbModal"],angular.module("sky.errormodal.service",["sky.errormodal.controller","sky.modal"]).factory("bbErrorModal",bbErrorModal)}(),function(){"use strict";angular.module("sky.fileattachments",["sky.fileattachments.filedrop","sky.fileattachments.fileitem","sky.fileattachments.filesize"])}(),function($){"use strict";function run($window){$($window).on("dragover drop",function(e){$(e.target).hasClass("bb-file-drop-target")||e.preventDefault()})}function bbFileDrop($parse,$templateCache){return{link:function(scope,el,attrs){scope.bbFileDrop={hasTranscludeContents:$.trim(el.find(".bb-file-drop-contents-custom").html()).length>0,allowLinks:angular.isDefined(attrs.bbFileDropLink),addLink:function($event){$event.preventDefault(),scope.bbFileDropLinkChange({link:{url:scope.bbFileDrop.url}}),scope.bbFileDrop.url=null},fileChange:function($files,$event,$invalidFiles){scope.bbFileDropChange({files:$files,rejectedFiles:$invalidFiles})}}},scope:{bbFileDropChange:"&",bbFileDropLinkChange:"&"},template:function(el,attrs){var dropEl;el.html($templateCache.get("sky/templates/fileattachments/filedrop.html")),dropEl=el.find(".bb-file-drop"),dropEl.attr({"ngf-allow-dir":attrs.bbFileDropAllowDir,"ngf-pattern":attrs.bbFileDropAccept,"ngf-multiple":attrs.bbFileDropMultiple||"true","ngf-min-size":attrs.bbFileDropMinSize||"0","ngf-max-size":attrs.bbFileDropMaxSize||"500000"}),angular.isDefined(attrs.bbFileDropNoclick)?dropEl.addClass("bb-file-drop-noclick"):dropEl.attr("ngf-select","")},transclude:!0}}run.$inject=["$window"],bbFileDrop.$inject=["$parse","$templateCache"],angular.module("sky.fileattachments.filedrop",["ngFileUpload","sky.resources"]).run(run).directive("bbFileDrop",bbFileDrop)}(jQuery),function(){"use strict";function bbFileItem(){return{link:function(scope){function getFileTypeUpper(){var fileType="";return scope.item&&(fileType=scope.item.type||""),fileType.toUpperCase()}function getFileExtensionUpper(){var name,extension="";return scope.item&&(name=scope.item.name||"",extension=name.substr(name.lastIndexOf("."))||""),extension.toUpperCase()}scope.bbFileItem={isFile:function(){var item=scope.item;return item&&angular.isDefined(item.size)},isImg:function(){var slashIndex,fileTypeUpper=getFileTypeUpper();if(slashIndex=fileTypeUpper.indexOf("/"),slashIndex>=0)switch(fileTypeUpper.substr(fileTypeUpper.indexOf("/")+1)){case"BMP":case"GIF":case"JPEG":case"PNG":return!0}return!1}},scope.$watch("item.type",function(){var cls,fileTypeUpper,extensionUpper=getFileExtensionUpper();switch(extensionUpper){case".PDF":cls="pdf";break;case".GZ":case".RAR":case".TGZ":case".ZIP":cls="archive";break;case".PPT":case".PPTX":cls="powerpoint";break;case".DOC":case".DOCX":cls="word";break;case".XLS":case".XLSX":cls="excel";break;case".TXT":cls="text";break;case".HTM":case".HTML":cls="code"}if(!cls)switch(fileTypeUpper=getFileTypeUpper(),fileTypeUpper.substr(0,fileTypeUpper.indexOf("/"))){case"AUDIO":cls="audio";break;case"IMAGE":cls="image";break;case"TEXT":cls="text";break;case"VIDEO":cls="video"}scope.bbFileItem.otherCls="fa-file-"+(cls?cls+"-":"")+"o"})},scope:{item:"=bbFileItem",itemDelete:"&bbFileItemDelete"},templateUrl:"sky/templates/fileattachments/fileitem.html",transclude:!0}}angular.module("sky.fileattachments.fileitem",["ngFileUpload","sky.fileattachments.filesize","sky.resources"]).directive("bbFileItem",bbFileItem)}(),function(){"use strict";function bbFileSize($filter,bbFormat,bbResources){return function(input){var formattedSize,roundedSize,template,decimalPlaces=0,dividend=1;return null===input||angular.isUndefined(input)?"":(1===Math.abs(input)?template=bbResources.file_size_b_singular:1e3>input?template=bbResources.file_size_b_plural:1e6>input?(template=bbResources.file_size_kb,dividend=1e3):1e9>input?(template=bbResources.file_size_mb,dividend=1e6,decimalPlaces=1):(template=bbResources.file_size_gb,dividend=1e9,decimalPlaces=1),roundedSize=Math.floor(input/(dividend/Math.pow(10,decimalPlaces)))/Math.pow(10,decimalPlaces),formattedSize=$filter("number")(roundedSize),bbFormat.formatText(template,formattedSize))}}bbFileSize.$inject=["$filter","bbFormat","bbResources"],angular.module("sky.fileattachments.filesize",["sky.format","sky.resources"]).filter("bbFileSize",bbFileSize)}(),function(){"use strict";function replaceTag(tag){return tagsToReplace[tag]}function isEmpty(str){return null===str||angular.isUndefined(str);
}var tagsToReplace={"&":"&amp;","<":"&lt;",">":"&gt;"};angular.module("sky.format",[]).factory("bbFormat",function(){return{formatText:function(format){var args;return isEmpty(format)?"":(args=arguments,String(format).replace(/\{(\d+)\}/g,function(match,capture){return args[parseInt(capture,10)+1]}))},escape:function(str){return isEmpty(str)?"":String(str).replace(/[&<>]/g,replaceTag)}}})}(),function(){"use strict";function buildCategoryList(columns){var column,index,len,categories=[];for(len=columns.length,index=0;len>index;index++)column=columns[index],column.category&&-1===categories.indexOf(column.category)&&categories.push(column.category);return categories}function columnCompare(a,b){return a=a.title.toLocaleLowerCase(),b=b.title.toLocaleLowerCase(),b>a?-1:a>b?1:0}function getInitialSelectedColumns(columns,selectedIds){var selectedColumns=[];return angular.forEach(columns,function(column){selectedIds.indexOf(column.id)>=0&&selectedColumns.push(column)}),selectedColumns}function BBGridColumnPickerController($scope,availableColumns,initialSelectedColumnIds,columnPickerHelpKey,listMode){var initialSelectedColumns,columns=[];angular.forEach(availableColumns,function(column){columns.push({id:column.id,name:column.name,title:column.caption,category:column.category,description:column.description})}),initialSelectedColumns=getInitialSelectedColumns(columns,initialSelectedColumnIds),columns.sort(columnCompare),$scope.columns=columns,$scope.categories=buildCategoryList(columns),$scope.locals={},$scope.locals.selectedColumns=initialSelectedColumns.slice(0),$scope.columnPickerHelpKey=columnPickerHelpKey,$scope.listMode=listMode,$scope.applyChanges=function(){var column,i,scopeColumns=$scope.columns,selectedColumns=$scope.locals.selectedColumns,columnIds=[];angular.forEach(initialSelectedColumnIds,function(columnId){for(i=0;i<scopeColumns.length;i++)if(column=scopeColumns[i],column.id===columnId){selectedColumns.indexOf(column)>=0&&columnIds.push(column.id);break}}),angular.forEach(selectedColumns,function(column){var id=column.id;columnIds.indexOf(id)<0&&columnIds.push(id)}),$scope.$close(columnIds)}}BBGridColumnPickerController.$inject=["$scope","columns","selectedColumnIds","columnPickerHelpKey","listMode"],angular.module("sky.grids.columnpicker",["sky.checklist","sky.resources"]).controller("BBGridColumnPickerController",BBGridColumnPickerController)}(),function(){"use strict";angular.module("sky.grids.actionbar",["sky.mediabreakpoints","sky.resources"]).directive("bbGridActionBar",["bbMediaBreakpoints","bbResources","$timeout",function(bbMediaBreakpoints,bbResources,$timeout){return{require:"^bbGrid",replace:!0,transclude:!0,restrict:"E",scope:{bbMultiselectActions:"=",bbSelectionsUpdated:"&"},controller:["$scope",function($scope){$scope.locals={actions:$scope.bbMultiselectActions,showActionBar:!1,mobileButtons:!1,showMobileActions:!1},$scope.resources=bbResources}],link:function($scope,element,attrs,bbGrid){function updateActionBar(data,selected){var action,i,showActionBar;if(visibleSelected=bbGrid.getVisibleSelections(data,selected),$scope.bbSelectionsUpdated({selections:{selections:visibleSelected}}),showActionBar=!1,$scope.locals.actions)for(i=0;i<$scope.locals.actions.length;i++)action=$scope.locals.actions[i],action.selections.length>0&&(showActionBar=!0);$scope.locals.showActionBar=showActionBar,showActionBar&&$timeout(function(){bbGrid.syncActionBarViewKeeper()})}function mediaBreakpointHandler(newBreakpoints){$scope.locals.mobileButtons=newBreakpoints.xs}var visibleSelected=[];bbGrid.scope.$watchCollection("selectedRows",function(newValue){updateActionBar(bbGrid.scope.options.data,newValue)}),bbGrid.scope.$watchCollection("options.data",function(newValue){updateActionBar(newValue,bbGrid.scope.selectedRows)}),bbMediaBreakpoints.register(mediaBreakpointHandler),element.on("$destroy",function(){bbMediaBreakpoints.unregister(mediaBreakpointHandler)}),$scope.locals.clearSelection=function(){visibleSelected.length===bbGrid.scope.selectedRows.length?bbGrid.resetMultiselect():bbGrid.toggleMultiselectRows(visibleSelected)},$scope.locals.chooseAction=function(){$scope.locals.showMobileActions=!0},$scope.locals.cancelChooseAction=function(){$scope.locals.showMobileActions=!1}},templateUrl:"sky/templates/grids/actionbar.html"}}])}(),function(){"use strict";angular.module("sky.grids.filters",["sky.help","sky.resources","sky.mediabreakpoints"]).directive("bbGridFilters",["bbHelp","bbResources","bbMediaBreakpoints",function(bbHelp,bbResources,bbMediaBreakpoints){return{require:"^bbGrid",replace:!0,transclude:!0,restrict:"E",scope:{bbOptions:"="},controller:["$scope",function($scope){$scope.applyFilters=function(){var args={},options=$scope.bbOptions;options&&options.applyFilters&&(options.applyFilters(args),$scope.updateFilters(args.filters),bbMediaBreakpoints.getCurrent().xs&&($scope.locals.expanded=!1))},$scope.clearFilters=function(){var args={},options=$scope.bbOptions;options&&options.clearFilters&&(options.clearFilters(args),$scope.updateFilters(args.filters))}}],link:function($scope,element,attrs,bbGrid){function animateFilters(isExpanded){var animationDuration=250;isExpanded?(box.css("left","240px"),filtersContainer.show(),box.animate({left:"0"},animationDuration)):box.animate({left:"240px"},{duration:animationDuration,complete:function(){box.css("left","0"),filtersContainer.hide()}})}var box=element.find(".bb-grid-filters-box"),filtersContainer=element.find(".bb-grid-filters-container");$scope.locals={expanded:!1},$scope.viewKeeperOptions={},bbGrid.viewKeeperChangedHandler=function(val){$scope.viewKeeperOptions.viewKeeperOffsetElId=val},bbGrid.toggleFilterMenu=function(isOpen){angular.isDefined(isOpen)?$scope.locals.expanded=isOpen:$scope.locals.expanded=!$scope.locals.expanded,$scope.locals.expanded&&bbHelp.close()},bbGrid.openFilterMenu=function(){$scope.locals.expanded=!0},bbGrid.scope.$watch("gridCreated",function(newValue){newValue&&(element.parents(".bb-grid-container").prepend(element),element.show(),$scope.locals.expanded&&animateFilters($scope.locals.expanded))}),$scope.updateFilters=function(filters){bbGrid.setFilters(filters)},$scope.resources=bbResources,$scope.$watch("locals.expanded",function(newValue,oldValue){(newValue!==oldValue||newValue)&&animateFilters(newValue)})},templateUrl:"sky/templates/grids/filters.html"}}]).directive("bbGridFiltersGroup",function(){return{replace:!0,transclude:!0,restrict:"E",scope:{bbGridFiltersGroupLabel:"=",isCollapsed:"=?bbGridFiltersGroupIsCollapsed"},templateUrl:"sky/templates/grids/filtersgroup.html"}}).directive("bbGridFiltersSummary",["bbResources",function(bbResources){return{require:"^bbGrid",replace:!0,transclude:!0,restrict:"E",scope:{bbOptions:"="},controller:["$scope",function($scope){$scope.clearFilters=function(){var args={},options=$scope.bbOptions;options&&options.clearFilters&&(options.clearFilters(args),$scope.updateFilters(args.filters))},$scope.resources=bbResources}],link:function($scope,element,attrs,bbGrid){bbGrid.scope.$watch("gridCreated",function(){var toolbarContainer=element.parents(".bb-grid-container").find(".bb-grid-toolbar-container .bb-grid-filter-summary-container");toolbarContainer.append(element)}),$scope.updateFilters=function(filters){bbGrid.setFilters(filters)},$scope.openFilterMenu=function(){bbGrid.openFilterMenu&&bbGrid.openFilterMenu()},$scope.$watch(function(){return element.is(":visible")},function(newValue,oldValue){newValue!==oldValue&&bbGrid.syncViewKeepers()})},templateUrl:"sky/templates/grids/filterssummary.html"}}])}(),function($){"use strict";function arrayObjectIndexOf(array,obj){var i;for(i=0;i<array.length;i++)if(angular.equals(array[i],obj))return i;return-1}var DEFAULT_ITEMS_PER_PAGE=5,DEFAULT_MAX_PAGES=5,DEFAULT_COLUMN_SIZE=150,MULTISELECT_COLUMN_SIZE=35,DROPDOWN_TOGGLE_COLUMN_SIZE=40,DROPDOWN_TOGGLE_COLUMN_NAME="dropdownToggle",MULTISELECT_COLUMN_NAME="cb";angular.module("sky.grids",["sky.contextmenu","sky.mediabreakpoints","sky.viewkeeper","sky.highlight","sky.resources","sky.data","sky.grids.filters","sky.grids.actionbar","sky.window","sky.grids.toolbar"]).controller("bbGridContextMenuController",["$scope",function($scope){function toggleDropdown($event){$event.preventDefault(),$event.stopPropagation(),$scope.locals.is_open=!$scope.locals.is_open}$scope.locals={is_open:!1,items:[],toggleDropdown:toggleDropdown},angular.isFunction($scope.getContextMenuItems)&&($scope.locals.items=$scope.getContextMenuItems($scope.rowData.id,$scope.rowData))}]).directive("bbGrid",["$window","$compile","$templateCache","bbMediaBreakpoints","bbViewKeeperBuilder","bbHighlight","bbResources","bbData","$controller","$timeout","bbWindow","$q",function($window,$compile,$templateCache,bbMediaBreakpoints,bbViewKeeperBuilder,bbHighlight,bbResources,bbData,$controller,$timeout,bbWindow,$q){return{replace:!0,transclude:!0,restrict:"E",scope:{options:"=bbGridOptions",multiselectActions:"=?bbMultiselectActions",updateMultiselectActions:"&bbSelectionsUpdated",paginationOptions:"=?bbGridPagination",selectedRows:"=?bbSelectedRows"},controller:["$scope",function($scope){var locals,self=this;self.setFilters=function(filters){angular.isFunction(locals.setFilters)&&locals.setFilters(filters)},self.syncViewKeepers=function(){$scope.syncViewKeepers&&$scope.syncViewKeepers()},self.syncActionBarViewKeeper=function(){angular.isFunction($scope.syncActionBarViewKeeper)&&$scope.syncActionBarViewKeeper()},self.resetMultiselect=function(){angular.isFunction(locals.resetMultiselect)&&locals.resetMultiselect()},self.getVisibleSelections=function(data,selected){var i,index,result=[];for(i=0;i<selected.length;i++)index=arrayObjectIndexOf(data,selected[i]),index>-1&&result.push(selected[i]);return result},self.toggleMultiselectRows=function(visibleSelectedRows){angular.isFunction(locals.toggleMultiselectRows)&&locals.toggleMultiselectRows(visibleSelectedRows)},self.syncGridHeaderScrollToTopScrollbar=function(){angular.isFunction(locals.topScrollbarScroll)&&locals.topScrollbarScroll()},self.scope=$scope,$scope.resources=bbResources,locals=$scope.locals={gridId:"bbgrid-table-"+$scope.$id,hasAdd:!1,hasColPicker:!0,hasFilters:!0,applySearchText:function(){angular.isFunction(self.applySearchText)&&self.applySearchText()}},$scope.$watch("options.viewKeeperOffsetElId",function(newValue,oldValue){newValue!==oldValue&&self.viewKeeperChangedHandler&&self.viewKeeperChangedHandler(newValue)})}],link:function($scope,element,attr){$scope.customToolbar={hasCustomToolbar:!1},$scope.customToolbar.hasCustomToolbar=angular.isDefined(attr.bbGridCustomToolbar),$scope.$watch("locals.hasCustomToolbar",function(){function getTopScrollbar(){return element.find(".bb-grid-top-scrollbar")}function getTopScrollbarDiv(){return element.find(".bb-grid-top-scrollbar > div")}function updateGridLoadedTimestampAndRowCount(count){$scope.locals.timestamp=(new Date).getTime(),$scope.locals.rowcount=count}function reInitGrid(){$scope.options&&$scope.options.selectedColumnIds&&$scope.options.selectedColumnIds.length>0&&tableEl[0].grid&&(initGrid(),$scope.options.data&&$scope.options.data.length>0&&setRows($scope.options.data))}function mediaBreakpointHandler(newBreakpoints){breakpoints=newBreakpoints,reInitGrid()}function buildColumnClasses(column){var classes="";return column.exclude_from_search&&(classes+="bb-grid-no-search "),classes}function getEmptyString(){return""}function buildCellAttribute(rowId,cellValue,rawObject,column){return"data-grid-field='"+column.name+"'data-bbauto-field='"+column.name+"'data-bbauto-index='"+(tableEl.getInd(rowId)-1)+"'"}function getColumnById(columns,id){var column,i;for(i=0;i<columns.length;i++)if(column=columns[i],column.id===id)return column}function resetExtendedColumn(){extendedColumnName=null,currentExtendedColumnWidth=null,originalExtendedColumnWidth=null,extendedColumnIndex=null,needsExtendedColumnResize=!1}function getBreakpointsWidth(column){var columnDefault;return columnDefault=column.width_all>0?column.width_all:DEFAULT_COLUMN_SIZE,breakpoints.xs?column.width_xs>0?column.width_xs:columnDefault:breakpoints.sm?column.width_sm>0?column.width_sm:columnDefault:breakpoints.md?column.width_md>0?column.width_md:columnDefault:breakpoints.lg&&column.width_lg>0?column.width_lg:columnDefault}function buildColumnModel(columns,selectedColumnIds){var column,colWidth,index,gridColumn,colModel=[];for(hasTemplatedColumns=!1,getContextMenuItems&&(colModel.push({classes:"bb-grid-dropdown-cell",fixed:!0,sortable:!1,name:DROPDOWN_TOGGLE_COLUMN_NAME,label:" ",width:DROPDOWN_TOGGLE_COLUMN_SIZE,title:!1,hidedlg:!0,resizable:!1,search:!1,template_url:dropdown_template,controller:"bbGridContextMenuController",cellattr:buildCellAttribute,formatter:getEmptyString,is_context_menu:!0}),compiledTemplates[dropdown_template]||(compiledTemplates[dropdown_template]=$compile($templateCache.get(dropdown_template))),hasTemplatedColumns=!0,totalColumnWidth+=DROPDOWN_TOGGLE_COLUMN_SIZE),resetExtendedColumn(),index=0;index<selectedColumnIds.length;index++)column=getColumnById(columns,selectedColumnIds[index]),column&&(colWidth=getBreakpointsWidth(column),index===selectedColumnIds.length-1&&tableWrapper.width()>colWidth+totalColumnWidth&&(needsExtendedColumnResize=!0,originalExtendedColumnWidth=colWidth,extendedColumnName=column.name,extendedColumnIndex=index,locals.multiselect&&(extendedColumnIndex+=1),getContextMenuItems&&(extendedColumnIndex+=1),colWidth=tableWrapper.width()-totalColumnWidth,currentExtendedColumnWidth=colWidth),gridColumn={index:column.id.toString(),sortable:!1,id:column.id,name:column.name,label:column.caption,align:column.right_align?"right":column.center_align?"center":"left",classes:buildColumnClasses(column),cellattr:buildCellAttribute,controller:column.controller,template_url:column.template_url,jsonmap:column.jsonmap,allow_see_more:column.allow_see_more,width:colWidth},column.allow_see_more&&!gridColumn.template_url&&(gridColumn.template_url=seemore_template,compiledTemplates[seemore_template]||(compiledTemplates[seemore_template]=$compile($templateCache.get(seemore_template)))),gridColumn.template_url?(gridColumn.formatter=getEmptyString,hasTemplatedColumns=!0):column.colFormatter&&(gridColumn.formatter=column.colFormatter),colModel.push(gridColumn),totalColumnWidth+=colWidth);return colModel}function getColumnElementIdFromName(columnName){return locals.gridId+"_"+columnName}function getColumnNameFromElementId(columnName){return columnName?columnName.replace(locals.gridId+"_",""):void 0}function getDesiredGridWidth(){var width=tableWrapper.width();return totalColumnWidth>width?(width=totalColumnWidth,tableWrapper.addClass("bb-grid-table-wrapper-overflow")):tableWrapper.addClass("bb-grid-table-wrapper"),width}function setScrollbarHeight(){var topScrollbar=getTopScrollbar(),topScrollbarDiv=getTopScrollbarDiv(),scrollbarWidth=bbWindow.getScrollbarWidth();totalColumnWidth>topScrollbar.width()&&!breakpoints.xs?(topScrollbar.height(scrollbarWidth),topScrollbarDiv.height(scrollbarWidth)):(topScrollbar.height(0),topScrollbarDiv.height(0))}function resetTopScrollbar(){var topScrollbarDiv=getTopScrollbarDiv();topScrollbarDiv.width(totalColumnWidth),setScrollbarHeight()}function setColumnSize(columnName,columnSize,totalWidth){var gridHeaders,bodyScrollLeft,colSizePx=columnSize+"px",tableGrid=tableEl[0].grid;gridHeaders=tableGrid.headers,bodyScrollLeft=tableGrid.bDiv.scrollLeft,tableEl[0].p.colModel[extendedColumnIndex].width=columnSize,gridHeaders[extendedColumnIndex].width=columnSize,gridHeaders[extendedColumnIndex].el.style.width=colSizePx,tableGrid.cols[extendedColumnIndex].style.width=colSizePx,tableEl[0].p.tblwidth=totalWidth||tableEl[0].p.tblwidth,tableGrid.hDiv.scrollLeft=bodyScrollLeft}function resizeExtendedColumn(changedWidth,isIncreasing){var extendedShrinkWidth=currentExtendedColumnWidth-originalExtendedColumnWidth;changedWidth>=extendedShrinkWidth?(isIncreasing?totalColumnWidth+=changedWidth-extendedShrinkWidth:totalColumnWidth-=extendedShrinkWidth,setColumnSize(extendedColumnName,originalExtendedColumnWidth,totalColumnWidth),tableWrapper.addClass("bb-grid-table-wrapper-overflow"),resetExtendedColumn()):(currentExtendedColumnWidth-=changedWidth,isIncreasing||(totalColumnWidth-=changedWidth),setColumnSize(extendedColumnName,currentExtendedColumnWidth,totalColumnWidth)),tableEl.setGridWidth(totalColumnWidth,!1),resetTopScrollbar()}function resetGridWidth(oldWidth,newWidth){var changedWidth,width,topScrollbar=getTopScrollbar();topScrollbar.width(tableWrapper.width()),needsExtendedColumnResize&&oldWidth>newWidth?(changedWidth=oldWidth-newWidth,resizeExtendedColumn(changedWidth,!1)):(totalColumnWidth===oldWidth&&(totalColumnWidth=newWidth),width=getDesiredGridWidth(),width>0&&(tableEl.setGridWidth(width),resetTopScrollbar()))}function getLastIndex(){var lastIndex=$scope.options.selectedColumnIds.length-1;return locals.multiselect&&(lastIndex+=1),getContextMenuItems&&(lastIndex+=1),lastIndex}function resizeStart(event,index){var jqGridEl,thEls,lastIndex=getLastIndex();hasPristineColumns=!1,jqGridEl=element.find(".ui-jqgrid"),index===lastIndex&&tableWrapperWidth>jqGridEl.width()&&(jqGridEl.width(tableWrapperWidth),element.find(".ui-jqgrid-hdiv").width(tableWrapperWidth),element.find(".ui-jqgrid-hdiv tr").css("padding-right",tableWrapperWidth.toString()+"px")),fullGrid.find(".ui-jqgrid-resize-mark").height(fullGrid.height()),thEls=element.find(".ui-jqgrid .ui-jqgrid-hdiv .ui-jqgrid-htable th"),resizeStartColWidth=parseInt(thEls[index].style.width)}function syncHeaderToTableWrapper(){vkHeader&&vkHeader.isFixed&&(header.width(tableWrapper.width()),header.scrollLeft(tableWrapper.scrollLeft()))}function resizeStop(newWidth,index){var changedWidth,resizedColumnIndex=index;if(locals.multiselect&&(resizedColumnIndex-=1),getContextMenuItems&&(resizedColumnIndex-=1),$scope.$emit("columnsResized",{newWidth:newWidth,index:resizedColumnIndex}),tableWrapper.addClass("bb-grid-table-wrapper-overflow"),changedWidth=newWidth-resizeStartColWidth,needsExtendedColumnResize){if(index!==extendedColumnIndex&&changedWidth>0)return resizeExtendedColumn(changedWidth,!0),resetExtendedColumn(),void syncHeaderToTableWrapper();resetExtendedColumn()}totalColumnWidth+=changedWidth,tableEl.setGridWidth(totalColumnWidth,!1),resetTopScrollbar(),syncHeaderToTableWrapper()}function setSortStyles(){var className,headerElId,sortOptions;header&&(header.find("th").removeClass("sorting-asc").removeClass("sorting-desc"),$scope.options&&(sortOptions=$scope.options.sortOptions,sortOptions&&sortOptions.column&&(headerElId=getColumnElementIdFromName(sortOptions.column),className=sortOptions.descending?"sorting-desc":"sorting-asc",header.find("#"+headerElId).addClass(className))))}function columnIsSortable(columnName){var excludedColumns,sortOptions=$scope.options.sortOptions;return columnName===DROPDOWN_TOGGLE_COLUMN_NAME||columnName===MULTISELECT_COLUMN_NAME?!1:!(sortOptions&&(excludedColumns=sortOptions.excludedColumns,excludedColumns&&excludedColumns.indexOf(columnName)>-1))}function highlightSearchText(){var options=$scope.options;options&&options.searchText?bbHighlight(tableEl.find("td").not(".bb-grid-no-search"),options.searchText,"highlight"):bbHighlight.clear(tableEl)}function linkCellValue(scope,cell,linkFunction){linkFunction(scope,function(cloned){cell.append(cloned)})}function afterInsertRow(rowid,rowdata,rowelem){var cell,column,columnData,i,itemScope,row,rowIndex;if(hasTemplatedColumns)for(tableBody||(tableBody=$(this)),row=tableBody.find("#"+rowid),i=0;i<columnModel.length;i++)column=columnModel[i],column.template_url&&(cell=row.find('[data-grid-field="'+column.name+'"]'),columnData=rowdata[column.name],itemScope=$scope.$new(!0),itemScope.data=columnData,itemScope.rowData=rowelem,column.allow_see_more&&(itemScope.skyResources=$scope.resources),column.is_context_menu&&(itemScope.getContextMenuItems=getContextMenuItems),$scope.options.resources&&(itemScope.resources=$scope.options.resources),column.controller&&$controller(column.controller,{$scope:itemScope}),cellScopes.push(itemScope),linkCellValue(itemScope,cell,compiledTemplates[column.template_url]));rowIndex=tableEl.getInd(rowid),$scope.selectedRows&&$scope.selectedRows.length>0&&(row=$scope.options.data[rowIndex-1],row&&arrayObjectIndexOf($scope.selectedRows,row)>-1&&tableEl.setSelection(rowid,!1))}function setColumnHeaderAlignment(){var alignmentClass,column,i;for(i=0;i<columnModel.length;i++)column=columnModel[i],alignmentClass="center"===column.align?"bb-grid-th-center":"right"===column.align?"bb-grid-th-right":"bb-grid-th-left",tableEl.setLabel(column.name,"",alignmentClass)}function gridComplete(){setColumnHeaderAlignment()}function gridColumnsReordered(orderedColumns){var i,oldIndex,offset=0,selectedColumnIds=$scope.options.selectedColumnIds,newSelectedColumnIds=[];for(resetExtendedColumn(),angular.isFunction(getContextMenuItems)&&(offset+=1),locals.multiselect&&(offset+=1),i=offset;i<orderedColumns.length;i++)oldIndex=orderedColumns[i],newSelectedColumnIds.push(selectedColumnIds[oldIndex-offset]);reorderingColumns=!0,$scope.options.selectedColumnIds=newSelectedColumnIds,$scope.$apply()}function getSortable(){var sortable={update:gridColumnsReordered,options:{helper:"clone"}};return getContextMenuItems&&(sortable.exclude="#"+$scope.locals.gridId+"_"+DROPDOWN_TOGGLE_COLUMN_NAME),sortable}function clearSelectedRowsObject(){$scope.selectedRows=[]}function resetMultiselect(){clearSelectedRowsObject(),tableEl.resetSelection()}function onSelectAll(rowIds,status){var allRowData;localRowSelect=!0,clearSelectedRowsObject(),status===!0&&(allRowData=$scope.options.data,allRowData&&allRowData.length>0&&($scope.selectedRows=allRowData.slice())),$scope.$apply()}function toggleMultiselectRows(visibleSelectedRows){var i,index,rowIds;for(rowIds=tableEl.getDataIDs(),i=0;i<visibleSelectedRows.length;i++)index=arrayObjectIndexOf($scope.options.data,visibleSelectedRows[i]),tableEl.setSelection(rowIds[index],!0)}function onSelectRow(rowId,status){$timeout(function(){var index,row,rowIndex=tableEl.getInd(rowId);row=$scope.options.data[rowIndex-1],localRowSelect=!0,index=arrayObjectIndexOf($scope.selectedRows,row),status===!0&&-1===index&&row?$scope.selectedRows.push(row):status===!1&&index>-1&&$scope.selectedRows.splice(index,1)})}function setMultiselectRow(rowId,rowIndex){var row;tableEl.setSelection(rowId,!1),row=$scope.options.data[rowIndex-1],$scope.selectedRows.push(row)}function beforeSelectRow(rowId,e){var endIndex,i,lastSelectedRow,rowIds,startIndex=parseInt(tableEl.getInd(rowId));if(localRowSelect=!0,e.shiftKey){if(lastSelectedRow=tableEl.getInd(tableEl.getGridParam("selrow")),resetMultiselect(),(angular.isUndefined(lastSelectedRow)||null===lastSelectedRow)&&(lastSelectedRow=1),endIndex=parseInt(lastSelectedRow),rowIds=tableEl.getDataIDs(),startIndex>endIndex)for(i=startIndex;i>endIndex-1;i-=1)setMultiselectRow(rowIds[i-1],i);else{if(!(endIndex>startIndex))return $scope.$apply(),!0;for(i=startIndex;endIndex+1>i;i+=1)setMultiselectRow(rowIds[i-1],i)}return $scope.$apply(),!1}return!0}function pageChanged(){var skip=($scope.paginationOptions.currentPage-1)*$scope.paginationOptions.itemsPerPage,top=$scope.paginationOptions.itemsPerPage;$scope.$emit("loadMoreRows",{top:top,skip:skip})}function initializePagination(){angular.isDefined($scope.paginationOptions)&&($scope.paginationOptions.itemsPerPage||($scope.paginationOptions.itemsPerPage=DEFAULT_ITEMS_PER_PAGE),$scope.paginationOptions.maxPages||($scope.paginationOptions.maxPages=DEFAULT_MAX_PAGES),$scope.paginationOptions.currentPage||($scope.paginationOptions.currentPage=1),$scope.paginationOptions.pageChanged=pageChanged)}function fancyCheckOff(){element.find("td .bb-check-checkbox").off()}function wrapCheckboxEl(checkboxEl){checkboxEl.wrap('<label class="bb-check-wrapper"></label>'),checkboxEl.after('<span class="bb-check-checkbox"></span>')}function setUpFancyCheckHeader(){var headerCheckEl=header.find("th .cbox");wrapCheckboxEl(headerCheckEl)}function setUpFancyCheckCell(){var checkCellEl=element.find("td > .cbox");wrapCheckboxEl(checkCellEl),element.find("td .bb-check-checkbox").on("click",function(event){event.preventDefault()})}function getIdPrefix(){return"bb-grid-row-"+$scope.$id+"-"}function initGrid(){var columns,jqGridOptions,selectedColumnIds,useGridView=!0,hoverrows=!1;totalColumnWidth=0,hasPristineColumns=!0,tableWrapperWidth=tableWrapper.width(),locals.multiselect=!1,tableBody=null,tableEl.jqGrid("GridUnload"),fancyCheckOff(),tableEl=element.find("table"),tableDomEl=tableEl[0],$scope.options&&(columns=$scope.options.columns,selectedColumnIds=$scope.options.selectedColumnIds,getContextMenuItems=$scope.options.getContextMenuItems,$scope.options.multiselect&&(locals.multiselect=!0,hoverrows=!0,totalColumnWidth+=MULTISELECT_COLUMN_SIZE),$scope.searchText=$scope.options.searchText),element[locals.multiselect?"addClass":"removeClass"]("bb-grid-multiselect"),getContextMenuItems&&(useGridView=!1),columns&&selectedColumnIds&&(columnModel=buildColumnModel(columns,selectedColumnIds),columnCount=columnModel.length,jqGridOptions={afterInsertRow:afterInsertRow,autoencode:!0,beforeSelectRow:beforeSelectRow,colModel:columnModel,datatype:angular.noop,gridComplete:gridComplete,gridView:useGridView,height:"auto",hoverrows:hoverrows,idPrefix:getIdPrefix(),multiselect:locals.multiselect,multiselectWidth:MULTISELECT_COLUMN_SIZE,onSelectAll:onSelectAll,onSelectRow:onSelectRow,resizeStart:resizeStart,resizeStop:resizeStop,rowNum:-1,shrinktofit:!1,sortable:getSortable(),width:getDesiredGridWidth()},tableEl.jqGrid(jqGridOptions),header=$(tableDomEl.grid.hDiv),header.find("th").on("click",function(){var columnName,sortOptions=$scope.options.sortOptions;sortOptions||(sortOptions=$scope.options.sortOptions={}),columnName=getColumnNameFromElementId(this.id),columnIsSortable(columnName)&&(sortOptions.column=columnName,sortOptions.descending=$(this).hasClass("sorting-asc"),$scope.$apply())}),fullGrid=header.parents(".ui-jqgrid:first"),vkHeader&&vkHeader.destroy(),$scope.locals.showToolbar=!0,getTopScrollbar().width(tableWrapper.width()),resetTopScrollbar(),$scope.options.fixedToolbar||(vkHeader=new bbViewKeeperBuilder.create({el:header[0],boundaryEl:tableWrapper[0],verticalOffSetElId:toolbarContainerId,setWidth:!0,onStateChanged:function(){vkHeader.isFixed?header.scrollLeft(tableWrapper.scrollLeft()):header.scrollLeft(0)}})),setSortStyles(),setUpFancyCheckHeader(),$scope.gridCreated=!0)}function destroyCellScopes(){var i;if(cellScopes)for(i=0;i<cellScopes.length;i++)cellScopes[i].$destroy();cellScopes=[]}function loadColumnTemplates(callback){var columns,templateUrlsToLoad={};$scope.options&&(columns=$scope.options.columns,columns&&angular.forEach(columns,function(column){var templateUrl=column.template_url;templateUrl&&!compiledTemplates[templateUrl]&&(templateUrlsToLoad[templateUrl]=templateUrl)})),bbData.load({text:templateUrlsToLoad}).then(function(result){var p,template;for(p in result.text)result.text.hasOwnProperty(p)&&(template=result.text[p],template&&(compiledTemplates[p]=$compile(template)));callback()})}function handleTableWrapperResize(){var newWidth=tableWrapper.width(),topScrollbar=getTopScrollbar();tableWrapperWidth&&tableWrapperWidth!==newWidth?(hasPristineColumns?resetGridWidth(tableWrapperWidth,newWidth):topScrollbar.width(newWidth),tableWrapperWidth=newWidth):tableWrapperWidth=newWidth}function setRows(rows){tableDomEl.addJSONData&&loadColumnTemplates(function(){locals.multiselect&&element.find("td").off("mousedown.gridmousedown"),tableEl.resetSelection(),fancyCheckOff(),destroyCellScopes(),tableDomEl.addJSONData(rows),$timeout(highlightSearchText),handleTableWrapperResize(),updateGridLoadedTimestampAndRowCount(rows?rows.length:0),setUpFancyCheckCell()})}function setupToolbarViewKeepers(){vkToolbars&&vkToolbars.destroy(),vkActionBarAndBackToTop&&vkActionBarAndBackToTop.destroy(),$scope.options&&(verticalOffSetElId=$scope.options.viewKeeperOffsetElId),$scope.options&&$scope.options.fixedToolbar||(vkToolbars=new bbViewKeeperBuilder.create({el:toolbarContainer[0],boundaryEl:tableWrapper[0],setWidth:!0,verticalOffSetElId:verticalOffSetElId,onStateChanged:function(){$timeout(function(){locals.isScrolled=vkToolbars.isFixed})}})),vkActionBarAndBackToTop=new bbViewKeeperBuilder.create({el:element.find(".bb-grid-action-bar-and-back-to-top")[0],boundaryEl:element[0],setWidth:!0,verticalOffSetElId:verticalOffSetElId,fixToBottom:!0})}function backToTop(){vkToolbars.scrollToTop()}function loadMore(){var deferred=$q.defer(),loadMorePromise=deferred.promise;loadMorePromise.then(function(moreRows){tableEl.addRowData("",moreRows),$scope.options.data=$scope.options.data.concat(moreRows),setUpFancyCheckCell(),doNotResetRows=!0}),$scope.$emit("loadMoreRows",{promise:deferred})}var cellScopes,columnModel,currentExtendedColumnWidth,extendedColumnIndex,extendedColumnName,fullGrid,getContextMenuItems,hasTemplatedColumns,header,id,needsExtendedColumnResize,originalExtendedColumnWidth,reorderingColumns,tableBody,tableWrapperWidth,toolbarContainerId,totalColumnWidth,verticalOffSetElId,vkActionBarAndBackToTop,vkToolbars,vkHeader,windowEventId,resizeStartColWidth,breakpoints={},columnCount=0,compiledTemplates=[],locals=$scope.locals,localRowSelect=!1,seemore_template="sky/templates/grids/seemore.html",dropdown_template="sky/templates/grids/dropdown.html",tableEl=element.find("table"),tableDomEl=tableEl[0],tableWrapper=element.find(".table-responsive"),toolbarContainer=element.find(".bb-grid-toolbar-viewkeeper"),windowEl=$($window),hasPristineColumns=!0,doNotResetRows=!1;locals.resetMultiselect=resetMultiselect,locals.toggleMultiselectRows=toggleMultiselectRows,locals.setFilters=function(filters){$scope.options.filters=filters,$scope.locals.applySearchText()},$scope.locals.loadMore=loadMore,!angular.isUndefined($scope.selectedRows)&&angular.isArray($scope.selectedRows)||($scope.selectedRows=[]),id=$scope.$id,toolbarContainerId=id+"-toolbar-container",locals.backToTop=backToTop,toolbarContainer.attr("id",toolbarContainerId),$scope.$watch("options.selectedColumnIds",function(newValue){var columnChangedData;if(newValue){if(reorderingColumns)return void(reorderingColumns=!1);initGrid(),columnChangedData={willResetData:!1},$scope.$emit("includedColumnsChanged",columnChangedData),!columnChangedData.willResetData&&$scope.options.data&&$scope.options.data.length>0&&setRows($scope.options.data)}},!0),$scope.$watchCollection("selectedRows",function(newSelections){var i,index,rowIds;if(localRowSelect)return void(localRowSelect=!1);if(tableEl[0].grid&&$scope.options.data&&$scope.options.data.length>0)for(tableEl.resetSelection(),rowIds=tableEl.getDataIDs(),i=0;i<newSelections.length;i++)index=arrayObjectIndexOf($scope.options.data,newSelections[i]),index>-1&&tableEl.setSelection(rowIds[index],!1)}),$scope.$watch("paginationOptions",initializePagination,!0),$scope.$watchCollection("options.data",function(newValue){doNotResetRows?doNotResetRows=!1:setRows(newValue)}),$scope.syncViewKeepers=function(){vkToolbars&&vkToolbars.syncElPosition()},$scope.syncActionBarViewKeeper=function(){vkActionBarAndBackToTop&&vkActionBarAndBackToTop.syncElPosition()},$scope.$watch("options.sortOptions",setSortStyles,!0),$scope.$watchGroup(["options.viewKeeperOffsetElId","options.fixedToolbar"],function(){setupToolbarViewKeepers()}),$scope.$watch("options.filters",function(f){$scope.$broadcast("updateAppliedFilters",f)}),$scope.$on("reInitGrid",function(){reInitGrid()}),bbMediaBreakpoints.register(mediaBreakpointHandler),tableWrapper.on("scroll",function(){vkHeader&&vkHeader.syncElPosition(),header.hasClass("bb-viewkeeper-fixed")&&header.scrollLeft(tableWrapper.scrollLeft()),getTopScrollbar().scrollLeft(tableWrapper.scrollLeft())}),windowEventId="bbgrid"+id,windowEl.on("resize."+windowEventId+", orientationchange."+windowEventId,function(){handleTableWrapperResize()}),$scope.$watch(function(){return element.width()},function(newValue,oldValue){
newValue!==oldValue&&0===oldValue&&reInitGrid()}),$scope.locals.topScrollbarScroll=function(){var topScrollbar=getTopScrollbar();tableWrapper.scrollLeft(topScrollbar.scrollLeft()),header.hasClass("bb-viewkeeper-fixed")&&header.scrollLeft(topScrollbar.scrollLeft())},$scope.locals.hasWaitAndEmpty=function(){return $scope.options&&$scope.options.loading&&(!$scope.options.data||$scope.options.data.length<1)},element.on("$destroy",function(){vkToolbars&&vkToolbars.destroy(),vkHeader&&vkHeader.destroy(),vkActionBarAndBackToTop&&vkActionBarAndBackToTop.destroy(),windowEl.off("resize."+windowEventId+", orientationchange."+windowEventId),fancyCheckOff(),bbMediaBreakpoints.unregister(mediaBreakpointHandler)})})},templateUrl:"sky/templates/grids/grid.html"}}])}(jQuery),function(){"use strict";function BBGridToolbar(bbResources,bbModal){return{require:"?^bbGrid",scope:{options:"=?bbToolbarOptions"},transclude:!0,link:function($scope,el,attr,bbGrid){function applySearchText(){var searchEl;searchEl=el.find(".bb-search-container input"),angular.isFunction(searchEl.select)&&searchEl.length>0&&$scope.searchText&&searchEl.eq(0).select(),$scope.options.searchText=$scope.searchText}function openColumnPicker(){bbModal.open({templateUrl:"sky/templates/grids/columnpicker.html",controller:"BBGridColumnPickerController",resolve:{columns:function(){return $scope.options.columns},selectedColumnIds:function(){return $scope.options.selectedColumnIds},columnPickerHelpKey:function(){return $scope.options.columnPickerHelpKey},listMode:function(){return $scope.options.columnPickerMode}}}).result.then(function(selectedColumnIds){$scope.options.selectedColumnIds=selectedColumnIds})}function toggleFilterMenu(isOpen){$scope.options&&$scope.options.hasInlineFilters?angular.isDefined(isOpen)?$scope.toolbarLocals.filtersVisible=isOpen:$scope.toolbarLocals.filtersVisible=!$scope.toolbarLocals.filtersVisible:null!==bbGrid&&angular.isFunction(bbGrid.toggleFilterMenu)&&bbGrid.toggleFilterMenu(isOpen)}function moveInlineFilters(){el.parents(".bb-grid-container").find(".bb-filters-inline").appendTo(el.find(".bb-grid-filter-inline-container"))}var topScrollbarEl=el.find(".bb-grid-top-scrollbar");$scope.toolbarLocals={applySearchText:applySearchText,openColumnPicker:openColumnPicker,toggleFilterMenu:toggleFilterMenu},$scope.resources=bbResources,null!==bbGrid&&angular.isUndefined($scope.options)&&$scope.$watch(function(){return bbGrid.scope.options},function(newValue){$scope.options=newValue}),$scope.$watch("options.selectedColumnIds",function(newValue){angular.isDefined(newValue)&&($scope.searchText=$scope.options.searchText,$scope.options.hasInlineFilters&&moveInlineFilters(),null!==bbGrid&&(bbGrid.applySearchText=applySearchText),angular.isFunction($scope.options.onAddClick)&&($scope.toolbarLocals.hasAdd=!0))},!0),$scope.$watch("options.filtersOpen",function(newValue){angular.isDefined(newValue)&&toggleFilterMenu(newValue)}),null!==bbGrid&&topScrollbarEl.on("scroll",function(){bbGrid.syncGridHeaderScrollToTopScrollbar()}),$scope.$on("$destroy",function(){null!==bbGrid&&topScrollbarEl.off()})},templateUrl:"sky/templates/grids/gridtoolbar.html"}}BBGridToolbar.$inject=["bbResources","bbModal"],angular.module("sky.grids.toolbar",["sky.resources","sky.modal","sky.grids.columnpicker"]).directive("bbGridToolbar",BBGridToolbar)}(),function(){"use strict";angular.module("sky.help",["ui.router"]).constant("bbHelpConfig",{onHelpLoaded:null,productId:"Sky",customLocales:[],url:null}).factory("bbHelp",["$q","$state","$window","bbHelpConfig",function($q,$state,$window,bbHelpConfig){function helpwidgetLoaded(){return!(!$window.BBHELP||!$window.BBHELP.HelpWidget)}function init(){var configOnHelpLoaded,deferred;if(!initPromise)if(deferred=$q.defer(),initPromise=deferred.promise,helpwidgetLoaded())deferred.resolve();else{if(!bbHelpConfig.url)throw initPromise=null,new Error("bbHelpConfig.url is not defined.");jQuery.ajax({cache:!0,dataType:"script",url:bbHelpConfig.url}).done(function(){var config=angular.extend({},bbHelpConfig);config.getCurrentHelpKey||(config.getCurrentHelpKey=function(){return $state.current.helpKeyOverride?$state.current.helpKeyOverride:$state.current.pageData?$state.current.pageData.helpKey:null}),configOnHelpLoaded=config.onHelpLoaded,config.onHelpLoaded=function(){angular.isFunction(configOnHelpLoaded)&&configOnHelpLoaded.apply(this,arguments),deferred.resolve()},$window.BBHELP.HelpWidget.load(config)})}return initPromise}function open(){var args=arguments;init().then(function(){$window.BBHELP.HelpWidget.open.apply($window.BBHELP.HelpWidget,args)})}function close(){helpwidgetLoaded()&&$window.BBHELP.HelpWidget.close.apply($window.BBHELP.HelpWidget,arguments)}var initPromise;return{init:init,open:open,close:close}}])}(),function(){"use strict";angular.module("sky.helpbutton",["sky.help"]).directive("bbHelpButton",["$state","$window","bbHelp",function($state,$window,bbHelp){function link(scope,el,attrs){var oldHelpKeyOverride;el.addClass("bb-helpbutton fa fa-question-circle close"),attrs.bbSetHelpKeyOverride&&"true"===attrs.bbSetHelpKeyOverride.toLowerCase()&&(oldHelpKeyOverride=$state.current.helpKeyOverride,$state.current.helpKeyOverride=attrs.bbHelpKey,el.on("remove",function(){$state.current.helpKeyOverride=oldHelpKeyOverride})),el.click(function(){bbHelp.open(attrs.bbHelpKey)})}return{link:link}}])}(),function(){"use strict";angular.module("sky.highlight",[]).factory("bbHighlight",function(){function highlight(el,pat,classn){function innerHighlight(node,pat){var pos,spannode,middlebit,i,middleclone,skip=0;if(classn=classn||DEFAULT_CLASS_NAME,el.data(DATA_CLASS_NAME,classn),3===node.nodeType)pos=node.data.toUpperCase().indexOf(pat),pos>=0&&(spannode=document.createElement("span"),spannode.className=String(classn),middlebit=node.splitText(pos),middlebit.splitText(pat.length),middleclone=middlebit.cloneNode(!0),spannode.appendChild(middleclone),middlebit.parentNode.replaceChild(spannode,middlebit),skip=1);else if(1===node.nodeType&&node.childNodes&&!/(script|style)/i.test(node.tagName))for(i=0;i<node.childNodes.length;++i)i+=innerHighlight(node.childNodes[i],pat);return skip}return el.length&&pat&&pat.length?el.each(function(){innerHighlight(this,pat.toUpperCase())}):el}function removeHighlight(el){var classn=el.data(DATA_CLASS_NAME)||DEFAULT_CLASS_NAME;return el.find("span."+classn).each(function(){var parentNode=this.parentNode;parentNode.replaceChild(this.firstChild,this),parentNode.normalize()}).end()}var DATA_CLASS_NAME="bb-hightlight-class",DEFAULT_CLASS_NAME="highlight";return highlight.clear=removeHighlight,highlight}).directive("bbHighlight",["bbHighlight",function(bbHighlight){return{link:function(scope,el,attrs){function highlight(){var highlightText=scope.$eval(attrs.bbHighlight);bbHighlight.clear(el),highlightText&&bbHighlight(el,highlightText)}scope.$watch(attrs.bbHighlight,function(){highlight()}),attrs.bbHighlightBeacon&&scope.$watch(attrs.bbHighlightBeacon,function(newValue,oldValue){newValue!==oldValue&&scope.$evalAsync(highlight)},!0),attrs.ngBind&&scope.$watch(attrs.ngBind,function(newValue,oldValue){newValue!==oldValue&&highlight()})},priority:1,restrict:"A"}}])}(),function(){"use strict";function runRegisterEnquire($window,$timeout){function registerEnquire(enquire){function updateStatus(newSize){var handler,i;for(bp.xs=bp.sm=bp.md=bp.lg=!1,bp[newSize]=!0,i=0;i<handlers.length;i+=1)handler=handlers[i],handler&&handler(bp);$timeout(angular.noop)}function registerQuery(name){angular.isDefined(enquire.queries[mediaQueries[name]])||enquire.register(mediaQueries[name],function(){updateStatus(name)})}var p,mediaQueries=mediaBreakpointsConfig.mediaQueries;for(p in mediaQueries)mediaQueries.hasOwnProperty(p)&&registerQuery(p)}"function"==typeof define&&define.amd?require(["enquire"],registerEnquire):$window.enquire&&registerEnquire(enquire)}var mediaBreakpoints,mediaBreakpointsConfig={mediaQueries:{xs:"(max-width: 767px)",sm:"(min-width: 768px) and (max-width: 991px)",md:"(min-width: 992px) and (max-width: 1199px)",lg:"(min-width: 1200px)"}},bp={},handlers=[];runRegisterEnquire.$inject=["$window","$timeout"],mediaBreakpoints={register:function(callback){handlers.push(callback),callback(bp)},unregister:function(callback){var i;for(i=0;i<handlers.length;i+=1)if(handlers[i]===callback){handlers.splice(i,1);break}},getCurrent:function(){return bp}},angular.module("sky.mediabreakpoints",[]).constant("bbMediaBreakpointsConfig",mediaBreakpointsConfig).run(runRegisterEnquire).factory("bbMediaBreakpoints",[function(){return mediaBreakpoints}])}(),function($){"use strict";var openModalCount=0;angular.module("sky.modal",["sky.helpbutton","sky.resources","ui.bootstrap"]).factory("bbModal",["$uibModal","$window",function($uibModal,$window){return{open:function(opts){function modalClosed(){openModalCount--,isIOS&&bodyEl.removeClass("bb-modal-open-mobile").scrollTop(scrollTop),bodyEl=null}var bodyEl,isIOS,modalInstance,scrollTop;return isIOS=/iPad|iPod|iPhone/i.test($window.navigator.userAgent),bodyEl=$(document.body),opts=angular.extend({backdrop:"static",windowClass:"bb-modal"},opts),isIOS&&(scrollTop=bodyEl.scrollTop(),bodyEl.addClass("bb-modal-open-mobile")),modalInstance=$uibModal.open(opts),openModalCount++,modalInstance.result.then(modalClosed,modalClosed),modalInstance}}}]).directive("bbModal",["$timeout",function($timeout){function getPixelValue(val){return val=val||"0",parseFloat(val.replace("px",""))}function getModalBodyWrapperMargin(el){for(var margin=0;el.not(".modal-dialog")&&el.length>0;)margin+=el.outerHeight()-el.height(),el=el.parent();return margin}return{controller:["$scope",function($scope){this.setBodyEl=function(bodyEl){$scope.bodyEl=bodyEl}}],replace:!0,transclude:!0,restrict:"E",templateUrl:"sky/templates/modal/modal.html",link:function($scope,el){function fitToWindow(){var margin,modalParentEl,newMaxHeight,reservedHeight;bodyEl&&bodyEl.length>0&&(modalParentEl=el.parents(".modal-dialog"),modalParentEl.length>0&&(margin=getPixelValue(modalParentEl.css("margin-bottom"))+getPixelValue(modalParentEl.css("margin-top")),reservedHeight=margin+el.find(".modal-header").outerHeight()+el.find(".modal-footer").outerHeight(),reservedHeight+=getModalBodyWrapperMargin(el),newMaxHeight=windowEl.height()-reservedHeight,bodyEl.css("max-height",newMaxHeight)))}var bodyEl,resizeTimeout,windowEl=$(window);$scope.$watch("bodyEl",function(newValue){bodyEl=newValue,fitToWindow()}),$timeout(function(){fitToWindow()},0),windowEl.on("resize.bbModal"+$scope.$id,function(){$timeout.cancel(resizeTimeout),resizeTimeout=$timeout(function(){fitToWindow()},250)}),el.on("$destroy",function(){windowEl.off(".bbModal"+$scope.$id)})}}}]).directive("bbModalBody",function(){return{link:function(scope,el,attrs,modalCtrl){el.addClass("modal-body container-fluid"),modalCtrl.setBodyEl(el)},require:"^bbModal",restrict:"A"}}).directive("bbModalHeader",function(){return{controller:angular.noop,replace:!0,transclude:!0,require:"^bbModal",restrict:"E",templateUrl:"sky/templates/modal/modalheader.html",scope:{bbModalHelpKey:"="}}}).directive("bbModalFooter",function(){return{controller:angular.noop,replace:!0,transclude:!0,require:"^bbModal",restrict:"E",templateUrl:"sky/templates/modal/modalfooter.html"}}).directive("bbModalFooterButton",function(){return{replace:!0,transclude:!0,require:"^bbModalFooter",restrict:"E",templateUrl:"sky/templates/modal/modalfooterbutton.html"}}).directive("bbModalFooterButtonPrimary",["bbResources",function(bbResources){return{replace:!0,transclude:!0,require:"^bbModalFooter",restrict:"E",templateUrl:"sky/templates/modal/modalfooterbuttonprimary.html",link:function($scope,el){0===el.children().length&&el.append("<span>"+bbResources.modal_footer_primary_button+"</span>")}}}]).directive("bbModalFooterButtonCancel",["bbResources",function(bbResources){return{replace:!0,transclude:!0,require:"^bbModalFooter",restrict:"E",templateUrl:"sky/templates/modal/modalfooterbuttoncancel.html",link:function($scope,el){0===el.children().length&&el.append("<span>"+bbResources.modal_footer_cancel_button+"</span>")}}}])}(jQuery),function(){"use strict";function bbMoment($window){return $window.moment}function runRegisterMoment($window){function registerMoment(moment){$window.moment=moment}angular.isUndefined($window.moment)&&"function"==typeof define&&define.amd&&require(["moment"],registerMoment)}bbMoment.$inject=["$window"],runRegisterMoment.$inject=["$window"],angular.module("sky.moment",[]).run(runRegisterMoment).factory("bbMoment",bbMoment)}(),function($){"use strict";function toggleOpen(el,action){$(el)[action+"Class"]("open")}angular.module("sky.navbar",[]).directive("bbNavbar",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"sky/templates/navbar/navbar.html",link:function(scope,el){$(el).on("mouseenter",".dropdown",function(){toggleOpen(this,"add")}).on("mouseleave",".dropdown",function(){toggleOpen(this,"remove")}).on("click",".dropdown-menu a",function(){toggleOpen($(".dropdown",el),"remove")})}}})}(jQuery),function($){"use strict";angular.module("sky.omnibar",[]).constant("bbOmnibarConfig",{appLookupUrl:"",enableHelp:!1,enableSearch:!1,productId:"Sky",searchPlaceholder:"Search",serviceName:"Sky",signOutUrl:"",tenantId:"",url:"https://signin.blackbaud.com/omnibar.min.js"}).directive("bbOmnibar",["$window","bbOmnibarConfig",function($window,bbOmnibarConfig){return{transclude:!0,template:'<div class="bb-omnibar-wrap"></div><div class="bb-omnibar-menu-wrap" ng-transclude></div>',link:function(scope,el){function afterLoad(){var searchValue,searchBox=omnibarEl.find(".searchbox"),searchContainer=omnibarEl.find(".searchContainer");el.children(".bb-omnibar-menu-wrap").remove(),0===omnibarEl.find(".mobile .productmenucontainer").length&&$(".bb-navbar").addClass("bb-navbar-showmobile"),searchBox.attr("placeholder",bbOmnibarConfig.searchPlaceholder),scope.searchBox=searchBox,searchBox.on("keyup",function(event){var value=searchBox.val();value!==searchValue&&(searchValue=value,scope.searchText=value,scope.$apply()),scope.$emit("searchBoxKeyUp",event.keyCode)}),scope.$watch("searching",function(searching){searching?searchContainer.addClass("searching"):searchContainer.removeClass("searching")}),scope.$watch("searchText",function(searchText){searchText=searchText||"",searchText!==searchBox.val()&&(searchValue=searchText,searchBox.val(searchText))}),scope.$apply(),angular.isFunction(bbOmnibarConfig.afterLoad)&&bbOmnibarConfig.afterLoad.apply(this,arguments)}function userLoaded(userData){var omnibarIndicatesNullUserTime;if(userData.id!==bbOmnibarConfig.authenticationUserId&&bbOmnibarConfig.signOutUrl){if(null===userData.id){if(!$window.localStorage)return;if(omnibarIndicatesNullUserTime=$window.localStorage.omnibarIndicatesNullUserTime,omnibarIndicatesNullUserTime&&(new Date-Date.parse(omnibarIndicatesNullUserTime))/1e3<=10)return;try{$window.localStorage.omnibarIndicatesNullUserTime=(new Date).toString()}catch(e){return}}$window.location.href=bbOmnibarConfig.signOutUrl}angular.isFunction(bbOmnibarConfig.userLoaded)&&bbOmnibarConfig.userLoaded.apply(this,arguments)}var omnibarEl=el.children(".bb-omnibar-wrap"),omnibarMenuEl=el.find(".bb-omnibar-menu-wrap .bb-omnibar-menu");$.ajax({cache:!0,dataType:"script",url:bbOmnibarConfig.url}).done(function(){var loadOptions=angular.extend({},bbOmnibarConfig,{afterLoad:afterLoad,userLoaded:userLoaded,menuEl:omnibarMenuEl});$window.BBAUTH.Omnibar.load(omnibarEl,loadOptions)})}}}]).directive("bbOmnibarMenu",function(){return{replace:!0,require:"^bbOmnibar",restrict:"E",transclude:!0,template:'<div class="bb-omnibar-menu" ng-transclude></div>'}})}(jQuery),function(){"use strict";angular.module("sky.page",[]).constant("bbPageConfig",{redirectUrl:null,notFoundUrl:null}).factory("bbPage",[function(){var pageStatuses;return pageStatuses={LOADING:0,LOADED:1,NOT_AUTHORIZED:2,NOT_FOUND:4},{pageStatuses:pageStatuses}}]).directive("bbPage",["$window","bbResources","bbPage","bbPageConfig","bbData","$location",function($window,bbResources,bbPage,bbPageConfig,bbData,$location){function link(scope,element){function navigateAway(){$window.location.href=bbPageConfig.redirectUrl||$window.location.origin}function noPageStatusSpecified(){return void 0===element.attr("bb-page-status")}function onShowing(){scope.bbPageUsesLoadManager&&(loadManager=locals.loadManager=bbData.loadManager({scope:scope,waitForFirstItem:!0,nonblockWaitForAdditionalItems:!0,isAggregate:!0}))}var loadManager,locals;locals=scope.locals={navigateAway:navigateAway,noPageStatusSpecified:noPageStatusSpecified,pageStatuses:bbPage.pageStatuses,onShowing:onShowing},scope.resources=bbResources,scope.$watch("bbPageStatus",function(value,oldValue){scope.value="something",scope.oldValue=oldValue,value?value&&!oldValue&&scope.$emit("bbEndWait"):scope.$emit("bbBeginWait"),value===locals.pageStatuses.NOT_AUTHORIZED?loadManager&&loadManager.cancelWaiting():value===locals.pageStatuses.NOT_FOUND&&(loadManager&&loadManager.cancelWaiting(),$location.path(bbPageConfig.notFoundUrl).replace())})}return{restrict:"E",scope:{bbPageStatus:"=?",bbPageUsesLoadManager:"@?"},templateUrl:"sky/templates/page/page.html",transclude:!0,link:link}}])}(),function(){"use strict";function makePageSummaryComponent(component){function Controller($scope){var vm=this;$scope.$on("$destroy",function(){vm.onDestroy(),vm=null})}function componentFn(){function link(scope,el,attrs,ctrls){var vm=ctrls[0],bbPageSummary=ctrls[1];vm.el=el,bbPageSummary["set"+name](vm)}return{restrict:"E",require:["bbPageSummary"+name,"^bbPageSummary"],controller:controllerName,controllerAs:"bbPageSummary"+name,bindToController:!0,link:link,scope:{}}}var controllerName,name=component.name;Controller.$inject=["$scope"],controllerName="BBPageSummary"+name+"Controller",pageSummaryModule.controller(controllerName,Controller).directive("bbPageSummary"+name,componentFn)}function getCtrlPropName(component){var name=component.name;return name.charAt(0).toLowerCase()+name.substr(1)+"Ctrl"}function BBPageSummaryController(){function addComponentSetter(component){var name=component.name;vm["set"+name]=function(ctrl){var propName=getCtrlPropName(component);vm[propName]=ctrl,ctrl.onDestroy=function(){vm[propName]=null}}}var vm=this;components.forEach(addComponentSetter),vm.getPageSummaryLeftCls=function(){return{"col-sm-9":!!vm.keyInfoCtrl}}}function bbPageSummary(bbMediaBreakpoints){function link(scope,el,attrs,vm){function watchForComponent(component){scope.$watch(function(){return vm[getCtrlPropName(component)]},function(newValue){newValue&&el.find(".bb-page-summary-"+component.cls).empty().append(newValue.el)})}function mediaBreakpointHandler(breakpoint){var toEl,keyInfoEl=el.find(".bb-page-summary-key-info");toEl=breakpoint.xs?el.find(".bb-page-summary-key-info-xs"):el.find(".bb-page-summary-key-info-sm"),keyInfoEl.parent().is(toEl)||toEl.append(keyInfoEl)}components.forEach(watchForComponent),bbMediaBreakpoints.register(mediaBreakpointHandler),scope.$on("$destroy",function(){bbMediaBreakpoints.unregister(mediaBreakpointHandler)})}return{restrict:"E",controller:"BBPageSummaryController",controllerAs:"bbPageSummary",bindToController:!0,link:link,scope:{},templateUrl:"sky/templates/pagesummary/pagesummary.directive.html",transclude:!0}}var components=[{name:"Alert",cls:"alert"},{name:"Content",cls:"content"},{name:"KeyInfo",cls:"key-info"},{name:"Image",cls:"image"},{name:"Status",cls:"status"},{name:"Title",cls:"title"},{name:"Subtitle",cls:"subtitle"},{name:"ActionBar",cls:"action-bar"}],pageSummaryModule=angular.module("sky.pagesummary");bbPageSummary.$inject=["bbMediaBreakpoints"],pageSummaryModule.controller("BBPageSummaryController",BBPageSummaryController).directive("bbPageSummary",bbPageSummary),components.forEach(makePageSummaryComponent)}(),function(){"use strict";var evtNsPos=0;angular.module("sky.pagination",["ui.bootstrap.pagination"]).config(["uibPaginationConfig",function(paginationConfig){paginationConfig.maxSize=4,paginationConfig.itemsPerPage=5,paginationConfig.nextText=paginationConfig.previousText=""}]).factory("bbPaging",function(){return{init:function(sourceData,config){function setPageData(){var startingIndex,currentPage;!paging.disabled&&sourceData&&(currentPage=paging.currentPage-1,startingIndex=currentPage*paging.itemsPerPage,paging.items=sourceData.slice(startingIndex,startingIndex+paging.itemsPerPage))}var paging;return paging={currentPage:1,itemsPerPage:5,totalItems:sourceData?sourceData.length:0,pageChanged:setPageData},angular.extend(paging,config),setPageData(),paging}}}).directive("bbPagination",function(){return{restrict:"A",scope:{paginationDisabled:"=bbPaginationDisabled"},compile:function(el,attrs){var pagedData=attrs.bbPagination;return el.html('<uib-pagination ng-show="'+pagedData+".totalItems > "+pagedData+'.itemsPerPage" total-items="'+pagedData+'.totalItems" ng-model="'+pagedData+'.currentPage" ng-change="'+pagedData+'.pageChanged()" items-per-page="'+pagedData+'.itemsPerPage"></uib-pagination><div class="clearfix"></div>'),function(scope,el){scope.$watch("paginationDisabled",function(newValue){var paginationDummyEl,paginationEl;angular.isDefined(newValue)&&(paginationEl=el.find(".pagination"),newValue?(paginationDummyEl=paginationEl.clone().addClass("bb-pagination-dummy"),paginationEl.before(paginationDummyEl).hide(),paginationDummyEl.find("li").addClass("disabled")):(el.find(".bb-pagination-dummy").remove(),paginationEl.show()))})}}}}).directive("bbPaginationContent",["$timeout","$window","$animate",function($timeout,$window,$animate){return{link:function(scope,el){function removeWindowResizeHandler(){angular.element($window).off("."+evtNs)}var evtNs;evtNsPos+=1,evtNs="bbPaginationContent"+evtNsPos,scope.$watch("pagedData",function(){function setMinHeight(){$timeout(function(){function changePage(pageNumber){$animate.enabled(!1,el),pagedData.currentPage=pageNumber,pagedData.pageChanged(),scope.$apply(),$animate.enabled(!0,el)}var currentPage,placeholder,i,maxHeight=0;for(el.addClass("bb-pagination-content bb-pagination-content-calculating"),placeholder=angular.element('<div class="bb-pagination-placeholder"></div>'),el.after(placeholder),angular.element("body").prepend(el),currentPage=pagedData.currentPage,el.css("min-height",0),i=1;pageCount>=i;i+=1)changePage(i),maxHeight=Math.max(el.height(),maxHeight);el.css("min-height",maxHeight),changePage(currentPage),placeholder.after(el),placeholder.remove(),el.removeClass("bb-pagination-content-calculating")})}var pageCount,pagedData,windowResizeTimeout;pagedData=scope.pagedData,angular.isDefined(scope.pagedData)&&(pageCount=Math.ceil(pagedData.totalItems/(pagedData.itemsPerPage||1)),pageCount>1&&(setMinHeight(),removeWindowResizeHandler(),angular.element($window).on("resize."+evtNs,function(){windowResizeTimeout&&$timeout.cancel(windowResizeTimeout),windowResizeTimeout=$timeout(setMinHeight,500)}),el.on("$destroy",removeWindowResizeHandler)))})},scope:{pagedData:"=bbPaginationContent"}}}])}(),function(){"use strict";var bbPaletteConfig;bbPaletteConfig={multi:["#1f91da","#f9b66d","#1dc8a6","#9176c6","#28d7d9","#ef6977","#919191","#7ec2ed","#fbcf9f","#75ebd3","#beaedd","#85e8ea","#f59ca6","#afafaf"],mono:["#156395","#1c84c6","#44a6e5","#83c4ed","#c1e1f6"]},angular.module("sky.palette.config",[]).constant("bbPaletteConfig",bbPaletteConfig)}(),function(){"use strict";angular.module("sky.palette",["sky.palette.config"]).factory("bbPalette",["bbPaletteConfig",function(bbPaletteConfig){function getPaletteByType(paletteType){return bbPaletteConfig[paletteType||"multi"]}return{getColorByIndex:function(index,paletteType){var palette=getPaletteByType(paletteType);return palette[index%palette.length]},getColorSequence:function(requestedLength,paletteType){var i,paletteLength,palette=getPaletteByType(paletteType),r=[];for(paletteLength=palette.length,requestedLength=requestedLength||paletteLength,i=0;requestedLength>i;i++)r.push(palette[i%paletteLength]);return r}}}])}(),function($){"use strict";function bbPopoverTemplate($compile){return{restrict:"A",scope:!0,link:function($scope,el){var bbPopoverOpenAttr="bbPopoverOpen"+$scope.$id;el.attr("bb-uib-popover-template")||el.attr("bb-uib-popover-template","'"+el.attr("bb-popover-template")+"'"),el.attr("popover-is-open")||el.attr("popover-is-open",bbPopoverOpenAttr),$scope.bbPopoverAttr=el.attr("popover-is-open"),el.removeAttr("bb-popover-template"),$compile(el)($scope)}}}function bbUibPopoverTemplate($uibTooltip){var tooltip=$uibTooltip("bbUibPopoverTemplate","popover","click",{useContentExp:!0});return tooltip}function bbUibPopoverTemplatePopup($window,$parse){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},link:function($scope,el){function closePopover(){angular.isDefined(origScope.$eval(popoverIsOpenAttr))&&$parse(popoverIsOpenAttr).assign(origScope,!1)}var popoverIsOpenAttr,origScope=$scope.originScope(),windowEl=$($window),scopeId=$scope.$id;popoverIsOpenAttr=origScope.bbPopoverAttr,origScope.hide=function(){closePopover()},$scope.$watch("isOpen()",function(value){value&&windowEl.on("click.popover"+scopeId,function(event){!el.is(event.target)&&0===el.has(event.target).length&&$scope.isOpen&&$scope.$apply(function(){closePopover()})})}),$scope.$on("$destroy",function(){windowEl.off("click.popover"+scopeId)})},templateUrl:"sky/templates/popover/popup.html"}}bbPopoverTemplate.$inject=["$compile"],bbUibPopoverTemplate.$inject=["$uibTooltip"],bbUibPopoverTemplatePopup.$inject=["$window","$parse"],angular.module("sky.popover",["ui.bootstrap.tooltip"]).directive("bbUibPopoverTemplatePopup",bbUibPopoverTemplatePopup).directive("bbUibPopoverTemplate",bbUibPopoverTemplate).directive("bbPopoverTemplate",bbPopoverTemplate)}(jQuery),function($){"use strict";function bbReorder($filter,$timeout){function applyNumberFormatting(index){return $filter("bbAutonumeric")(index,bbAutonumericConfig)}function setPositionNumberText(item,index){$(item).find(".bb-reorder-list-sorting-number").text(applyNumberFormatting(index))}function setPositionNumbers(incrementStep,siblingTraversalFunc,displayIndex,placeholder,item){var curSibling;for(setPositionNumberText(item,displayIndex),curSibling=siblingTraversalFunc.call(placeholder).not(item);curSibling.length>0;)displayIndex+=incrementStep,setPositionNumberText(curSibling,displayIndex),curSibling=siblingTraversalFunc.call(curSibling).not(item)}function link(scope,el,attrs,vm){var sortableOptions,originalSortItemIndex,currentSortItemIndex,currentRepeaterItems,finalIndex=-1;vm.sorting=!1,vm.pushToTop=function(item){var toTheTopEl,index,toTheTopElOffset,animateCloneEl;index=vm.bbReorderItems.indexOf(item),el.sortable("disable"),toTheTopEl=$(el.children()[index]),toTheTopElOffset=toTheTopEl.position(),animateCloneEl=toTheTopEl.clone(),animateCloneEl.addClass("bb-reorder-animate-element"),animateCloneEl.css({top:toTheTopElOffset.top+"px",left:toTheTopElOffset.left+"px",width:toTheTopEl.outerWidth()+"px"}),el.append(animateCloneEl),toTheTopEl.addClass("bb-reorder-list-row-placeholder"),$(animateCloneEl).fadeOut({duration:500,queue:!1,always:function(){toTheTopEl.removeClass("bb-reorder-list-row-placeholder"),animateCloneEl.remove(),el.sortable("enable"),scope.$apply(function(){vm.bbReorderItems.splice(0,0,vm.bbReorderItems.splice(index,1)[0])})}})},sortableOptions={placeholder:"bb-reorder-list-row-placeholder",axis:"y",start:function(e,ui){scope.$apply(function(){vm.sorting=!0}),currentRepeaterItems=el.contents().not(ui.placeholder),ui.item.addClass("bb-reorder-list-sorting-item"),originalSortItemIndex=ui.item.index(),currentSortItemIndex=originalSortItemIndex,ui.placeholder.height(ui.item.outerHeight()),$.each(el.children(".bb-reorder-list-row"),function(i,item){setPositionNumberText(item,i+1)})},stop:function(e,ui){currentRepeaterItems.appendTo(el),ui.item.removeClass("bb-reorder-list-sorting-item"),finalIndex>=0&&finalIndex!==originalSortItemIndex&&scope.$apply(function(){vm.bbReorderItems.splice(finalIndex,0,vm.bbReorderItems.splice(originalSortItemIndex,1)[0])}),scope.$apply(function(){vm.sorting=!1}),originalSortItemIndex=null,currentSortItemIndex=null,finalIndex=-1,currentRepeaterItems=null,$timeout(function(){el.children().removeClass("bb-reorder-list-no-animate")})},update:function(e,ui){finalIndex=ui.item.index(),el.children().addClass("bb-reorder-list-no-animate"),el.sortable("cancel")},change:function(e,ui){var displayIndex,newIndex;newIndex=ui.item.siblings().index(ui.placeholder),newIndex!==currentSortItemIndex&&(displayIndex=newIndex+1,newIndex>currentSortItemIndex?setPositionNumbers(-1,$.fn.prev,displayIndex,ui.placeholder,ui.item):setPositionNumbers(1,$.fn.next,displayIndex,ui.placeholder,ui.item),currentSortItemIndex=newIndex)}},el.sortable(sortableOptions)}var bbAutonumericConfig={mDec:0};return{replace:!0,restrict:"E",scope:{},bindToController:{bbReorderItems:"="},controller:angular.noop,controllerAs:"bbReorder",templateUrl:"sky/templates/reorder/reorder.directive.html",link:link}}bbReorder.$inject=["$filter","$timeout"],angular.module("sky.reorder.directive",["sky.resources","sky.autonumeric","ngAnimate"]).directive("bbReorder",bbReorder)}(jQuery),function(){"use strict";function BBRepeaterController($scope){function expandModeIsMultiple(){return"multiple"===vm.bbRepeaterExpandMode}function expandModeIsSingle(){return"single"===vm.bbRepeaterExpandMode}function expandModeIsNone(){return!expandModeIsMultiple()&&!expandModeIsSingle()}function updateForExpandMode(){var foundExpanded,isCollapsible=!expandModeIsNone(),isSingle=expandModeIsSingle();items.forEach(function(item){item.isCollapsible=isCollapsible,isSingle&&item.bbRepeaterItemExpanded&&(foundExpanded&&(item.bbRepeaterItemExpanded=!1),foundExpanded=!0)})}var items=[],vm=this;vm.addItem=function(item){items.push(item)},vm.removeItem=function(item){var itemIndex=items.indexOf(item);itemIndex>=0&&items.splice(itemIndex,1)},vm.itemExpanded=function(expandedItem){"single"===vm.bbRepeaterExpandMode&&items.forEach(function(item){item!==expandedItem&&(item.bbRepeaterItemExpanded=!1)})},$scope.$watch(function(){return vm.bbRepeaterExpandMode},updateForExpandMode),$scope.$watchCollection(function(){return items},function(){updateForExpandMode()})}BBRepeaterController.$inject=["$scope"],angular.module("sky.repeater.controller",[]).controller("BBRepeaterController",BBRepeaterController)}(),function(){"use strict";function bbRepeater(){function link(){}return{scope:{},bindToController:{bbRepeaterExpandMode:"@?"},controller:"BBRepeaterController",controllerAs:"bbRepeater",link:link,templateUrl:"sky/templates/repeater/repeater.directive.html",transclude:!0}}angular.module("sky.repeater.directive",["sky.repeater.controller"]).directive("bbRepeater",bbRepeater)}(),function(){"use strict";function makeComponent(component){function Controller($scope){var vm=this;$scope.$on("$destroy",function(){vm.onDestroy(),vm=null})}function componentFn(){function link(scope,el,attrs,ctrls){var vm=ctrls[0],bbRepeaterItem=ctrls[1];vm.el=el,bbRepeaterItem["set"+name](vm)}return{restrict:"E",require:["bbRepeaterItem"+name,"^bbRepeaterItem"],controller:controllerName,controllerAs:"bbRepeaterItem"+name,bindToController:!0,link:link,scope:{}}}var controllerName,name=component.name;Controller.$inject=["$scope"],controllerName="BBRepeaterItem"+name+"Controller",repeaterItemModule.controller(controllerName,Controller).directive("bbRepeaterItem"+name,componentFn)}function getCtrlPropName(component){var name=component.name;return name.charAt(0).toLowerCase()+name.substr(1)+"Ctrl"}function bbRepeaterItem($timeout){function BBRepeaterItemController(){function addComponentSetter(component){var name=component.name;vm["set"+name]=function(ctrl){var propName=getCtrlPropName(component);vm[propName]=ctrl,ctrl.onDestroy=function(){vm[propName]=null}}}function allowCollapse(){return vm.isCollapsible&&vm.titleCtrl}var vm=this;vm.getCls=function(){var cls=[];return allowCollapse()&&cls.push("bb-repeater-item-collapsible"),
vm.contextMenuCtrl&&cls.push("bb-repeater-item-with-context-menu"),cls},vm.allowCollapse=allowCollapse,components.forEach(addComponentSetter)}function link(scope,el,attrs,ctrls){function watchForComponent(component){scope.$watch(function(){return vm[getCtrlPropName(component)]},function(newValue){newValue&&el.find(".bb-repeater-item-"+component.cls).empty().append(newValue.el)})}function getContentEl(){return el.find(".bb-repeater-item-content")}function updateForExpandedState(){var method,animate=animateEnabled,contentEl=getContentEl();angular.isDefined(vm.bbRepeaterItemExpanded)||(vm.bbRepeaterItemExpanded=!1,animate=!1),method=vm.bbRepeaterItemExpanded||!vm.allowCollapse()?"slideDown":"slideUp",contentEl[method]({duration:animate?250:0}),vm.bbRepeaterItemExpanded&&vm.bbRepeater.itemExpanded(vm)}function syncChevronWithExpanded(){vm.chevronDirection=vm.bbRepeaterItemExpanded?"up":"down"}var animateEnabled,bbRepeater=ctrls[1],vm=ctrls[0];vm.bbRepeater=bbRepeater,syncChevronWithExpanded(),vm.headerClick=function(){vm.isCollapsible&&(vm.bbRepeaterItemExpanded=!vm.bbRepeaterItemExpanded)},components.forEach(watchForComponent),scope.$watch(function(){return vm.isCollapsible},function(newValue){newValue===!1&&(vm.bbRepeaterItemExpanded=!0)}),scope.$watch(function(){return vm.bbRepeaterItemExpanded},function(){syncChevronWithExpanded(),updateForExpandedState()}),scope.$watch(function(){return vm.titleCtrl},updateForExpandedState),scope.$watch(function(){return vm.chevronDirection},function(){vm.isCollapsible&&(vm.bbRepeaterItemExpanded="down"!==vm.chevronDirection)}),bbRepeater.addItem(vm),scope.$on("$destroy",function(){bbRepeater.removeItem(vm),vm=null}),$timeout(function(){animateEnabled=!0})}return{bindToController:{bbRepeaterItemExpanded:"=?"},controller:BBRepeaterItemController,controllerAs:"bbRepeaterItem",link:link,require:["bbRepeaterItem","^bbRepeater"],scope:{},templateUrl:"sky/templates/repeater/repeater.item.directive.html",transclude:!0}}var repeaterItemModule,components=[{name:"ContextMenu",cls:"context-menu"},{name:"Title",cls:"title"}];bbRepeaterItem.$inject=["$timeout"],repeaterItemModule=angular.module("sky.repeater.item.directive",["sky.chevron","sky.resources"]),repeaterItemModule.directive("bbRepeaterItem",bbRepeaterItem),components.forEach(makeComponent)}(),function(){"use strict";function bbResoucesFilter(bbResources){return function(name){return bbResources[name]}}var serviceModules=[];bbResoucesFilter.$inject=["bbResources"],angular.module("sky.resources",serviceModules).constant("bbResources",{}).filter("bbResources",bbResoucesFilter)}(),function(){"use strict";var CLS_HIGHLIGHTING="bb-scroll-into-view-highlighting",RETRY_INTERVAL=100,RETRY_MAX=10;angular.module("sky.scrollintoview",[]).constant("bbScrollIntoViewConfig",{reservedBottom:0,reservedTop:0}).factory("bbScrollIntoView",["$window","bbScrollIntoViewConfig",function($window,bbScrollIntoViewConfig){function highlightEl(el,options){options.highlight&&el.addClass(CLS_HIGHLIGHTING).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){el.removeClass(CLS_HIGHLIGHTING)})}function getScrollableParentEl(el){for(var overflowY,parentEl=el.parent();parentEl.length>0;){if(parentEl.is("body"))return parentEl;if(overflowY=parentEl.css("overflow-y"),angular.isString(overflowY))switch(overflowY.toUpperCase()){case"AUTO":case"HIDDEN":case"SCROLL":return parentEl}parentEl=parentEl.parent()}}function getHtmlOrBodyScrollTop(){return angular.element("html").scrollTop()||angular.element("body").scrollTop()}function scrollIntoView(el,options){var currentScrollTop,elBottom,elHeight,elOffset,elTop,elToScroll,isScrolledOffBottom,isScrolledOffTop,newScrollTop,parentEl,parentElIsBody,parentHeight,reservedBottom,reservedTop,viewportHeight;parentEl=getScrollableParentEl(el),parentElIsBody=parentEl.is("body"),options=options||{},reservedBottom=options.reservedBottom,reservedTop=options.reservedTop,angular.isDefined(reservedBottom)||(reservedBottom=0,parentElIsBody&&(reservedBottom=bbScrollIntoViewConfig.reservedBottom||0)),angular.isDefined(reservedTop)||(reservedTop=0,parentElIsBody&&(reservedTop=bbScrollIntoViewConfig.reservedTop||0)),options.highlight&&(reservedBottom+=50,reservedTop+=50),currentScrollTop=parentElIsBody?getHtmlOrBodyScrollTop():parentEl.scrollTop(),elOffset=el.offset(),elHeight=el.outerHeight(),elTop=elOffset.top,parentElIsBody||(elTop=elTop-parentEl.offset().top+currentScrollTop),elBottom=elTop+elHeight,parentHeight=parentElIsBody?angular.element(window).height():parentEl.height(),isScrolledOffBottom=elBottom>parentHeight+(currentScrollTop-reservedBottom),isScrolledOffTop=currentScrollTop+reservedTop>elTop,isScrolledOffBottom||isScrolledOffTop?(isScrolledOffBottom&&(newScrollTop=elBottom-(parentHeight-reservedBottom)),viewportHeight=parentHeight-(reservedTop+reservedBottom),(!isScrolledOffBottom||elHeight>viewportHeight)&&(newScrollTop=elTop-reservedTop),elToScroll=parentElIsBody?angular.element("html, body"):parentEl,elToScroll.animate({scrollTop:Math.round(newScrollTop)},{duration:250,always:function(){highlightEl(el,options)}})):highlightEl(el,options)}return scrollIntoView}]).directive("bbScrollIntoView",["$timeout","bbScrollIntoViewConfig","bbScrollIntoView",function($timeout,bbScrollIntoViewConfig,bbScrollIntoView){function link(scope,el,attrs){function doScroll(firstTry){previousTimeout&&$timeout.cancel(previousTimeout),firstTry&&(retryCount=0),el.is(":visible")&&0===el.children(".collapsing").length?(options=angular.extend({},bbScrollIntoViewConfig),attrs.bbScrollIntoViewHighlight&&(options.highlight=scope.$eval(attrs.bbScrollIntoViewHighlight)),bbScrollIntoView(el,options)):RETRY_MAX>retryCount&&(retryCount++,previousTimeout=$timeout(doScroll,RETRY_INTERVAL))}var options,previousTimeout,retryCount;attrs.bbScrollIntoView&&scope.$watch(attrs.bbScrollIntoView,function(newValue,oldValue){newValue&&newValue!==oldValue&&doScroll(!0)})}return{link:link,restrict:"A"}}])}(),function($){"use strict";angular.module("sky.searchfield",["sky.resources"]).directive("uiSelectMatch",["$timeout",function($timeout){return{restrict:"EA",replace:!1,require:"^uiSelect",link:function(scope,element,attrs,$select){function sizeMatchItems(){function updateIfVisible(containerOffsetWidth){var visible=containerOffsetWidth>0;return visible&&(containerOffsetWidth-=containerOffsetWidth-angular.element(selectContainerEl).width(),matchEl.find(".ui-select-match-item").css({overflow:"hidden",textOverflow:"ellipsis",maxWidth:containerOffsetWidth})),visible}$timeout(function(){updateIfVisible(selectContainerEl.offsetWidth)})}var selectContainerEl,origSizeSearchInputFunc,matchEl,windowResizeTimeout;$select.multiple&&(matchEl=element,selectContainerEl=matchEl.parent().parent()[0],origSizeSearchInputFunc=$select.sizeSearchInput,$select.sizeSearchInput=function(){origSizeSearchInputFunc(),sizeMatchItems()},sizeMatchItems(),$(window).on("resize.searchField"+scope.$id,function(){$timeout.cancel(windowResizeTimeout),windowResizeTimeout=$timeout(function(){sizeMatchItems()},250)}),scope.$on("$destroy",function(){$(window).off("resize.searchField"+scope.$id)}))}}}]).directive("uiSelectChoices",["$templateCache","bbResources",function($templateCache,bbResources){return{restrict:"EA",replace:!1,require:"^uiSelect",link:function(scope,element,attrs,$select){function updateUIForSearch(showSearchingMsg){var msg;msgEl&&(msgEl.remove(),msgEl=null),searching&&0===$select.items.length&&(msg=showSearchingMsg?bbResources.searchfield_searching:bbResources.searchfield_no_records,msgEl=angular.element($templateCache.get("sky/templates/searchfield/choices.html")),msgEl.find(".bb-searchfield-no-records").text(msg),selectContainerEl.append(msgEl))}function clearResults(){searching=!1,$select.items=[],updateUIForSearch()}var searching,selectContainerEl,msgEl;attrs.refresh&&(selectContainerEl=angular.element(element).parent(),searching=!1,scope.$watch("$select.open",function(){clearResults()}),scope.$watchCollection("$select.items",function(){updateUIForSearch()}),scope.$on("bbSearchFinished",function(){updateUIForSearch()}),scope.$watch("$select.search",function(search){searching=search&&search.length>0,searching?updateUIForSearch(!0):clearResults()}))}}}])}(jQuery),function(){"use strict";function BBSelectFieldController($scope,bbChecklistUtility,bbFormat,bbResources,$filter){var vm=this;vm.getFieldInclude=function(){var fieldStyle=vm.bbSelectFieldStyle;return"single"!==fieldStyle&&(fieldStyle="multiple"),"sky/templates/selectfield/selectfield"+fieldStyle+".include.html"},vm.setPicker=function(picker){vm.picker=picker},vm.getSelectedItems=function(){var selectedItems=vm.bbSelectFieldSelectedItems;return angular.isArray(selectedItems)?selectedItems.slice():[]},vm.setSelectedItems=function(selectedItems){vm.bbSelectFieldSelectedItems=selectedItems},vm.selectFieldClick=function(){vm.picker&&vm.picker.open()},vm.getSummaryCountText=function(){var formattedCount,selectedItems=vm.bbSelectFieldSelectedItems;return angular.isArray(selectedItems)?(formattedCount=$filter("bbAutonumeric")(selectedItems.length,"number",!0),bbFormat.formatText(bbResources.selectfield_summary_text,formattedCount)):void 0},vm.removeAll=function(){vm.bbSelectFieldSelectedItems=[]},vm.remove=function(item){bbChecklistUtility.remove(vm.bbSelectFieldSelectedItems,item)}}BBSelectFieldController.$inject=["$scope","bbChecklistUtility","bbFormat","bbResources","$filter"],angular.module("sky.selectfield.controller",["sky.autonumeric","sky.checklist.utility"]).controller("BBSelectFieldController",BBSelectFieldController)}(),function(){"use strict";function bbSelectField(){function link($scope,el,attrs,ctrls){ctrls[0]&&ctrls[1]&&attrs.required&&(ctrls[1].$validators.required=function(){return angular.isDefined(ctrls[0].bbSelectFieldSelectedItems)&&ctrls[0].bbSelectFieldSelectedItems.length>0},$scope.$watchCollection(function(){return ctrls[0].bbSelectFieldSelectedItems},function(){ctrls[1].$validate()}),ctrls[0].setModelTouched=function(){ctrls[1].$setTouched()})}return{require:["bbSelectField","?ngModel"],restrict:"E",bindToController:{bbSelectFieldClick:"&?",bbSelectFieldSelectedItems:"=?ngModel",bbSelectFieldStyle:"@?",bbSelectFieldText:"@?"},controller:"BBSelectFieldController",controllerAs:"bbSelectField",scope:!0,templateUrl:"sky/templates/selectfield/selectfield.directive.html",transclude:!0,link:link}}angular.module("sky.selectfield.directive",["sky.format","sky.resources","sky.selectfield.controller"]).directive("bbSelectField",bbSelectField)}(),function(){"use strict";function bbSelectFieldMultipleItemAnimation(){function getFadeOptions(doneFn){return{duration:duration,always:doneFn,queue:!1}}var slideOptions,duration=250;return slideOptions={duration:duration,queue:!1},{enter:function(el,doneFn){el.css({display:"none",opacity:0}).slideDown(slideOptions).animate({opacity:1},getFadeOptions(doneFn))},leave:function(el,doneFn){el.find(".close").blur(),el.slideUp(slideOptions).fadeOut(getFadeOptions(doneFn))}}}angular.module("sky.selectfield.item.animation",[]).animation(".bb-select-field-multiple-item",bbSelectFieldMultipleItemAnimation)}(),function(){"use strict";function BBSelectFieldPickerController(){}function bbSelectFieldPicker(bbModal,bbResources){function link(scope,el,attrs,ctrls){var modalInstance,selectedItems,bbSelectField=ctrls[1],vm=ctrls[0];vm.isSingleStyle=function(){return"single"===bbSelectField.bbSelectFieldStyle},vm.getDialogHeaderText=function(){var header=vm.bbSelectFieldPickerHeader;return header||(header=vm.isSingleStyle()?bbResources.selectfieldpicker_select_value:bbResources.selectfieldpicker_select_values),header},vm.open=function(){function cleanup(){angular.isFunction(bbSelectField.setModelTouched)&&bbSelectField.setModelTouched(),pickerSelectedOff&&pickerSelectedOff(),modalInstance=null}function onPickerSelected(e,args){selectedItems=args.selectedItems,bbSelectField.setSelectedItems(selectedItems),modalInstance.close()}function onModalClosed(reason){"save"===reason&&bbSelectField.setSelectedItems(selectedItems),cleanup()}function onModalDismissed(){cleanup()}var pickerSelectedOff;angular.isFunction(bbSelectField.bbSelectFieldClick)&&bbSelectField.bbSelectFieldClick(),modalInstance=bbModal.open({scope:scope,templateUrl:"sky/templates/selectfield/selectfieldpicker.directive.html"}),vm.isSingleStyle()&&(pickerSelectedOff=scope.$on("bbPickerSelected",onPickerSelected)),modalInstance.result.then(onModalClosed,onModalDismissed)},vm.okClick=function(){modalInstance&&modalInstance.close("save")},vm.clearClick=function(){modalInstance&&(selectedItems=[],modalInstance.close("save"))},scope.$on("bbPickerReady",function(e,args){selectedItems=bbSelectField.getSelectedItems(),args.setSelectedItems(selectedItems)}),bbSelectField.setPicker(vm)}return{require:["bbSelectFieldPicker","^bbSelectField"],restrict:"E",bindToController:{bbSelectFieldPickerTemplate:"@",bbSelectFieldPickerHeader:"@"},controller:BBSelectFieldPickerController,controllerAs:"bbSelectFieldPicker",link:link,scope:!0}}bbSelectFieldPicker.$inject=["bbModal","bbResources"],angular.module("sky.selectfieldpicker.directive",["sky.modal","sky.resources"]).directive("bbSelectFieldPicker",bbSelectFieldPicker)}(),function($){"use strict";var tabScrollId=0;angular.module("sky.tabscroll",["ui.bootstrap.tabs"]).directive("bbTabScroll",["$timeout","$window",function($timeout,$window){return{link:function(scope,el,attrs){function getNavTabsEl(){return el.children(".nav-tabs")}function getScrollLeftForEl(navTabsEl,selector){var elWidth,scrollLeft,tabEl,tabLeft,tabPosition,tabRight;return tabEl=angular.isString(selector)?navTabsEl.children(selector):selector,tabPosition=tabEl.position(),tabPosition&&(tabLeft=tabPosition.left,0>tabLeft?scrollLeft=tabLeft+navTabsEl[0].scrollLeft:(elWidth=el.width(),tabRight=tabLeft+tabEl.width(),tabRight>elWidth&&(scrollLeft=navTabsEl[0].scrollLeft+(tabRight-elWidth)))),scrollLeft}function getScrollLeft(navTabsEl){return getScrollLeftForEl(navTabsEl,".active")||0}function stopAnimateTabScroll(navTabsEl){navTabsEl.stop(!0,!0)}function animateTabScroll(navTabsEl,scrollLeft,duration){stopAnimateTabScroll(navTabsEl),navTabsEl.animate({scrollLeft:scrollLeft},{duration:duration||500})}function showTabsCanScroll(force){var hasOverflow,overflowOccurred,scrollLeft,navTabsEl=getNavTabsEl();navTabsEl.length>0&&(hasOverflow=angular.isDefined(getScrollLeftForEl(navTabsEl,"li:first"))||angular.isDefined(getScrollLeftForEl(navTabsEl,"li:last")),force=force||angular.isDefined(getScrollLeftForEl(navTabsEl,".active")),overflowOccurred=!showTabsCanScroll.previousHadOverflow&&hasOverflow,(force||overflowOccurred)&&(scrollLeft=getScrollLeft(navTabsEl),stopAnimateTabScroll(navTabsEl),overflowOccurred&&navTabsEl.scrollLeft(navTabsEl[0].scrollWidth-el.width()),animateTabScroll(navTabsEl,scrollLeft))),showTabsCanScroll.previousHadOverflow=hasOverflow}var lastWindowResizeTimeout,lastWindowWidth;tabScrollId++,el.addClass("bb-tab-scroll"),attrs.bbTabScrollReady&&scope.$watch(attrs.bbTabScrollReady,function(newValue,oldValue){newValue&&newValue!==oldValue&&showTabsCanScroll(!0)}),lastWindowWidth=$($window).width(),$($window).on("resize.tabscroll"+tabScrollId,function(){var windowWidth=$($window).width();lastWindowWidth!==windowWidth&&($timeout.cancel(lastWindowResizeTimeout),lastWindowResizeTimeout=$timeout(function(){showTabsCanScroll()},250)),lastWindowWidth=windowWidth}),el.on("click","> .nav-tabs > li",function(){var navTabsEl,scrollLeft;navTabsEl=getNavTabsEl(),scrollLeft=getScrollLeftForEl(navTabsEl,$(this)),angular.isDefined(scrollLeft)&&animateTabScroll(navTabsEl,scrollLeft,250)}),el.on("$destroy",function(){$($window).off(".tabscroll"+tabScrollId)})}}}])}(jQuery),function($){"use strict";function getTemplate($templateCache,name){return $templateCache.get("sky/templates/tabset/"+name+".html")}function tabset($compile,$templateCache){return{link:function($scope,el,attr){var ulEl,liEl;(angular.isDefined(attr.bbTabsetAdd)||angular.isDefined(attr.bbTabsetOpen))&&(ulEl=el.children("ul"),liEl=angular.element(getTemplate($templateCache,"tabbutton")),ulEl.append(liEl),angular.isDefined(attr.bbTabsetAdd)&&(liEl.append($compile(getTemplate($templateCache,"addbutton"))($scope)),$scope.bbTabAdd=function(){$scope.$eval(attr.bbTabsetAdd)}),angular.isDefined(attr.bbTabsetOpen)&&(liEl.append($compile(getTemplate($templateCache,"openbutton"))($scope)),$scope.bbTabOpen=function(){$scope.$eval(attr.bbTabsetOpen)}))}}}function BBTabsetCollapsibleController($scope){var self=this;self.updateCollapsibleHeader=function(header){$scope.bbTabsetOptions.selectedTabHeader=header},self.tabAdded=function(){$scope.bbTabsetOptions||($scope.bbTabsetOptions={isSmallScreen:!1,tabCount:0}),$scope.bbTabsetOptions.isSmallScreen&&$scope.setupCollapsibleTabs($scope.bbTabsetOptions.isSmallScreen&&$scope.bbTabsetOptions.tabCount>1),$scope.bbTabsetOptions.tabCount++},self.tabRemoved=function(){$scope.bbTabsetOptions.tabCount--}}function bbTabsetCollapsible($compile,$templateCache,$window,bbMediaBreakpoints){return{restrict:"A",controller:BBTabsetCollapsibleController,link:function($scope,el){function getTabUl(){var ulEl=el.children("ul.nav.nav-tabs");return ulEl.length>0?ulEl.eq(0):el.find(".bb-tabset-dropdown.nav.nav-tabs ul").eq(0)}function getBootstrapTabs(){var ulEl=getTabUl();return ulEl.find("li:not(.bb-tab-button):not(.bb-tabset-dropdown)").eq(0)}function getDropdownEl(){return angular.element(getTemplate($templateCache,"dropdown"))}function setTabMaxWidth(){el.find("ul.nav-tabs li a").css("max-width","")}function setDropdownMaxWidth(){var availableWidth,addOpenButtonEl,i,dropdownTextMaxWidth,addOpenWidth=0;for(availableWidth=el.width(),addOpenButtonEl=el.find(".bb-tab-button-wrap"),i=0;i<addOpenButtonEl.length;i++)addOpenWidth+=addOpenButtonEl.eq(i).width();dropdownTextMaxWidth=availableWidth-addOpenWidth-DROPDOWN_CARET_WIDTH-TAB_PADDING,el.find(".bb-tab-header-text").css("max-width",dropdownTextMaxWidth.toString()+"px"),el.find(".bb-tabset-dropdown ul.dropdown-menu li a").css("max-width",availableWidth.toString()+"px")}function setupCollapsibleTabs(isCollapsed){var tabsEl,dropdownContainerEl,ulEl,dropdownButtonsEl;tabsEl=getBootstrapTabs(),dropdownButtonsEl=el.find(".bb-tab-button-wrap"),ulEl=getTabUl(),isCollapsed?(dropdownContainerEl=el.find(".bb-tabset-dropdown"),ulEl.addClass("dropdown-menu"),ulEl.removeClass("nav"),ulEl.removeClass("nav-tabs"),dropdownContainerEl.append(ulEl),dropdownContainerEl.append(dropdownButtonsEl),setDropdownMaxWidth()):(ulEl.removeClass("dropdown-menu"),ulEl.addClass("nav"),ulEl.addClass("nav-tabs"),el.prepend(ulEl),ulEl.find(".bb-tab-button").append(dropdownButtonsEl),setTabMaxWidth())}function mediaBreakpointHandler(newBreakpoints){$scope.bbTabsetOptions.isSmallScreen=newBreakpoints.xs,setupCollapsibleTabs(newBreakpoints.xs&&$scope.bbTabsetOptions.tabCount>1)}var lastWindowWidth,tabCollapseId=$scope.$id;$scope.setupCollapsibleTabs=setupCollapsibleTabs,$scope.bbTabsetOptions||($scope.bbTabsetOptions={isSmallScreen:!1,tabCount:0}),el.prepend($compile(getDropdownEl())($scope)),$scope.$watch("bbTabsetOptions.tabCount",function(newValue){$scope.bbTabsetOptions.isSmallScreen&&setupCollapsibleTabs(newValue&&newValue>1?!0:!1)}),bbMediaBreakpoints.register(mediaBreakpointHandler),$($window).on("resize.tabcollapse"+tabCollapseId,function(){var windowWidth=$($window).width();lastWindowWidth!==windowWidth&&$scope.bbTabsetOptions.isSmallScreen&&$scope.bbTabsetOptions.tabCount>1&&setDropdownMaxWidth(),lastWindowWidth=windowWidth}),$scope.$on("$destroy",function(){bbMediaBreakpoints.unregister(mediaBreakpointHandler),$($window).off(".tabcollapse"+tabCollapseId)})}}}function collapsibleTabTitle($scope,el,bbTabsetCollapsibleCtrl,getTabHeading){var tabScope=el.isolateScope();$scope.$watch(function(){return tabScope.active},function(active){active&&bbTabsetCollapsibleCtrl.updateCollapsibleHeader(getTabHeading())}),$scope.$watch(function(){return getTabHeading()},function(collapseTitle){tabScope.active&&bbTabsetCollapsibleCtrl.updateCollapsibleHeader(collapseTitle)}),bbTabsetCollapsibleCtrl.tabAdded(),$scope.$on("$destroy",function(){bbTabsetCollapsibleCtrl.tabRemoved()})}function bbTabCollapseHeader(){return{require:"^bbTabsetCollapsible",link:function($scope,el,attr,bbTabsetCollapsibleCtrl){function getTabHeading(){return $scope.$eval(attr.bbTabCollapseHeader)}collapsibleTabTitle($scope,el,bbTabsetCollapsibleCtrl,getTabHeading)}}}function tab(){return{require:"?^bbTabsetCollapsible",link:function($scope,el,attr,bbTabsetCollapsibleCtrl){function getTabHeading(){return tabScope.heading}var tabScope=el.isolateScope();null===bbTabsetCollapsibleCtrl||angular.isDefined(attr.bbTabCollapseHeader)||collapsibleTabTitle($scope,el,bbTabsetCollapsibleCtrl,getTabHeading)}}}var DROPDOWN_CARET_WIDTH=45,TAB_PADDING=15;tabset.$inject=["$compile","$templateCache"],BBTabsetCollapsibleController.$inject=["$scope"],bbTabsetCollapsible.$inject=["$compile","$templateCache","$window","bbMediaBreakpoints"],angular.module("sky.tabset",["ui.bootstrap.tabs","sky.mediabreakpoints"]).directive("uibTabset",tabset).directive("tabset",tabset).directive("bbTabsetCollapsible",bbTabsetCollapsible).directive("bbTabCollapseHeader",bbTabCollapseHeader).directive("tab",tab).directive("uibTab",tab)}(jQuery),function(){"use strict";angular.module("sky.tabsref",["ui.bootstrap.tabs"]).directive("bbTabSref",["$rootScope","$state","$timeout",function($rootScope,$state,$timeout){return{require:["^?tabset","^?uibTabset"],link:function(scope,el,attrs,controllers){function checkCurrentState(){$state.is(sref)&&tabsetCtrl.select(el.isolateScope())}var stateChangeDeregistration,tabsetCtrl,active=attrs.active,sref=attrs.bbTabSref;tabsetCtrl=null!==controllers[0]?controllers[0]:controllers[1],active&&sref&&(checkCurrentState(),stateChangeDeregistration=$rootScope.$on("$stateChangeSuccess",function(){checkCurrentState()}),scope.$watch(active,function(newValue){newValue&&!$state.is(sref)&&$timeout(function(){$state.go(sref)})}),scope.$on("$destroy",function(){stateChangeDeregistration()}))}}}])}(),function(){"use strict";function createItemClassName(index){return"bb-template-item-"+index}function insertTemplateItems(templateEl,items){var i,n;for(i=0,n=items.length;n>i;i++)items[i].appendTo(templateEl.find("."+createItemClassName(i)))}var BB_TEMPLATE_RESULT="bb-template-result";angular.module("sky.templating",["sky.format"]).directive("bbTemplate",["bbFormat",function(bbFormat){function createTemplateHtml(template){return template=bbFormat.escape(template),template.replace(/\{(\d+)\}/g,function(match,number){return'<span class="'+createItemClassName(number)+'"></span>'})}return{controller:["$scope",function($scope){$scope.items=[],this.addItem=function(item){$scope.items.push(item)}}],link:function(scope,el){scope.$watch("template",function(newValue){var newEl,templateHtml,oldEl=el.find("."+BB_TEMPLATE_RESULT);angular.isDefined(newValue)&&(templateHtml=createTemplateHtml(newValue),newEl=angular.element('<span class="'+BB_TEMPLATE_RESULT+'">'+templateHtml+"</span>").appendTo(el),insertTemplateItems(newEl,scope.items),oldEl.remove())})},scope:{template:"=bbTemplate"},restrict:"A"}}]).directive("bbTemplateItem",function(){return{link:function(scope,el,attr,bbFormatCtrl){bbFormatCtrl.addItem(el)},require:"^bbTemplate",restrict:"AE"}})}(),function(){"use strict";function getNewlineCount(value){var matches=value.match(/\n/gi);return matches?matches.length:0}function createEl($templateCache,templateName){return angular.element($templateCache.get("sky/templates/textexpand/"+templateName+".html"))}function BBTextExpandController(textExpandContent,headerContent,closeText){var self=this;self.textExpandContent=textExpandContent,self.headerContent=headerContent,self.closeText=closeText}var modules=["sky.resources","sky.scrollintoview","sky.modal"];BBTextExpandController.$inject=["textExpandContent","headerContent","closeText"],angular.module("sky.textexpand",modules).directive("bbTextExpandRepeater",["$templateCache","bbResources",function($templateCache,bbResources){function link(scope,el,attrs){scope.$watch(attrs.bbTextExpandRepeaterData,function(data){var length,maxToShow,seeMoreEl,seeMoreText=bbResources.text_expand_see_more,seeLessText=bbResources.text_expand_see_less;data&&(length=data.length,maxToShow=+attrs.bbTextExpandRepeaterMax,seeMoreEl=createEl($templateCache,"seemore").text(seeMoreText),length>maxToShow&&el.find("li:gt("+(maxToShow-1)+")").addClass("bb-text-expand-toggle-li").hide().end().append(seeMoreEl.click(function(){return seeMoreEl.siblings(".bb-text-expand-toggle-li").toggle(100),seeMoreEl.hasClass("bb-text-expand-see-more")?seeMoreEl.text(seeLessText):seeMoreEl.text(seeMoreText),seeMoreEl.toggleClass("bb-text-expand-see-more"),!1})))})}return{link:link}}]).directive("bbTextExpand",["$templateCache","bbResources","bbScrollIntoView","bbModal",function($templateCache,bbResources,bbScrollIntoView,bbModal){function link(scope,el,attrs){function getTruncatedText(value,length,newlines){var i;for(newlines&&getNewlineCount(value)>=newlines&&(value=value.replace(/\s+/gi," ")),i=length;i>length-10;i--)if(/\s/.test(value.charAt(i))){length=i;break}return value.substr(0,length)}var isExpanded,maxLength=+attrs.bbTextExpandMaxLength||200,maxExpandedLength=+attrs.bbTextExpandMaxExpandedLength||600,maxNewlines=1,maxExpandedNewlines=+attrs.bbTexExpandMaxExpandedNewlines||3;scope.$watch(attrs.bbTextExpand,function(newValue){function animateText(previousText,newText,newExpandText,showEllipsis){currentHeight=containerEl.height(),expandEl.text(newExpandText),textEl.text(newText),newHeight=containerEl.height(),currentHeight>newHeight&&textEl.text(previousText),ellipsisEl.text(showEllipsis?"...":""),containerEl.height(currentHeight).animate({height:newHeight},250,function(){currentHeight>newHeight&&textEl.text(newText),containerEl.css("height","auto")})}var collapsedText,expandedText,containerEl,currentHeight,ellipsisEl,expandEl,newHeight,textEl,spaceEl;containerEl=createEl($templateCache,"container"),newValue&&(collapsedText=getTruncatedText(newValue,maxLength,maxNewlines),expandedText=getTruncatedText(newValue,maxExpandedLength,maxExpandedNewlines),collapsedText!==newValue?(isExpanded=!0,textEl=createEl($templateCache,"text").text(collapsedText),ellipsisEl=createEl($templateCache,"ellipsis"),spaceEl=createEl($templateCache,"space"),expandEl=createEl($templateCache,"seemore").text(bbResources.text_expand_see_more),containerEl.empty().append(textEl).append(ellipsisEl).append(spaceEl).append(expandEl),getNewlineCount(newValue)>=maxExpandedNewlines||newValue.length>maxExpandedLength?expandEl.on("click",function(){bbModal.open({templateUrl:"sky/templates/textexpand/expandmodal.html",controller:BBTextExpandController,controllerAs:"expandCtrl",resolve:{textExpandContent:function(){return newValue},headerContent:function(){return scope.$eval(attrs.bbTextExpandModalTitle)||bbResources.text_expand_modal_title},closeText:function(){return bbResources.text_expand_close_text}}})}):expandEl.on("click",function(){return isExpanded?animateText(collapsedText,expandedText,bbResources.text_expand_see_less,expandedText!==newValue):animateText(expandedText,collapsedText,bbResources.text_expand_see_more,!0),bbScrollIntoView(expandEl),isExpanded=!isExpanded,!1})):containerEl.text(newValue)),el.empty().append(containerEl),el.on("$destroy",function(){containerEl=null,expandEl=null,textEl=null,spaceEl=null})})}return{link:link}}])}(),function(){"use strict";function moveTilesToContainer(sourceContainer,targetContainer,tiles){angular.forEach(tiles,function(tileId){var tile=sourceContainer.find('[data-tile-id="'+tileId+'"]');targetContainer.append(tile)})}function parseTileOrder(container){var tiles=[];return container.find("[data-tile-id]").each(function(){tiles.push(angular.element(this).data("tile-id"))}),tiles}function BBTileController($scope,$timeout){function tileIsCollapsed(tileId,tiles){var i,tile,len=tiles.length;for(i=0;len>i;i++)if(tile=tiles[i],tile.id===tileId)return vm.smallTileDisplayMode?tile.collapsed_small:tile.collapsed;return!!vm.smallTileDisplayMode}function updateTileState(tiles){var collapsed,oldCollapsed;tiles=tiles||[],oldCollapsed=vm.isCollapsed,collapsed=tileIsCollapsed(vm.tileId,tiles),oldCollapsed===collapsed&&(displayModeChanging=!1),vm.isCollapsed=collapsed}var vm=this,displayModeChanging=!1;vm.setHeaderContentEl=function(el){vm.headerContentEl=el},vm.updateTileState=updateTileState,vm.isCollapsed=vm.bbTileCollapsed||!1,vm.smallTileDisplayMode=!1,vm.tileId="",vm.titleClick=function(){vm.isCollapsed=!vm.isCollapsed,vm.scrollIntoView=!vm.isCollapsed},$scope.$on("tileDisplayModeChanged",function(event,data){vm.smallTileDisplayMode=data.smallTileDisplayMode||!1,vm.tileInitialized&&(displayModeChanging=!0,vm.updateTileState(data.tiles))}),$scope.$watch(function(){return vm.isCollapsed},function(){vm.tileInitialized&&!displayModeChanging&&$timeout(function(){$scope.$emit("tileStateChanged",{tileId:vm.tileId,collapsed:vm.isCollapsed})}),displayModeChanging=!1,vm.isCollapsed||$timeout(function(){$scope.$broadcast("tileRepaint")}),vm.bbTileCollapsed=vm.isCollapsed})}function bbTile($timeout){function link($scope,el,attrs,ctrls){function updateHeaderContent(){var wrapperEl;vm.hasHeaderContent=!!vm.headerContentEl,vm.headerContentEl&&(wrapperEl=el.find(".bb-tile-header-with-content:first"),wrapperEl.append(vm.headerContentEl))}function initializeTile(data){$timeout(function(){var tiles=data.tiles||[];vm.tileInitialized||(vm.tileId=el.parent().attr("data-tile-id")||"",vm.smallTileDisplayMode=data.smallTileDisplayMode||!1),vm.updateTileState(tiles),vm.tileInitialized=!0})}var dashboardCtrl=ctrls[1],vm=ctrls[0],dashboardState={};$scope.$on("tilesInitialized",function(event,data){initializeTile(data)}),attrs.bbTileCollapsed&&$scope.$watch(function(){return vm.bbTileCollapsed},function(newValue){vm.isCollapsed=newValue}),vm.hasSettings=!!attrs.bbTileSettingsClick,updateHeaderContent(),null!==dashboardCtrl&&dashboardCtrl.dashboardInitialized&&!vm.tileInitialized&&(dashboardState=dashboardCtrl.getDashboardState(),initializeTile(dashboardState),dashboardCtrl.layoutTiles())}return{link:link,replace:!0,restrict:"E",require:["bbTile","?^^bbTileDashboard"],scope:{},controller:BBTileController,controllerAs:"bbTile",bindToController:{bbTileCollapsed:"=?",bbTileSettingsClick:"&?",tileHeader:"=bbTileHeader"},templateUrl:"sky/templates/tiles/tile.html",transclude:!0}}function bbTileHeaderContent(){return{replace:!0,require:"^bbTile",restrict:"E",link:function(scope,el,attrs,tileCtrl){tileCtrl.setHeaderContentEl(el)},templateUrl:"sky/templates/tiles/tileheadercontent.html",transclude:!0}}function bbTileHeaderCheck(){return{replace:!0,require:"^bbTileHeaderContent",restrict:"E",templateUrl:"sky/templates/tiles/tileheadercheck.html"}}function bbTileSection(){return{restrict:"A",template:function(el){el.addClass("bb-tile-content-section")}}}function BBTileDashboardController($scope,$timeout){function fireDisplayModeChanged(){$scope.$broadcast("tileDisplayModeChanged",{smallTileDisplayMode:vm.smallTileDisplayMode,tiles:vm.tiles})}var vm=this;vm.getDashboardState=function(){return{tiles:vm.tiles,smallTileDisplayMode:vm.smallTileDisplayMode}},vm.layoutTiles=function(){$timeout(function(){vm.layoutTileColumns()})},vm.dashboardInitialized=!1,vm.smallTileDisplayMode=!1,vm.fireDisplayModeChanged=fireDisplayModeChanged,$scope.$watch(function(){return vm.tiles},function(){$timeout(function(){vm.layoutTileColumns(),$scope.$broadcast("tilesInitialized",{smallTileDisplayMode:vm.smallTileDisplayMode,tiles:vm.tiles}),vm.dashboardInitialized=!0})}),$scope.$watch(function(){return vm.allCollapsed},function(newValue){var i,n,tiles=vm.tiles;if(newValue===!0||newValue===!1){for(i=0,n=tiles.length;n>i;i++)vm.smallTileDisplayMode?tiles[i].collapsed_small=newValue:tiles[i].collapsed=newValue;vm.fireDisplayModeChanged()}})}function bbTileDashboard($timeout,bbMediaBreakpoints){
function link($scope,element,attrs,vm){function layoutTileColumns(){var layout=vm.layout;layout&&(singleColumnMode?moveTilesToContainer(element,column1,layout.one_column_layout):(moveTilesToContainer(element,column1,layout.two_column_layout[0]),moveTilesToContainer(element,column2,layout.two_column_layout[1])))}function parseColumnTiles(){$scope.$apply(function(){var layout=vm.layout;singleColumnMode?layout.one_column_layout=parseTileOrder(column1):(layout.two_column_layout[0]=parseTileOrder(column1),layout.two_column_layout[1]=parseTileOrder(column2))})}function mediabreakpointChangeHandler(breakPoints){singleColumnMode=breakPoints.xs||breakPoints.sm,vm.layoutTileColumns(),singleColumnMode?(element.removeClass("bb-page-content-multicolumn"),column2.hide()):(element.addClass("bb-page-content-multicolumn"),column2.show()),vm.smallTileDisplayMode=breakPoints.xs,vm.fireDisplayModeChanged()}var sortableOptions,column1=element.find('[data-dashboard-column="1"]'),column2=element.find('[data-dashboard-column="2"]'),singleColumnMode=!1;vm.layoutTileColumns=layoutTileColumns,sortableOptions={connectWith:"[data-dashboard-column]",update:parseColumnTiles,opacity:.8,handle:".bb-tile-grab-handle",placeholder:"placeholder bb-tile",forcePlaceholderSize:!0,revert:250},column1.sortable(sortableOptions),column2.sortable(sortableOptions),bbMediaBreakpoints.register(mediabreakpointChangeHandler),element.on("$destroy",function(){bbMediaBreakpoints.unregister(mediabreakpointChangeHandler)}),$scope.$on("tileStateChanged",function(event,data){$scope.$apply(function(){var collapsed,collapsedProp,i,n,tile,allCollapsed=null,tileId=data.tileId||"",tiles=vm.tiles;for(collapsed=data.collapsed||!1,collapsedProp=vm.smallTileDisplayMode?"collapsed_small":"collapsed",i=0,n=tiles.length;n>i;i++)tile=tiles[i],tile.id===tileId&&(tile[collapsedProp]=collapsed),allCollapsed=i>0&&tile[collapsedProp]!==allCollapsed?null:tile[collapsedProp];attrs.bbTileDashboardAllCollapsed&&(vm.allCollapsed=allCollapsed)})})}return{replace:!0,require:"bbTileDashboard",restrict:"E",bindToController:{tiles:"=bbTiles",layout:"=bbLayout",allCollapsed:"=bbTileDashboardAllCollapsed"},scope:{},link:link,controller:BBTileDashboardController,controllerAs:"bbTileDashboard",templateUrl:"sky/templates/tiles/tiledashboard.html"}}BBTileController.$inject=["$scope","$timeout"],bbTile.$inject=["$timeout"],BBTileDashboardController.$inject=["$scope","$timeout"],bbTileDashboard.$inject=["$timeout","bbMediaBreakpoints"],angular.module("sky.tiles",["sky.mediabreakpoints"]).directive("bbTile",bbTile).directive("bbTileHeaderContent",bbTileHeaderContent).directive("bbTileHeaderCheck",bbTileHeaderCheck).directive("bbTileSection",bbTileSection).directive("bbTileDashboard",bbTileDashboard)}(),function(){"use strict";function nextId(){return nextId.index=nextId.index||0,nextId.index++,"bbtoast-"+nextId.index}function validateOptions(opts){if(opts.message&&opts.templateUrl)throw"You must not provide both a message and a templateUrl.";if(!opts.message&&!opts.templateUrl)throw"You must provide either a message or a templateUrl.";switch(opts.toastType){case"info":case"warning":case"success":case"error":break;case"danger":opts.toastType="error";break;default:opts.toastType="info"}}var DEFAULT_TIMEOUT=1e4;angular.module("sky.toast",["toastr"]).config(["toastrConfig",function(toastrConfig){angular.extend(toastrConfig,{closeButton:!0,extendedTimeOut:DEFAULT_TIMEOUT,newestOnTop:!0,positionClass:"toast-bottom-right",tapToDismiss:!1,timeOut:DEFAULT_TIMEOUT,toastClass:"toast bb-toast"})}]).factory("bbToast",["toastr","$templateCache","$compile","$controller","$rootScope","$q","$injector",function(toastr,$templateCache,$compile,$controller,$rootScope,$q,$injector){function getResolvePromises(resolves){var promisesArr=[];return angular.forEach(resolves,function(value){(angular.isFunction(value)||angular.isArray(value))&&promisesArr.push($q.when($injector.invoke(value)))}),promisesArr}function open(message,config,opts){switch(config=config||{},config.iconClass="bb-toast-"+opts.toastType,opts.timeout){case"infinite":config.timeOut=config.extendedTimeOut=0;break;default:isNaN(opts.timeout)||(config.timeOut=config.extendedTimeOut=+opts.timeout)}return toastr[opts.toastType](message,"",config)}function openMessage(opts){return open(opts.message,null,opts)}function openWithTemplate(opts){function insertTemplateInToast(){var templateEl=toast.el.find("#"+elId);templateEl.html(templateHtml),controller&&($controller(controller,controllerLocals),$compile(templateEl)(controllerLocals.$scope))}var controllerLocals,elId,resolvesPromise,templateHtml,toast,toastScope,controller=opts.controller,resolveIter=0;opts.resolve=opts.resolve||{},resolvesPromise=$q.all(getResolvePromises(opts.resolve)),resolvesPromise.then(function(resolvedVars){controller&&(controllerLocals={},controllerLocals.$scope=$rootScope.$new(),angular.forEach(opts.resolve,function(value,key){controllerLocals[key]=resolvedVars[resolveIter++]})),templateHtml=$templateCache.get(opts.templateUrl),elId=nextId(),toast=open("<div id='"+elId+"'></div>",{allowHtml:!0},opts),toastScope=toast.scope,toastScope.$watch("init",function(){toastScope.$evalAsync(function(){insertTemplateInToast()})})})}return{open:function(opts){opts=angular.extend({},opts),validateOptions(opts),opts.templateUrl?openWithTemplate(opts):openMessage(opts)}}}])}(),function(){"use strict";function bbTooltip($compile){return{restrict:"A",scope:!0,link:function($scope,el){el.attr("uib-tooltip-template")||el.attr("uib-tooltip-template","'"+el.attr("bb-tooltip")+"'"),el.removeAttr("bb-tooltip"),$compile(el)($scope)}}}bbTooltip.$inject=["$compile"],angular.module("sky.tooltip",["ui.bootstrap.tooltip"]).directive("bbTooltip",bbTooltip)}(),function(){"use strict";angular.module("sky.utilities",["sky.format"]).filter("encodeURIComponent",["$window",function($window){return function(value){return $window.encodeURIComponent(value)}}]).filter("format",["bbFormat",function(bbFormat){return function(){return bbFormat.formatText.apply(this,arguments)}}])}(),function(){"use strict";angular.module("sky.validation",[]).directive("bbEmailValidation",[function(){var EMAIL_REGEXP=/[\w\-]+@([\w\-]+\.)+[\w\-]+/;return{require:"ngModel",restrict:"",link:function(scope,elm,attrs,ctrl){ctrl&&ctrl.$validators.email&&(ctrl.$validators.email=function(modelValue){return ctrl.$isEmpty(modelValue)||EMAIL_REGEXP.test(modelValue)})}}}])}(),function(){"use strict";function nextId(){return nextId.index=nextId.index||0,nextId.index++,"viewkeeper-"+nextId.index}function getSpacerId(vk){return vk.id+"-spacer"}function setElPosition(elQ,left,top,bottom,width){elQ.css({top:top,bottom:bottom,left:left}),null!==width&&elQ.css({width:width})}function unfixEl(vk){var width,elQ=angular.element(vk.el);angular.element("#"+getSpacerId(vk)).remove(),elQ.removeClass(CLS_VIEWKEEPER_FIXED),vk.currentElFixedLeft=null,vk.currentElFixedTop=null,vk.currentElFixedBottom=null,vk.currentElFixedWidth=null,vk.setWidth&&(width="auto"),setElPosition(elQ,"","","",width)}function calculateVerticalOffset(vk){var offset,verticalOffSetElTop;return offset=vk.verticalOffSet,vk.verticalOffSetEl&&(verticalOffSetElTop=vk.verticalOffSetEl.css("top"),verticalOffSetElTop&&(verticalOffSetElTop=parseInt(verticalOffSetElTop,10),isNaN(verticalOffSetElTop)&&(verticalOffSetElTop=0)),offset+=vk.verticalOffSetEl.outerHeight()+verticalOffSetElTop),offset}var ViewKeeper,CLS_VIEWKEEPER_FIXED="bb-viewkeeper-fixed",config={viewportMarginTop:0};ViewKeeper=function(options){var id,vk=this;options=options||{},vk.fixToBottom=options.fixToBottom,vk.setWidth=options.setWidth,vk.id=id=nextId(),vk.el=options.el,vk.boundaryEl=options.boundaryEl,vk.verticalOffSet=options.verticalOffSet||0,vk.setPlaceholderHeight=options.setPlaceholderHeight!==!1,vk.onStateChanged=options.onStateChanged,vk.isFixed=!1,options.verticalOffSetElId&&(vk.verticalOffSetEl=angular.element("#"+options.verticalOffSetElId),vk.verticalOffSetEl.on("afterViewKeeperSync."+id,function(){vk.syncElPosition()})),angular.element(window).on("scroll."+id+", resize."+id+", orientationchange."+id,function(){vk.syncElPosition()})},ViewKeeper.prototype={syncElPosition:function(){var anchorTop,anchorHeight,isCurrentlyFixed,currentElFixedLeft,currentElFixedTop,currentElFixedBottom,currentElFixedWidth,documentQ,fixEl,boundaryBottom,boundaryOffset,boundaryQ,boundaryTop,elFixedLeft,elFixedTop,elFixedBottom,elFixedWidth,elHeight,elQ,needsUpdating,scrollLeft,scrollTop,spacerHeight,spacerId,spacerQ,verticalOffSet,width,vk=this;isCurrentlyFixed=vk.isFixed,verticalOffSet=calculateVerticalOffset(vk),elQ=angular.element(vk.el),elQ.is(":visible")&&(boundaryQ=angular.element(vk.boundaryEl),spacerId=getSpacerId(vk),spacerQ=angular.element("#"+spacerId),documentQ=angular.element(window.document),boundaryOffset=boundaryQ.offset(),boundaryTop=boundaryOffset.top,boundaryBottom=boundaryTop+boundaryQ.height(),scrollLeft=documentQ.scrollLeft(),scrollTop=documentQ.scrollTop(),elHeight=elQ.outerHeight(!0),vk.fixToBottom?elFixedBottom=0:elFixedTop=Math.min(boundaryBottom-elHeight-scrollTop,verticalOffSet),elFixedWidth=boundaryQ.width(),elFixedLeft=boundaryOffset.left-scrollLeft,currentElFixedLeft=vk.currentElFixedLeft,currentElFixedTop=vk.currentElFixedTop,currentElFixedBottom=vk.currentElFixedBottom,currentElFixedWidth=vk.currentElFixedWidth,spacerQ.length>0?(anchorTop=spacerQ.offset().top,anchorHeight=spacerQ.outerHeight(!0)):(anchorTop=elQ.offset().top,anchorHeight=elHeight),fixEl=vk.fixToBottom?anchorTop+anchorHeight>scrollTop+window.innerHeight:scrollTop+verticalOffSet+config.viewportMarginTop>anchorTop,needsUpdating=(!fixEl||currentElFixedLeft!==elFixedLeft||currentElFixedTop!==elFixedTop||currentElFixedBottom!==elFixedBottom||currentElFixedWidth!==elFixedWidth)&&(fixEl||void 0!==currentElFixedLeft&&null!==currentElFixedLeft),needsUpdating&&(fixEl?(vk.isFixed=!0,0===spacerQ.length&&(spacerHeight=vk.setPlaceholderHeight?elHeight:0,elQ.after('<div id="'+spacerId+'" style="height: '+spacerHeight+'px;"></div>')),elQ.addClass(CLS_VIEWKEEPER_FIXED),vk.currentElFixedTop=elFixedTop,vk.currentElFixedBottom=elFixedBottom,vk.currentElFixedLeft=elFixedLeft,vk.currentElFixedWidth=elFixedWidth,vk.setWidth&&(width=elFixedWidth),setElPosition(elQ,elFixedLeft,elFixedTop,elFixedBottom,width)):(vk.isFixed=!1,unfixEl(vk)),vk.onStateChanged&&isCurrentlyFixed!==vk.isFixed&&vk.onStateChanged()),elQ.trigger("afterViewKeeperSync"))},scrollToTop:function(){var anchorTop,elQ,documentQ,spacerId,spacerQ,verticalOffset,vk=this;verticalOffset=calculateVerticalOffset(vk),documentQ=angular.element(window.document),spacerId=getSpacerId(vk),spacerQ=angular.element("#"+spacerId),elQ=angular.element(vk.el),anchorTop=spacerQ.length>0?spacerQ.offset().top:elQ.offset().top,documentQ.scrollTop(anchorTop-verticalOffset-config.viewportMarginTop)},destroy:function(){var id,vk=this;vk.isDestroyed||(id=vk.id,angular.element(window).off("scroll."+id+", resize."+id+", orientationchange."+id),unfixEl(vk),vk.verticalOffSetEl&&(vk.verticalOffSetEl.off("afterViewKeeperSync."+vk.id),vk.verticalOffSetEl=null),vk.isDestroyed=!0)}},angular.module("sky.viewkeeper",["sky.mediabreakpoints","sky.window"]).constant("bbViewKeeperConfig",config).factory("bbViewKeeperBuilder",function(){return{create:function(options){return new ViewKeeper(options)}}}).run(["$document","$window","bbMediaBreakpoints","bbViewKeeperConfig",function($document,$window,bbMediaBreakpoints,bbViewKeeperConfig){function mediaBreakpointHandler(breakpoints){bbViewKeeperConfig.viewportMarginTop=breakpoints.xs?50:30}/iPad|iPod|iPhone/i.test($window.navigator.userAgent)?(angular.element("body").addClass("omnibar-not-fixed"),angular.element(document).on("focus","input",function(){angular.element("body").addClass("bb-viewkeeper-ignore-fixed")}).on("blur","input",function(){angular.element("body").removeClass("bb-viewkeeper-ignore-fixed")})):bbMediaBreakpoints.register(mediaBreakpointHandler)}]).directive("bbViewKeeper",["bbViewKeeperBuilder",function(bbViewKeeperBuilder){function link(scope,el){function destroyVk(){vk&&(vk.destroy(),vk=null)}var vk;el.on("$destroy",function(){destroyVk()}),scope.$watch("bbBoundaryElId",function(){var boundaryEl,bbBoundaryElId=scope.bbBoundaryElId;bbBoundaryElId&&(boundaryEl=angular.element("#"+bbBoundaryElId),1===boundaryEl.length&&(destroyVk(),vk=bbViewKeeperBuilder.create({el:el[0],boundaryEl:boundaryEl[0],setWidth:!0})))})}return{link:link,restrict:"A",scope:{bbBoundaryElId:"="}}}]).directive("bbScrollingViewKeeper",["$window","bbWindow",function($window,bbWindow){return{scope:{bbScrollingViewKeeper:"="},link:function(scope,element){function scroll(){element.is(":visible")&&(verticalOffset=angular.element(".bb-omnibar>.desktop").is(":visible")?angular.element(".bb-omnibar>.desktop>.bar").outerHeight():0,scope.bbScrollingViewKeeper&&scope.bbScrollingViewKeeper.viewKeeperOffsetElId&&(verticalOffset+=angular.element("#"+scope.bbScrollingViewKeeper.viewKeeperOffsetElId).outerHeight()),elementStart||(elementStart=element.offset().top),scrollPos=$window.scrollY||$window.pageYOffset||$window.document.body.scrollTop||0,scrollingDown=!(prevScroll>scrollPos),prevScroll=scrollPos,scrollPos>=elementStart-verticalOffset&&element.height()+verticalOffset<=$window.document.body.offsetHeight?element.height()+verticalOffset<$window.innerHeight?(tempTop=0,element.removeClass("bb-grid-filters-fixed-bottom").addClass("bb-grid-filters-fixed-top"),element.css({top:verticalOffset+"px"})):scrollingDown?element.offset().top+element.height()>=scrollPos+$window.innerHeight?(tempTop||(tempTop=element.offset().top-elementStart),element.removeClass("bb-grid-filters-fixed-top bb-grid-filters-fixed-bottom"),element.css({top:tempTop})):(tempTop=0,element.css({top:""}),element.removeClass("bb-grid-filters-fixed-top").addClass("bb-grid-filters-fixed-bottom")):element.offset().top<scrollPos+verticalOffset?(tempTop||(tempTop=element.offset().top-elementStart),element.removeClass("bb-grid-filters-fixed-top bb-grid-filters-fixed-bottom "),element.css({top:tempTop})):(tempTop=0,element.removeClass("bb-grid-filters-fixed-bottom").addClass("bb-grid-filters-fixed-top"),element.css({top:verticalOffset+"px"})):(tempTop=0,element.removeClass("bb-grid-filters-fixed-top bb-grid-filters-fixed-bottom grid-filters-fixed-top grid-filters-fixed-bottom"),element.css({top:0})))}var elementStart,scrollPos,prevScroll,tempTop,verticalOffset,scrollingDown=!0,id=scope.$id;bbWindow.isIosUserAgent()||(angular.element($window).on("scroll."+id+", orientationchange."+id,scroll),element.on("$destroy",function(){angular.element($window).off("scroll."+id+", orientationchange."+id)}))},restrict:"A"}}])}(),function($){"use strict";angular.module("sky.wait",[]).factory("bbWait",["$timeout",function($timeout){function isBlockUISupported(){return $&&$.blockUI}function isFullPage(el){return $(el)[0]===document.body}function getWaitCount(el,nonblocking){var attr=nonblocking?nonBlockWaitCountAttr:waitCountAttr;return parseInt($(el).data(attr)||0,10)}function setWaitCount(el,count,nonblocking){var attr=nonblocking?nonBlockWaitCountAttr:waitCountAttr;count?$(el).data(attr,count):$(el).removeData(attr)}function nonblockEl(el,options){var childOptions=angular.extend({},options),nonblock=$(el).children(".bb-wait-nonblock");0===nonblock.length&&(nonblock=$("<div class='bb-wait-nonblock'></div>"),$(el).append(nonblock),$(nonblock).click(function(){nonblock.hide()})),nonblock.show(),childOptions.nonblocking=!1,addWait(nonblock[0],childOptions)}function unNonblockEl(el,options){var childOptions=angular.extend({},options),nonblock=$(el).children(".bb-wait-nonblock");nonblock.length>0&&(childOptions.nonblocking=!1,removeWait(nonblock[0],childOptions))}function blockEl(el,options){function showFullBlock(){$el.data(showingWaitAttr)&&(isFullPage(el)?$.blockUI(angular.extend({},fullPageVisibleBlockOptions,customBlockOptions)):$el.block(angular.extend({},visibleBlockOptions,customBlockOptions)))}var customBlockOptions,$el=$(el);isBlockUISupported()&&($el.data(showingWaitAttr)||(options=angular.extend({},{visualBlockDelay:300},options||{}),customBlockOptions={fadeIn:options.fadeIn},$el.data(showingWaitAttr,!0),options.visualBlockDelay?(isFullPage(el)?$.blockUI(fullPageClearBlockOptions):$el.block(clearBlockOptions),$timeout(showFullBlock,options.visualBlockDelay)):showFullBlock()))}function unblockEl(el){$timeout(function(){var $el;if(0===getWaitCount(el)){if($el=$(el),!isBlockUISupported())return;isFullPage(el)?$.unblockUI():$el.unblock(),$el.removeData(showingWaitAttr)}},0)}function clearAllWaits(el){setWaitCount(el,0),unblockEl(el),setWaitCount(el,0,!0),unNonblockEl(el)}var addWait,removeWait,clearBlockOptions,fullPageClearBlockOptions,fullPageVisibleBlockOptions,visibleBlockOptions,fullPageZIndex=2e4,nonBlockWaitCountAttr="bb-wait-non-block-count",showingWaitAttr="bb-wait-showingwait",waitCountAttr="bb-wait-count";return visibleBlockOptions={message:'<div class="bb-wait-wrap"><div class="bb-wait-spinner"></div></div>'},clearBlockOptions={message:"",fadeOut:0,fadeIn:0,overlayCSS:{opacity:0}},fullPageClearBlockOptions=angular.copy(clearBlockOptions),fullPageClearBlockOptions.overlayCSS["z-index"]=fullPageZIndex,fullPageVisibleBlockOptions=angular.copy(visibleBlockOptions),fullPageVisibleBlockOptions.overlayCSS={"z-index":fullPageZIndex},fullPageVisibleBlockOptions.css={"z-index":fullPageZIndex+1},addWait=function(el,options){var count;options=options||{},count=getWaitCount(el,options.nonblocking),count+=1,setWaitCount(el,count,options.nonblocking),1===count&&(options.nonblocking?nonblockEl(el,options):blockEl(el,options))},removeWait=function(el,options){var count;options=options||{},count=getWaitCount(el,options.nonblocking),count>0&&(count-=1,setWaitCount(el,count,options.nonblocking),0===count&&(options.nonblocking?unNonblockEl(el,options):unblockEl(el,options)))},isBlockUISupported()&&($.blockUI.defaults.css={},$.blockUI.defaults.overlayCSS={}),{beginElWait:function(el,options){addWait(el,options)},beginPageWait:function(options){addWait(document.body,options)},clearElWait:function(el){clearAllWaits(el)},clearPageWait:function(){clearAllWaits(document.body)},endElWait:function(el,options){removeWait(el,options)},endPageWait:function(options){removeWait(document.body,options)}}}]).directive("bbWait",["bbWait",function(bbWait){return{restrict:"A",link:function(scope,el,attrs){var firstScopeLoad=!0;scope.$watch(attrs.bbWait,function(value,oldValue){!value||oldValue&&!firstScopeLoad?oldValue&&!value&&bbWait.endElWait(el):bbWait.beginElWait(el),firstScopeLoad=!1})}}}])}(jQuery),function(){"use strict";angular.module("sky.window",[]).constant("bbWindowConfig",{productName:""}).factory("bbWindow",["$window","bbWindowConfig","$timeout","$document",function($window,bbWindowConfig,$timeout,$document){function calculateScrollbarWidth(){var inner,outer,w1,w2;return inner=angular.element("<p></p>"),inner.css("width","100%"),inner.css("height","200px"),outer=angular.element("<div></div>"),outer.css("position","absolute"),outer.css("top","0px"),outer.css("left","0px"),outer.css("visibility","hidden"),outer.css("width","200px"),outer.css("height","150px"),outer.css("overflow","hidden"),outer.append(inner),$document.find("body").append(outer),w1=inner[0].offsetWidth,outer.css("overflow","scroll"),w2=inner[0].offsetWidth,w1===w2&&(w2=outer[0].clientWidth),outer.remove(),w1-w2}var scrollbarWidth;return{setWindowTitle:function(title){var textToAppend=bbWindowConfig.productName;textToAppend&&(title=title||"",title&&(title+=" - "),title+=textToAppend),$timeout(function(){$window.document.title=title})},getScrollbarWidth:function(){return scrollbarWidth||0===scrollbarWidth||(scrollbarWidth=calculateScrollbarWidth()),scrollbarWidth},isIosUserAgent:function(){return/iPad|iPod|iPhone/i.test($window.navigator.userAgent)}}}])}(),function(){"use strict";angular.module("sky.wizard",["sky.resources","ui.bootstrap.tabs"]).directive("bbWizard",function(){return{link:function(scope,el){el.addClass("bb-wizard")},restrict:"A"}}).directive("bbWizardStepComplete",function(){return{link:function(scope,el,attrs){scope.$watch(attrs.bbWizardStepComplete,function(newValue){el[newValue?"addClass":"removeClass"]("bb-wizard-step-complete")})}}}).factory("bbWizardNavigator",["bbResources",function(bbResources){function stepIsDisabled(step){return angular.isFunction(step.disabled)&&step.disabled()}return{init:function(options){function getPreviousStep(){var i,n,previousStep,step;for(i=0,n=steps.length;n>i;i++)if(step=steps[i],step.active&&i>0){if(previousStep=steps[i-1],!stepIsDisabled(previousStep))return previousStep;break}return null}function getNextStep(){var i,n,nextStep,step;for(i=0,n=steps.length;n>i;i++)if(step=steps[i],step.active&&n>i+1){if(nextStep=steps[i+1],!stepIsDisabled(nextStep))return nextStep;break}return null}function setActiveStep(step){step&&(step.active=!0)}function lastStepIsActive(){return steps[steps.length-1].active}var steps,finish;return options=options||{},steps=options.steps,finish=options.finish,{previousText:function(){return bbResources.wizard_navigator_previous},nextText:function(){return lastStepIsActive()?bbResources.wizard_navigator_finish:bbResources.wizard_navigator_next},goToPrevious:function(){setActiveStep(getPreviousStep())},goToNext:function(){lastStepIsActive()?angular.isFunction(finish)&&finish():setActiveStep(getNextStep())},previousDisabled:function(){return!getPreviousStep()},nextDisabled:function(){return!getNextStep()&&!lastStepIsActive()}}}}}])}(),function(){"use strict";var modules=["sky.actionbar","sky.alert","sky.autofocus","sky.autonumeric","sky.avatar","sky.card","sky.check","sky.checklist","sky.chevron","sky.contextmenu","sky.data","sky.datepicker","sky.daterangepicker","sky.error","sky.format","sky.grids","sky.help","sky.helpbutton","sky.highlight","sky.mediabreakpoints","sky.modal","sky.moment","sky.navbar","sky.omnibar","sky.palette","sky.page","sky.pagesummary","sky.pagination","sky.popover","sky.reorder","sky.repeater","sky.resources","sky.scrollintoview","sky.searchfield","sky.selectfield","sky.tabscroll","sky.tabset","sky.tabsref","sky.templates","sky.templating","sky.textexpand","sky.tiles","sky.tooltip","sky.utilities","sky.validation","sky.viewkeeper","sky.wait","sky.window","sky.wizard"];try{angular.module("toastr"),modules.push("sky.toast")}catch(ignore){}try{angular.module("ngFileUpload"),modules.push("sky.fileattachments")}catch(ignore){}angular.module("sky",modules)}(),function(){"use strict";var bbResourcesOverrides;bbResourcesOverrides={action_bar_actions:"Actions",alert_close:"Close",autonumeric_abbr_billions:"b",autonumeric_abbr_millions:"m",autonumeric_abbr_thousands:"k",avatar_error_not_image_description:"Please choose a file that is a valid image.",avatar_error_not_image_title:"File is not an image.",avatar_error_too_large_description:"Please choose an image that is less than {0}.",avatar_error_too_large_title:"File is too large.",checklist_select_all:"Select all",checklist_clear_all:"Clear all",checklist_no_items:"No items found",chevron_collapse:"Collapse",chevron_expand:"Expand",context_menu_default_label:"Context menu",grid_back_to_top:"Back to top",grid_column_picker_all_categories:"All",grid_column_picker_description_header:"Description",grid_column_picker_header:"Choose columns to show in the list",grid_column_picker_name_header:"Column",grid_column_picker_search_placeholder:"Search by name",grid_column_picker_submit:"Apply changes",grid_columns_button:" Choose columns",grid_filters_apply:"Apply filters",grid_filters_button:"Filters",grid_filters_clear:"Clear",grid_filters_header:"Filter",grid_filters_hide:"Hide",grid_filters_summary_header:"Filter:",grid_load_more:"Load more",grid_search_placeholder:"Find in this list",grid_column_picker_search_no_columns:"No columns found",modal_footer_cancel_button:"Cancel",modal_footer_primary_button:"Save",month_short_april:"Apr",month_short_august:"Aug",month_short_december:"Dec",month_short_february:"Feb",month_short_january:"Jan",month_short_july:"Jul",month_short_june:"Jun",month_short_march:"Mar",month_short_may:"May",month_short_november:"Nov",month_short_october:"Oct",month_short_september:"Sep",page_noaccess_button:"Return to a non-classified page",page_noaccess_description:"Sorry, you don't have rights to this page.\nIf you feel you should, please contact your system administrator.",page_noaccess_header:"Move along, there's nothing to see here",text_expand_see_less:"See less",text_expand_see_more:"See more",text_expand_modal_title:"Expanded view",text_expand_close_text:"Close",grid_action_bar_clear_selection:"Clear selection",grid_action_bar_cancel_mobile_actions:"Cancel",grid_action_bar_choose_action:"Choose an action",date_field_invalid_date_message:"Please enter a valid date",date_range_picker_this_week:"This week",date_range_picker_last_week:"Last week",date_range_picker_next_week:"Next week",date_range_picker_this_month:"This month",date_range_picker_last_month:"Last month",date_range_picker_next_month:"Next month",date_range_picker_this_calendar_year:"This calendar year",date_range_picker_last_calendar_year:"Last calendar year",date_range_picker_next_calendar_year:"Next calendar year",date_range_picker_this_fiscal_year:"This fiscal year",date_range_picker_last_fiscal_year:"Last fiscal year",date_range_picker_next_fiscal_year:"Next fiscal year",date_range_picker_this_quarter:"This quarter",date_range_picker_last_quarter:"Last quarter",date_range_picker_next_quarter:"Next quarter",date_range_picker_at_any_time:"At any time",date_range_picker_today:"Today",date_range_picker_tomorrow:"Tomorrow",date_range_picker_yesterday:"Yesterday",date_range_picker_specific_range:"Specific range",date_range_picker_filter_description_this_week:"{0} for this week",date_range_picker_filter_description_last_week:"{0} from last week",date_range_picker_filter_description_next_week:"{0} for next week",date_range_picker_filter_description_this_month:"{0} for this month",date_range_picker_filter_description_last_month:"{0} from last month",date_range_picker_filter_description_next_month:"{0} for next month",date_range_picker_filter_description_this_calendar_year:"{0} for this calendar year",date_range_picker_filter_description_last_calendar_year:"{0} from last calendar year",date_range_picker_filter_description_next_calendar_year:"{0} for next calendar year",date_range_picker_filter_description_this_fiscal_year:"{0} for this fiscal year",date_range_picker_filter_description_last_fiscal_year:"{0} from last fiscal year",date_range_picker_filter_description_next_fiscal_year:"{0} for next fiscal year",date_range_picker_filter_description_this_quarter:"{0} for this quarter",date_range_picker_filter_description_last_quarter:"{0} from last quarter",date_range_picker_filter_description_next_quarter:"{0} for next quarter",date_range_picker_filter_description_at_any_time:"{0} at any time",date_range_picker_filter_description_today:"{0} for today",date_range_picker_filter_description_yesterday:"{0} from yesterday",date_range_picker_filter_description_tomorrow:"{0} for tomorrow",date_range_picker_filter_description_specific_range:"{0} from {1} to {2}",date_range_picker_from_date:"From date",date_range_picker_to_date:"To date",date_range_picker_min_date_error:"End date must be after start date",date_range_picker_max_date_error:"Start date must be before end date",errormodal_ok:"OK",error_description_broken:"Try to refresh this page or come back later.",error_description_construction:"Thanks for your patience while improvements are made!\nPlease check back in a little while.",error_title_broken:"Sorry, something went wrong.",error_title_construction:"This page will return soon.",error_title_notfound:"Sorry, we can't reach that page.",file_size_b_plural:"{0} bytes",file_size_b_singular:"{0} byte",file_size_kb:"{0} KB",file_size_mb:"{0} MB",file_size_gb:"{0} GB",file_upload_drag_file_here:"Drag a file here",file_upload_drop_files_here:"Drop files here",file_upload_invalid_file:"This file type is invalid",file_upload_link_placeholder:"http://www.something.com/file",file_upload_or_click_to_browse:"or click to browse",file_upload_paste_link:"Paste a link to a file",file_upload_paste_link_done:"Done",searchfield_searching:"Searching...",searchfield_no_records:"Sorry, no matching records found",selectfield_summary_text:"{0} items selected",selectfield_remove:"Remove",selectfieldpicker_select:"Select",selectfieldpicker_select_value:"Select value",selectfieldpicker_select_values:"Select values",selectfieldpicker_clear:"Clear selection",wizard_navigator_finish:"Finish",wizard_navigator_next:"Next",wizard_navigator_previous:"Previous",datepicker_today:"Today",datepicker_clear:"Clear",datepicker_close:"Done",reorder_top:"Top"},angular.module("sky.resources").config(["bbResources",function(bbResources){angular.extend(bbResources,bbResourcesOverrides)}])}(),angular.module("sky.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("sky/templates/actionbar/actionbar.html",'<div class="bb-action-bar">\n    <ng-transclude></ng-transclude>\n</div>\n'),$templateCache.put("sky/templates/actionbar/actionbaritem.html",'<button class="btn bb-btn-secondary bb-action-bar-item-button" type="button">\n    <ng-transclude></ng-transclude>\n</button>\n'),$templateCache.put("sky/templates/actionbar/actionbaritemgroup.html",'<div class="bb-action-bar-group">\n    <div class="bb-action-bar-buttons hidden-xs">\n        <ng-transclude />\n    </div>\n    <div class="bb-action-bar-dropdown hidden-sm hidden-md hidden-lg">\n        <div uib-dropdown>\n             <button class="btn bb-btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">\n            {{bbActionBarItemGroup.title}}<span class="caret"/>\n            </button>\n\n            <ul uib-dropdown-menu>\n\n            </ul>\n        </div>\n    </div>\n</span>\n'),$templateCache.put("sky/templates/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (bbAlert.bbAlertType || \'warning\'), bbAlert.bbAlertCloseable === \'true\' ? \'alert-dismissible\' : null]" ng-show="!bbAlert.bbAlertClosed" role="alert">\n    <button ng-show="bbAlert.bbAlertCloseable === \'true\'" type="button" class="close" ng-click="bbAlert.close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">{{\'alert_close\' | bbResources}}</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n'),$templateCache.put("sky/templates/avatar/avatar.directive.html",'<div class="bb-avatar" ng-switch="bbAvatar.canChange">\n  <div ng-switch-when="true">\n    <div\n       class="bb-avatar-file-drop"\n       bb-file-drop\n       bb-file-drop-change="bbAvatar.photoDrop(files, rejectedFiles)"\n       bb-file-drop-accept="\'image/*\'"\n       >\n      <ng-include src="\'sky/templates/avatar/avatarinner.include.html\'" onload="bbAvatar.onTemplateLoad()"></ng-include>\n    </div>\n  </div>\n  <div ng-switch-default>\n    <ng-include src="\'sky/templates/avatar/avatarinner.include.html\'" onload="bbAvatar.onTemplateLoad()"></ng-include>\n  </div>\n</div>\n'),$templateCache.put("sky/templates/avatar/avatarinner.include.html",'<div class="bb-avatar-wrapper">\n  <div class="bb-avatar-image" ng-show="bbAvatar.bbAvatarSrc"></div>\n  <canvas class="bb-avatar-initials" ng-show="bbAvatar.showInitials()"></canvas>\n</div>\n'),$templateCache.put("sky/templates/card/card.directive.html",'<section class="bb-card" ng-class="bbCard.getClass()">\n  <header ng-show="bbCard.headingLeftCtrl || bbCard.titleCtrl || bbCard.headingRightCtrl || bbCard.bbCardSelectable">\n    <label class="bb-card-header">\n      <div class="bb-card-heading-left" ng-if="bbCard.headingLeftCtrl"></div>\n      <div class="bb-card-heading-middle">\n        <h1 class="bb-card-title" ng-if="bbCard.titleCtrl"></h1>\n      </div>\n      <div class="bb-card-heading-right" ng-if="bbCard.headingRightCtrl &amp;&amp; !bbCard.bbCardSelectable"></div>\n      <div class="bb-card-check" ng-if="bbCard.bbCardSelectable">\n        <input type="checkbox" id="{{bbCard.cardCheckId}}" bb-check ng-model="bbCard.bbCardSelected"  />\n      </div>\n    </label>\n  </header>\n  <label class="bb-card-content" for="{{bbCard.cardCheckId}}"></label>\n  <div class="bb-card-actions" ng-if="bbCard.actionsCtrl"></div>\n  <ng-transclude></ng-transclude>\n</section>\n'),
$templateCache.put("sky/templates/check/styled.html",'<span role="checkbox" tabindex="-1"></span>\n'),$templateCache.put("sky/templates/check/wrapper.html",'<label class="bb-check-wrapper"></label>\n'),$templateCache.put("sky/templates/checklist/checklist.directive.html",'<div>\n  <div>\n    <div ng-if="bbChecklist.bbChecklistIncludeSearch" class="bb-checklist-filter-bar">\n      <div class="bb-checklist-search">\n        <input type="text" class="bb-checklist-search-box" maxlength="255" placeholder="{{bbChecklist.bbChecklistSearchPlaceholder}}" ng-model="bbChecklist.searchText" ng-model-options="{debounce: bbChecklist.bbChecklistSearchDebounce}" data-bbauto-field="ChecklistSearch">\n        <div class="bb-checklist-search-icon">\n          <i class="fa fa-search"></i>\n        </div>\n      </div>\n    </div>\n    <div ng-if="bbChecklist.bbChecklistCategories &amp;&amp; bbChecklist.bbChecklistCategories.length > 0" class="bb-checklist-filter-bar bb-checklist-category-bar">\n      <button type="button" class="btn btn-sm" ng-click="bbChecklist.filterByCategory()" ng-class="bbChecklist.selectedCategory ? \'btn-default\' : \'btn-primary\'">{{\'grid_column_picker_all_categories\' | bbResources}}</button>\n      <button ng-repeat="category in bbChecklist.bbChecklistCategories" type="button" class="btn btn-sm" ng-click="bbChecklist.filterByCategory(category)" ng-class="bbChecklist.selectedCategory === category ? \'btn-primary\' : \'btn-default\'">{{category}}</button>\n    </div>\n    <div class="bb-checklist-filter-bar bb-checklist-select-all-bar" ng-show="!bbChecklist.isSingleSelect()">\n      <button type="button" class="btn btn-link" data-bbauto-field="ChecklistSelectAll" ng-click="bbChecklist.selectAll()">{{\'checklist_select_all\' | bbResources}}</button>\n      <button type="button" class="btn btn-link" data-bbauto-field="ChecklistClear" ng-click="bbChecklist.clear()">{{\'checklist_clear_all\' | bbResources}}</button>\n    </div>\n  </div>\n  <div class="bb-checklist-wrapper" bb-wait="bbChecklist.bbChecklistIsLoading" ng-switch="bbChecklist.bbChecklistMode" ng-class="bbChecklist.getChecklistCls()">\n    <div ng-switch-when="list" data-bbauto-repeater="ChecklistItems" data-bbauto-repeater-count="{{bbChecklist.filteredItems.length}}">\n      <div ng-switch="bbChecklist.isSingleSelect()">\n        <div ng-switch-when="true">\n          <button ng-repeat="item in bbChecklist.filteredItems" type="button" class="bb-checklist-list-row" ng-class="bbChecklist.getRowCls(item)" data-bbauto-field="{{item.name}}" ng-click="bbChecklist.singleSelectRowClick(item)">\n            <ng-include class="bb-checklist-list-col" src="\'sky/templates/checklist/checklistlistrow.include.html\'"></ng-include>\n          </button>\n        </div>\n        <div ng-switch-default>\n          <label ng-repeat="item in bbChecklist.filteredItems" class="bb-checklist-list-row" ng-class="bbChecklist.getRowCls(item)" data-bbauto-field="{{item.name}}">\n            <div class="bb-checklist-list-col bb-checklist-list-col-checkbox">\n              <input bb-check type="checkbox" checklist-model="bbChecklist.bbChecklistSelectedItems" checklist-value="item" checklist-select-style="bbChecklist.bbChecklistSelectStyle" />\n            </div>\n            <ng-include class="bb-checklist-list-col" src="\'sky/templates/checklist/checklistlistrow.include.html\'"></ng-include>\n          </label>\n        </div>\n      </div>\n    </div>\n    <table class="table bb-checklist-table" ng-switch-default>\n      <thead>\n        <tr>\n          <th class="bb-checklist-checkbox-column"></th>\n          <th ng-repeat="column in bbChecklist.columns" class="{{column.class}}" ng-style="{\'width\': column.width}">{{column.caption}}</th>\n        </tr>\n      </thead>\n      <tbody bb-highlight="bbChecklist.searchText" bb-highlight-beacon="bbChecklist.highlightRefresh" data-bbauto-repeater="ChecklistItems" data-bbauto-repeater-count="{{bbChecklist.filteredItems.length}}">\n        <tr ng-repeat="item in bbChecklist.filteredItems" ng-click="bbChecklist.rowClicked(item);" class="bb-checklist-row">\n          <td>\n            <input bb-check type="checkbox" checklist-model="bbChecklist.bbChecklistSelectedItems" checklist-value="item" data-bbauto-field="{{item[bbChecklist.bbChecklistAutomationField]}}" />\n          </td>\n          <td ng-repeat="column in bbChecklist.columns" class="{{column.class}}" data-bbauto-field="{{column.automationId}}" data-bbauto-index="{{$parent.$index}}">{{item[column.field]}}</td>\n        </tr>\n      </tbody>\n    </table>\n    <div class="bb-checklist-no-items" ng-if="!bbChecklist.filteredItems.length">{{bbChecklist.bbChecklistNoItemsMessage || (\'checklist_no_items\' | bbResources)}}</div>\n  </div>\n  <div ng-transclude></div>\n</div>\n'),$templateCache.put("sky/templates/checklist/checklistlistrow.include.html",'<div>\n  <div class="bb-checklist-list-title" bb-highlight="bbChecklist.searchText" ng-bind="item.title"></div>\n  <div class="bb-checklist-list-description" bb-highlight="bbChecklist.searchText" ng-bind="item.description"></div>\n</div>\n'),$templateCache.put("sky/templates/chevron/chevron.directive.html",'<button type="button" class="bb-chevron" ng-class="bbChevron.getCls()" ng-click="bbChevron.click($event)" aria-label="{{bbChevron.getLabel()}}">\n  <i class="bb-chevron-part bb-chevron-left"></i>\n  <i class="bb-chevron-part bb-chevron-right"></i>\n</button>\n'),$templateCache.put("sky/templates/contextmenu/contextmenu.html",'<div class="bb-context-menu" data-bbauto-field="ContextMenuActions" uib-dropdown>\n    <bb-context-menu-button data-bbauto-field="ContextMenuAnchor" ng-click="bbContextMenu.contextButtonStopPropagation($event)" uib-dropdown-toggle></bb-context-menu-button>\n    <ul uib-dropdown-menu role="menu">\n        <ng-transclude></ng-transclude>\n    </ul>\n</div>\n'),$templateCache.put("sky/templates/contextmenu/menubutton.html",'<button type="button" class="btn bb-btn-secondary bb-context-menu-btn" aria-label="{{bbContextMenuButton.getAriaLabel()}}">\n  <i class="fa fa-ellipsis-h"></i>\n</button>\n'),$templateCache.put("sky/templates/contextmenu/menuitem.html",'<li role="presentation">\n  <a role="menuitem" href="javascript:void(0)" ng-click="bbContextMenuItem.clickItem()">\n    <ng-transclude></ng-transclude>\n  </a>\n</li>\n'),$templateCache.put("sky/templates/contextmenu/submenu.html",'<div class="bb-submenu">\n    <uib-accordion>\n        <uib-accordion-group is-open="bbSubmenu.accordionOpen">\n            <uib-accordion-heading ng-if="bbSubmenu.staticHeader">\n                <div ng-click="bbSubmenu.toggleAccordion($event)">\n                    <span>\n                        {{bbSubmenu.heading}}\n                    <span>\n                    <i ng-class="\'fa-chevron-\' + (bbSubmenu.accordionOpen ? \'up\' : \'down\')" class="fa bb-submenu-chevron"></i>\n                </div>\n            </uib-accordion-heading>\n            <ng-transclude></ng-transclude>\n        </uib-accordion-group>\n    </uib-accordion>\n</div>\n'),$templateCache.put("sky/templates/contextmenu/submenuheading.html","<uib-accordion-heading>\n    <div ng-click=\"bbSubmenuHeading.toggleAccordion($event)\">\n        <ng-transclude></ng-transclude>\n        <i ng-class=\"'fa-chevron-' + (bbSubmenuHeading.accordionOpen ? 'up' : 'down')\" class=\"fa bb-submenu-chevron\"></i>\n    </div>\n</uib-accordion-heading>\n"),$templateCache.put("sky/templates/datefield/datefield.html",'<span class="add-on input-group-btn">\n    <button type="button" class="btn btn-default bb-date-field-calendar-button">\n        <i class="fa fa-calendar"></i>\n    </button>\n</span>\n'),$templateCache.put("sky/templates/datepicker/datepicker.html",'<div>\n    <div ng-if="locals.loaded" class="input-group bb-datefield">\n        <input\n          name="{{locals.inputName}}"\n          type="text"\n\n          ng-keydown="locals.enterPress($event)"\n\n          class="form-control"\n          ng-model="locals.date"\n          is-open="locals.opened"\n          datepicker-options="locals.dateOptions"\n          uib-datepicker-popup="{{format}}"\n          show-button-bar="locals.showButtonBar"\n          current-text="{{resources.datepicker_today}}"\n          clear-text="{{resources.datepicker_clear}}"\n          close-text="{{resources.datepicker_close}}"\n          datepicker-append-to-body="{{locals.appendToBody}}"\n          close-on-date-selection="{{locals.closeOnSelection}}"\n          bb-datepicker-custom-validate="{{locals.hasCustomValidation}}"\n          placeholder="{{placeholderText}}"\n          max-date="maxDate"\n          min-date="minDate"\n          ng-required="locals.required"\n          bb-min-date\n          bb-max-date />\n        <span class="bb-datepicker-button-container add-on input-group-btn" ng-class="{\'bb-datefield-open\': locals.opened}">\n            <button type="button" class="btn btn-default bb-date-field-calendar-button" ng-click="locals.open($event)">\n                <i class="fa fa-calendar"></i>\n            </button>\n        </span>\n    </div>\n</div>\n'),$templateCache.put("sky/templates/daterangepicker/daterangepicker.html",'<div class="form-inline" ng-form="bbDateRangePickerCtrl.dateRangeForm">\n    <div class="form-group bb-date-range-picker-form-group">\n      <label class="bb-date-range-picker-label" ng-if="bbDateRangePickerCtrl.pickerLabel && !bbDateRangePickerCtrl.noLabels">{{bbDateRangePickerCtrl.pickerLabel}}</label>\n      <select data-bbauto-field="{{bbDateRangePickerCtrl.bbDateRangePickerAutomationId}}_DateRangeType"\n        class="form-control"\n        ng-options="bbDateRangePickerCtrl.getDateRangeTypeCaption(t) for t in (bbDateRangePickerCtrl.bbDateRangePickerOptions.availableDateRangeTypes || bbDateRangePickerCtrl.defaultDateRangeOptions)"\n        ng-model="bbDateRangePickerCtrl.bbDateRangePickerValue.dateRangeType" />\n    </div>\n    <div class="form-group bb-date-range-picker-form-group" ng-if="bbDateRangePickerCtrl.specificRangeIsVisible">\n      <label class="bb-date-range-picker-label" ng-if="!bbDateRangePickerCtrl.noLabels">{{::bbDateRangePickerCtrl.resources.date_range_picker_from_date}}</label>\n      <bb-datepicker ng-model="bbDateRangePickerCtrl.fromDate" max-date="bbDateRangePickerCtrl.maxDate" bb-datepicker-name="fromDate" datepicker-append-to-body="true" placeholder="bbDateRangePickerCtrl.fromPlaceholder"></bb-datepicker>\n      <label class="bb-date-range-picker-date-format-error error" ng-show="bbDateRangePickerCtrl.dateRangeForm.fromDate.$error.dateFormat">{{::bbDateRangePickerCtrl.resources.date_field_invalid_date_message}}</label>\n      <label class="bb-date-range-picker-date-max-error error" ng-show="bbDateRangePickerCtrl.dateRangeForm.fromDate.$error.maxDate">{{::bbDateRangePickerCtrl.resources.date_range_picker_max_date_error}}</label>\n    </div>\n    <div class="form-group bb-date-range-picker-form-group" ng-if="bbDateRangePickerCtrl.specificRangeIsVisible">\n      <label class="bb-date-range-picker-label" ng-if="!bbDateRangePickerCtrl.noLabels">{{::bbDateRangePickerCtrl.resources.date_range_picker_to_date}}</label>\n      <bb-datepicker ng-model="bbDateRangePickerCtrl.toDate" min-date="bbDateRangePickerCtrl.minDate" bb-datepicker-name="toDate" datepicker-append-to-body="true" placeholder="bbDateRangePickerCtrl.toPlaceholder"></bb-datepicker>\n      <label class="bb-date-range-picker-date-format-error error" ng-show="bbDateRangePickerCtrl.dateRangeForm.toDate.$error.dateFormat">{{::bbDateRangePickerCtrl.resources.date_field_invalid_date_message}}</label>\n      <label class="bb-date-range-picker-date-min-error error" ng-show="bbDateRangePickerCtrl.dateRangeForm.toDate.$error.minDate">{{::bbDateRangePickerCtrl.resources.date_range_picker_min_date_error}}</label>\n    </div>\n</div>\n'),$templateCache.put("sky/templates/error/error.description.directive.html",'<div class="bb-error-description-container">\n  <span ng-if="bbErrorDescription.description">{{bbErrorDescription.description}}</span>\n</div>\n<ng-transclude></ng-transclude>\n'),$templateCache.put("sky/templates/error/error.directive.html",'<div class="row bb-error">\n  <section class="col-xs-12 text-center">\n    <div class="bb-error-image" ng-show="bbError.imageCtrl">\n      <bb-error-image error-default error-type="{{bbError.imageType}}" ng-if="bbError.imageType !== \'\' && !bbError.imageHasOverride">\n      </bb-error-image>\n    </div>\n    <div class="bb-error-title" ng-show="bbError.titleCtrl">\n      <bb-error-title error-default error-type="{{bbError.titleType}}" ng-if="bbError.titleType !== \'\' && !bbError.titleHasOverride">\n      </bb-error-title>\n    </div>\n    <div class="bb-error-description" ng-show="bbError.descriptionCtrl">\n      <bb-error-description error-default error-type="{{bbError.descriptionType}}" ng-if="bbError.descriptionType !== \'\' && !bbError.descriptionHasOverride">\n      </bb-error-description>\n    </div>\n    <div class="bb-error-action" ng-show="bbError.actionCtrl"></div>\n    <ng-transclude></ng-transclude>\n  </section>\n</div>\n'),$templateCache.put("sky/templates/error/error.image.directive.html",'<div ng-if="bbErrorImage.bbErrorType" class="bb-error-image-container">\n  <div class="bb-error-image-broken" ng-if="bbErrorImage.bbErrorType === \'broken\'">\n  </div>\n\n  <div class="bb-error-image-construction" ng-if="bbErrorImage.bbErrorType === \'construction\'">\n  </div>\n\n  <div class="bb-error-image-notfound" ng-if="bbErrorImage.bbErrorType === \'notFound\'">\n  </div>\n</div>\n<ng-transclude></ng-transclude>\n'),$templateCache.put("sky/templates/error/error.title.directive.html",'<div class="bb-error-title-container">\n  <span ng-if="bbErrorTitle.title">{{bbErrorTitle.title}}</span>\n  <ng-transclude></ng-transclude>\n</div>\n'),$templateCache.put("sky/templates/error/errormodal.template.html",'<bb-modal>\n  <div class="modal-form">\n    <div bb-modal-body>\n      <bb-error>\n        <bb-error-title>\n          {{bbErrorModal.options.errorTitle}}\n        </bb-error-title>\n        <bb-error-description>\n          {{bbErrorModal.options.errorDescription}}\n        </bb-error-description>\n        <bb-error-action>\n          <button type="button" class="btn btn-primary" ng-click="bbErrorModal.close()">{{\'errormodal_ok\' | bbResources}}</button>\n        </bb-error-action>\n      </bb-error>\n    </div>\n  </div>\n</bb-modal>\n'),$templateCache.put("sky/templates/fileattachments/filedrop.html",'<div class="row bb-file-drop-row">\n    <div class="col-xs-12 bb-file-drop-col" ng-class="{\'col-sm-6\': bbFileDrop.allowLinks}">\n        <div\n             class="bb-file-drop bb-file-drop-target"\n             ngf-drop\n             ngf-keep="false"\n             ngf-drag-over-class="{accept: \'bb-file-drop-accept\', reject: \'bb-file-drop-reject\'}"\n             ngf-change="bbFileDrop.fileChange($files, $event, $invalidFiles)"\n             >\n            <div class="bb-file-drop-contents" ng-if="!bbFileDrop.hasTranscludeContents">\n                <div class="bb-file-drop-contents-not-over">\n                    <h4>{{\'file_upload_drag_file_here\' | bbResources}}</h4>\n                    <h5>{{\'file_upload_or_click_to_browse\' | bbResources}}</h5>\n                    <i class="fa fa-cloud-upload bb-file-upload-icon"></i>\n                </div>\n                <div class="bb-file-drop-contents-accept">\n                    <h4>{{\'file_upload_drop_files_here\' | bbResources}}</h4>\n                    <i class="fa fa-bullseye bb-file-upload-icon"></i>\n                </div>\n                <div class="bb-file-drop-contents-reject">\n                    <h4>{{\'file_upload_invalid_file\' | bbResources}}</h4>\n                    <i class="fa fa-times-circle bb-file-upload-icon"></i>\n                </div>\n            </div>\n            <div class="bb-file-drop-contents-custom" ng-transclude></div>\n        </div>\n    </div>\n    <div class="col-sm-6 col-xs-12 bb-file-drop-col" ng-if="bbFileDrop.allowLinks">\n        <div class="bb-file-drop-contents">\n            <div class="bb-file-drop-link">\n                <h4 class="bb-file-drop-link-header">{{\'file_upload_paste_link\' | bbResources}}</h4>\n                <div class="form-group">\n                    <input\n                           type="text"\n                           class="form-control"\n                           placeholder="{{\'file_upload_link_placeholder\' | bbResources}}"\n                           ng-model="bbFileDrop.url"\n                           ng-keypress="$event.keyCode === 13 &amp;&amp; bbFileDrop.addLink($event)"\n                           />\n                </div>\n                <button type="button" class="btn btn-primary" ng-disabled="!bbFileDrop.url" ng-click="bbFileDrop.addLink($event)">\n                    {{\'file_upload_paste_link_done\' | bbResources}}\n                </button>\n            </div>\n        </div>\n    </div>\n</div>\n'),$templateCache.put("sky/templates/fileattachments/fileitem.html",'<div class="bb-file-item">\n    <div class="row bb-file-item-title">\n        <div class="col-xs-10">\n            <div class="bb-file-item-name">\n                <strong>{{item.name || item.url}}</strong>\n            </div>\n            <div class="bb-file-item-size" ng-if="bbFileItem.isFile()">\n                ({{item.size | bbFileSize}})\n            </div>\n        </div>\n        <div class="col-xs-2">\n            <div class="pull-right">\n                <button type="button" class="btn bb-btn-secondary bb-file-item-btn-delete" ng-click="itemDelete()">\n                    <i class="glyphicon glyphicon-trash"></i>\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="row">\n        <div ng-switch="bbFileItem.isImg()" class="col-xs-3">\n            <div ng-switch-when="true" class="center-block">\n              <img ng-if="item.url" class="bb-file-item-preview-img" ng-src="{{item.url}}" />\n              <img ng-if="!item.url" class="bb-file-item-preview-img" ngf-src="item" />\n            </div>\n            <div ng-switch-when="false" class="bb-file-item-preview-other">\n                <i class="fa" ng-class="bbFileItem.otherCls"></i>\n            </div>\n        </div>\n        <div class="col-xs-9" ng-transclude>\n        </div>\n    </div>\n</div>\n'),$templateCache.put("sky/templates/grids/actionbar.html",'<div ng-show="locals.showActionBar" data-bbauto-view="GridActionBar">\n    <div ng-if="!locals.showMobileActions" class="bb-grid-action-bar">\n        <div ng-if="!locals.mobileButtons" class="bb-grid-action-bar-buttons" ng-repeat="action in locals.actions">\n            <button type="button" class="btn" ng-class="{\'btn-primary\': action.isPrimary, \'bb-btn-secondary\': !action.isPrimary}" data-bbauto-field="{{action.automationId}}" ng-click="action.actionCallback()" ng-disabled="action.selections.length < 1">{{action.title}} ({{action.selections.length}})</button>\n        </div>\n        <div ng-if="locals.mobileButtons" class="bb-grid-action-bar-buttons">\n            <button type="button" class="btn btn-primary" ng-click="locals.chooseAction()">\n                <span>{{resources.grid_action_bar_choose_action}}</span>\n            </button>\n        </div>\n        <button type="button" class="btn bb-grid-action-bar-clear-selection" ng-click="locals.clearSelection()">\n            {{resources.grid_action_bar_clear_selection}}\n        </button>\n    </div>\n    <div ng-if="locals.showMobileActions" class="bb-grid-action-bar-mobile-buttons">\n        <div class="bb-grid-action-bar-btn-container">\n            <div ng-repeat="action in locals.actions">\n                <button type="button" class="bb-grid-action-bar-mobile-btn btn btn-block btn-lg" ng-class="{\'btn-primary\': action.isPrimary, \'bb-btn-secondary\': !action.isPrimary}" ng-click="action.actionCallback()" ng-disabled="action.selections.length < 1">{{action.title}} ({{action.selections.length}})</button>\n            </div>\n        </div>\n        <button type="button" class="btn bb-grid-action-bar-mobile-cancel bb-grid-action-bar-clear-selection" ng-click="locals.cancelChooseAction()">\n            {{resources.grid_action_bar_cancel_mobile_actions}}\n        </button>\n    </div>\n</div>\n'),$templateCache.put("sky/templates/grids/columnpicker.html",'<bb-modal data-bbauto-view="ColumnPicker">\n  <bb-modal-header bb-modal-help-key="$parent.columnPickerHelpKey">{{\'grid_column_picker_header\' | bbResources}}</bb-modal-header>\n  <div bb-modal-body>\n    <bb-checklist\n                  bb-checklist-items="columns" \n                  bb-checklist-selected-items="locals.selectedColumns" \n                  bb-checklist-include-search="\'true\'" \n                  bb-checklist-search-placeholder="{{\'grid_column_picker_search_placeholder\' | bbResources}}" \n                  bb-checklist-no-items-message="{{\'grid_column_picker_search_no_columns\' | bbResources}}"\n                  bb-checklist-categories="categories" \n                  bb-checklist-mode="list" \n                  bb-checklist-filter-local\n                  >\n    </bb-checklist>\n  </div>\n  <bb-modal-footer>\n    <bb-modal-footer-button-primary data-bbauto-field="ColumnPickerSubmit" ng-click="applyChanges()">{{\'grid_column_picker_submit\' | bbResources}}</bb-modal-footer-button-primary>\n    <bb-modal-footer-button-cancel data-bbauto-field="ColumnPickerCancel"></bb-modal-footer-button-cancel>\n  </bb-modal-footer>\n</bb-modal>'),$templateCache.put("sky/templates/grids/dropdown.html",'<div class="bb-context-menu" data-bbauto-field="ContextMenuActions" uib-dropdown dropdown-append-to-body ng-if="locals.items.length > 0" is-open="locals.is_open">\n    <bb-context-menu-button data-bbauto-field="ContextMenuAnchor" ng-click="locals.toggleDropdown($event)">\n    </bb-context-menu-button>\n    <ul uib-dropdown-menu role="menu">\n        <bb-context-menu-item ng-repeat="item in locals.items" bb-context-menu-action="item.cmd()">{{item.title}}</bb-context-menu-item>\n    </ul>\n</div>\n'),$templateCache.put("sky/templates/grids/filters.html",'<div style="display:none;">\n    <div bb-scrolling-view-keeper="viewKeeperOptions" class="bb-grid-filters grid-filters">\n        <div class="bb-grid-filters-box" bb-scroll-into-view="locals.expanded">\n            <div class="bb-grid-filters-icon" ng-click="locals.expanded = !locals.expanded"></div>\n            <div class="bb-grid-filters-container" style="display:none;">\n                <div class="bb-grid-filters-header" ng-click="locals.expanded = !locals.expanded">\n                    <h4 class="bb-grid-filters-header-title">{{resources.grid_filters_header}}</h4>\n                    <span class="bb-grid-filters-header-hide">{{resources.grid_filters_hide}}</span>\n                </div>\n                <div class="bb-grid-filters-body" ng-transclude></div>\n                <div class="bb-grid-filters-footer">\n                    <button data-bbauto-field="ApplyGridFilters" class="btn btn-primary" type="submit" ng-click="applyFilters()">{{resources.grid_filters_apply}}</button>\n                    <button data-bbauto-field="ClearGridFilters" class="btn bb-btn-secondary" type="button" ng-click="clearFilters()">{{resources.grid_filters_clear}}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),$templateCache.put("sky/templates/grids/filtersgroup.html",'<div class="form-group" ng-class="isCollapsed ? \'collapsed\' : \'collapsible\'">\n    <div ng-click="isCollapsed = !isCollapsed">\n        <i ng-class="\'glyphicon-chevron-\' + (isCollapsed ? \'down\' : \'up\')" class="bb-grid-filters-body-group-header-icon glyphicon"></i>\n        <label>{{bbGridFiltersGroupLabel}}</label>\n    </div>\n    <div class="bb-grid-filters-body-group-content" uib-collapse="!!isCollapsed" ng-transclude></div>\n</div>\n'),$templateCache.put("sky/templates/grids/filterssummary.html",'<div class="toolbar bb-table-toolbar bb-applied-filter-bar">\n    <div class="bb-applied-filter-header">\n        <span>{{resources.grid_filters_summary_header}}</span>\n    </div>\n    <div class="bb-applied-filter-content" ng-click="openFilterMenu()">\n        <span class="bb-applied-filter-text" data-bbauto-field="FilterSummaryText" ng-transclude></span>\n        <span class="fa fa-times close" data-bbauto-field="FilterSummaryRemove" ng-click="clearFilters(); $event.stopPropagation();"></span>\n    </div>\n</div>\n'),$templateCache.put("sky/templates/grids/grid.html",'<section class="bb-grid-container" data-bbauto-grid="{{options.automationId}}" data-bbauto-timestamp="{{locals.timestamp}}" data-bbauto-repeater="{{options.automationId}}" data-bbauto-repeater-count="{{locals.rowcount}}">\n\n\n    <div class="bb-grid-toolbar-viewkeeper">\n        <div ng-if="!customToolbar.hasCustomToolbar">\n            <div ng-show="locals.showToolbar">\n                <bb-grid-toolbar>\n                    <ng-transclude></ng-transclude>\n                </bb-grid-toolbar>\n            </div>\n        </div>\n\n        <div ng-if="customToolbar.hasCustomToolbar">\n            <div ng-show="locals.showToolbar">\n                <ng-transclude></ng-transclude>\n            </div>\n        </div>\n    </div>\n\n    <div class="clearfix"></div>\n\n    <div class="table-responsive" bb-wait="options.loading">\n        <table id="{{locals.gridId}}" class="bb-grid-table" ng-class="{\'grid-multiselect\' : locals.multiselect}"></table>\n        <div class="bb-grid-empty-wait" ng-if="locals.hasWaitAndEmpty()"></div>\n    </div>\n\n    <div ng-if="!paginationOptions" class="bb-table-loadmore" data-bbauto-field="LoadMoreButton" ng-show="options.hasMoreRows" ng-click="locals.loadMore()">\n        <span class="fa fa-cloud-download"></span>\n        <button type="button" class="btn btn-link">{{resources.grid_load_more}}</button>\n    </div>\n\n    <div ng-if="paginationOptions" class="bb-grid-pagination-container">\n        <uib-pagination ng-show="paginationOptions.recordCount > options.data.length" total-items="paginationOptions.recordCount" items-per-page="paginationOptions.itemsPerPage" ng-model="paginationOptions.currentPage" ng-change="paginationOptions.pageChanged()" max-size="paginationOptions.maxPages"></uib-pagination>\n        <div class="clearfix"></div>\n    </div>\n\n    <div class="bb-grid-action-bar-and-back-to-top">\n        <bb-grid-action-bar ng-if="locals.multiselect && multiselectActions && updateMultiselectActions" bb-multiselect-actions="multiselectActions" bb-selections-updated="updateMultiselectActions(selections)">\n        </bb-grid-action-bar>\n        <div class="bb-table-backtotop" data-bbauto-field="BackToTopButton" ng-show="locals.isScrolled" ng-click="locals.backToTop();">\n            <span style="float:left">\n                <span class="fa fa-arrow-up "></span>\n                <button type="button" class="btn btn-link">{{resources.grid_back_to_top}}</button>\n            </span>\n            <span style="float:right">\n                <span class="fa fa-arrow-up "></span>\n                <button type="button" class="btn btn-link">{{resources.grid_back_to_top}}</button>\n            </span>\n            <div class="clearfix"></div>\n        </div>\n    </div>\n</section>\n'),$templateCache.put("sky/templates/grids/gridtoolbar.html",'<div class="bb-grid-toolbar-container">\n    <div class="clearfix toolbar bb-table-toolbar">\n        <button type="button" data-bbauto-field="AddButton" class="bb-grid-toolbar-btn btn-success btn" ng-show="toolbarLocals.hasAdd" ng-click="options.onAddClick()">\n            <i class="fa fa-plus-circle"></i>\n            <span class="bb-toolbar-btn-label" ng-show="options.onAddClickLabel">{{options.onAddClickLabel}}</span>\n        </button>\n        <div class="bb-grid-toolbar-button-container">\n            <ng-transclude></ng-transclude>\n        </div>\n        <div class="bb-search-container search-container">\n            <input type="text" placeholder="{{resources.grid_search_placeholder}}" ng-model="searchText" ng-keyup="$event.keyCode == 13 && toolbarLocals.applySearchText()" data-bbauto-field="SearchBox" />\n            <div class="bb-search-icon fa fa-search" data-bbauto-field="SearchButton" ng-click="toolbarLocals.applySearchText()"></div>\n        </div>\n        <button type="button" class="btn bb-btn-secondary bb-grid-toolbar-btn bb-column-picker-btn" data-bbauto-field="ColumnPickerButton" ng-show="!options.hideColPicker" ng-click="toolbarLocals.openColumnPicker()">\n            <span class="fa fa-columns"></span>\n            <span class="bb-toolbar-btn-label">{{resources.grid_columns_button}}</span>\n        </button>\n        <button type="button" class="btn bb-btn-secondary bb-grid-toolbar-btn bb-filter-btn" ng-class="{\'bb-filters-inline-active\': options.filtersAreActive}" data-bbauto-field="FilterButton" ng-show="!options.hideFilters" ng-click="toolbarLocals.toggleFilterMenu()">\n            <span class="fa fa-filter"></span>\n            <span class="bb-toolbar-btn-label">{{resources.grid_filters_button}}</span>\n        </button>\n    </div>\n    <div class="bb-grid-filter-summary-container">\n    </div>\n    <div class="bb-grid-filter-inline-container" ng-hide="options.hasInlineFilters && !toolbarLocals.filtersVisible">\n    </div>\n    <div class="bb-grid-top-scrollbar">\n        <div></div>\n    </div>\n</div>\n'),$templateCache.put("sky/templates/grids/seemore.html",'<div bb-text-expand="data" bb-text-expand-max-length="100" style="white-space: pre-wrap"></div>\n'),$templateCache.put("sky/templates/modal/modal.html",'<div class="bb-modal-content-wrapper" ng-transclude></div>'),$templateCache.put("sky/templates/modal/modalfooter.html",'<div class="modal-footer" ng-transclude></div>\n'),$templateCache.put("sky/templates/modal/modalfooterbutton.html",'<button class="btn bb-btn-secondary" type="button" ng-transclude></button>\n'),$templateCache.put("sky/templates/modal/modalfooterbuttoncancel.html",'<button class="btn btn-link" type="button" ng-click="$parent.$parent.$dismiss(\'cancel\');" ng-transclude></button>'),$templateCache.put("sky/templates/modal/modalfooterbuttonprimary.html",'<button class="btn btn-primary" type="submit" ng-transclude></button>'),$templateCache.put("sky/templates/modal/modalheader.html",'<div class="modal-header">\n    <h1 class="bb-dialog-header" ng-transclude></h1>\n    <div class="fa fa-times close" ng-click="$parent.$parent.$dismiss(\'close\');"></div>\n    <div bb-help-button bb-help-key="{{bbModalHelpKey}}" bb-set-help-key-override="true" data-bbauto-field="ModalHelpButton" ng-if="bbModalHelpKey"></div>\n    <div class="clearfix"></div>\n</div>\n'),$templateCache.put("sky/templates/navbar/navbar.html",'<nav class="navbar navbar-default bb-navbar" ng-transclude></nav>'),$templateCache.put("sky/templates/page/page.html",'<section ng-if="locals.noPageStatusSpecified() || bbPageStatus === locals.pageStatuses.LOADED">\n    <div ng-transclude ng-init="locals.onShowing()"></div>\n</section>\n<section class="container-fluid bb-page-content-column-container" ng-show="bbPageStatus === locals.pageStatuses.NOT_AUTHORIZED">\n    <div class="row">\n        <section class="bb-page-content-column col-xs-12 text-center">\n            <div class="m">\n                <h3>\n                    {{resources.page_noaccess_header}}\n                </h3>\n            </div>\n            <div class="bb-page-noaccess-description">{{resources.page_noaccess_description}}</div>\n            <div class="m-lg">\n                <button type="button" class="btn btn-lg btn-primary" ng-click="locals.navigateAway()" data-bbauto-field="NavigateAwayButton">\n                    {{resources.page_noaccess_button}}\n                </button>\n            </div>\n        </section>\n    </div>\n</section>\n'),$templateCache.put("sky/templates/pagesummary/pagesummary.directive.html",'<div class="bb-page-header">\n  <div class="container-fluid">\n    <div class="bb-page-summary-alert"></div>\n    <div class="row">\n      <div class="bb-page-summary-left col-xs-12" ng-class="bbPageSummary.getPageSummaryLeftCls()">\n        <div class="bb-page-summary-image" ng-show="bbPageSummary.imageCtrl"></div>\n        <div>\n          <h1 class="bb-page-summary-title" ng-show="bbPageSummary.titleCtrl"></h1>\n          <h2 class="bb-page-summary-subtitle" ng-show="bbPageSummary.subtitleCtrl"></h2>\n          <div class="bb-page-summary-status" ng-show="bbPageSummary.statusCtrl"></div>\n          <div class="bb-page-summary-key-info-xs"></div>\n          <div class="bb-page-summary-content"></div>\n        </div>\n      </div>\n      <div class="bb-page-summary-key-info-sm col-sm-3 hidden-xs" ng-class="bbPageSummary.getKeyInfoCls()">\n        <div class="bb-page-summary-key-info"></div>\n      </div>\n    </div>\n  </div>\n  <ng-transclude></ng-transclude>\n</div>\n<div class="bb-page-summary-action-bar"></div>\n'),
$templateCache.put("sky/templates/popover/popup.html",'<div class="popover {{placement}}"\n    tooltip-animation-class="fade"\n    uib-tooltip-classes\n    ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n    <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n    <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n'),$templateCache.put("sky/templates/reorder/reorder.directive.html",'<div class="bb-reorder-container">\n <div ng-repeat="item in bbReorder.bbReorderItems" class="bb-reorder-list-row">\n   <div class="bb-reorder-list-row-container">\n     <div class="bb-reorder-list-col bb-reorder-list-col-icon">\n       <i class="fa fa-arrows"></i>\n     </div>\n     <div class="bb-reorder-list-col bb-reorder-list-col-content">\n       <div class="bb-reorder-list-title">{{item.title}}</div>\n       <div class="bb-reorder-list-description">{{item.description}}</div>\n     </div>\n     <button type="button" ng-show="!$first &amp;&amp; !bbReorder.sorting" ng-click="bbReorder.pushToTop(item)" class="bb-reorder-list-col bb-reorder-list-col-top btn btn-link">\n       <i class="fa fa-arrow-circle-up"></i>\n       <span>{{\'reorder_top\' | bbResources}}</span>\n     </button>\n     <div ng-show="bbReorder.sorting" class="bb-reorder-list-col">\n       <span class="bb-reorder-list-sorting-number"></span>\n     </div>\n   </div>\n </div>\n</div>\n'),$templateCache.put("sky/templates/repeater/repeater.directive.html",'<div class="bb-repeater-component bb-repeater">\n  <ng-transclude></ng-transclude>\n</div>\n'),$templateCache.put("sky/templates/repeater/repeater.item.directive.html",'<section class="bb-repeater-item" ng-class="bbRepeaterItem.getCls()">\n  <div class="bb-repeater-item-left">\n    <div class="bb-repeater-item-context-menu" ng-if="bbRepeaterItem.contextMenuCtrl"></div>\n  </div>\n  <div class="bb-repeater-item-right">\n    <header class="bb-repeater-item-header" ng-click="bbRepeaterItem.headerClick()">\n      <h1 class="bb-repeater-item-title" ng-if="bbRepeaterItem.titleCtrl"></h1>\n      <bb-chevron bb-chevron-direction="bbRepeaterItem.chevronDirection"></bb-chevron>\n    </header>\n    <div class="bb-repeater-item-content">\n      <ng-transclude></ng-transclude>\n    </div>\n  </div>\n</section>\n'),$templateCache.put("sky/templates/searchfield/choices.html",'<ul class="ui-select-choices ui-select-choices-content dropdown-menu">\n  <li class="bb-searchfield-no-records"></li>\n</ul>\n'),$templateCache.put("sky/templates/selectfield/selectfield.directive.html",'<ng-include src="bbSelectField.getFieldInclude()"></ng-include>\n<div ng-transclude></div>\n'),$templateCache.put("sky/templates/selectfield/selectfieldmultiple.include.html",'<button type="button" class="btn btn-link bb-select-field-multiple" ng-click="bbSelectField.selectFieldClick()">\n  <i class="fa fa-plus-circle"></i> <span class="bb-select-field-multiple-title">{{bbSelectField.bbSelectFieldText}}</span>\n</button>\n<div>\n  <ul class="list-unstyled bb-select-field-multiple-items">\n    <li class="bb-select-field-multiple-item" ng-if="bbSelectField.bbSelectFieldSelectedItems.length <= 5" ng-repeat="selectedItem in bbSelectField.bbSelectFieldSelectedItems">\n      <div class="bb-select-field-multiple-item-title">\n        {{selectedItem.title}}\n      </div>\n      <button class="close bb-select-field-multiple-item-delete" ng-click="bbSelectField.remove(selectedItem); bbSelectField.setModelTouched()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">{{\'selectfield_remove\' | bbResources}}</span>\n      </button>\n    </li>\n    <li class="bb-select-field-multiple-item" ng-if="bbSelectField.bbSelectFieldSelectedItems.length > 5">\n      <div class="bb-select-field-multiple-item-title bb-select-field-multiple-summary">\n        {{bbSelectField.getSummaryCountText()}}\n      </div>\n      <button class="close bb-select-field-multiple-item-delete" ng-click="bbSelectField.removeAll(); bbSelectField.setModelTouched()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">{{\'selectfield_remove\' | bbResources}}</span>\n      </button>\n    </li>\n  </ul>\n</div>\n'),$templateCache.put("sky/templates/selectfield/selectfieldpicker.directive.html",'<bb-modal>\n  <div class="modal-form">\n    <bb-modal-header>{{bbSelectFieldPicker.getDialogHeaderText()}}</bb-modal-header>\n    <div bb-modal-body>\n      <ng-include src="bbSelectFieldPicker.bbSelectFieldPickerTemplate"></ng-include>\n    </div>\n  </div>\n  <bb-modal-footer ng-if="!bbSelectFieldPicker.isSingleStyle()">\n    <bb-modal-footer-button-primary ng-click="bbSelectFieldPicker.okClick()">\n      {{\'selectfieldpicker_select\' | bbResources}}\n    </bb-modal-footer-button-primary>\n    <bb-modal-footer-button-cancel></bb-modal-footer-button-cancel>\n  </bb-modal-footer>\n  <bb-modal-footer ng-if="bbSelectFieldPicker.isSingleStyle()">\n    <bb-modal-footer-button ng-click="bbSelectFieldPicker.clearClick()">\n      {{\'selectfieldpicker_clear\' | bbResources}}\n    </bb-modal-footer-button>\n  </bb-modal-footer>\n</bb-modal>\n'),$templateCache.put("sky/templates/selectfield/selectfieldsingle.include.html",'<button type="button" class="btn btn-default bb-select-field-single" ng-click="bbSelectField.selectFieldClick()">\n  <div class="bb-select-field-single-inner">\n    <div class="bb-select-field-single-title">{{bbSelectField.bbSelectFieldSelectedItems[0].title}}<span class="bb-select-field-single-title-placeholder" ng-if="!bbSelectField.bbSelectFieldSelectedItems[0].title">{{bbSelectField.bbSelectFieldText}}</span></div>\n    <div class="bb-select-field-single-icon"><i class="fa fa-sort"></i></div>\n  </div>\n</button>\n'),$templateCache.put("sky/templates/tabs/tab.html",'<div ng-hide="!tabsInitialized" data-bbauto-field="{{bbTabAutomationId}}" class="responsiveTabControl">\n    <ul ng-transclude>\n\n    </ul>\n</div>'),$templateCache.put("sky/templates/tabset/addbutton.html",'<button ng-click="bbTabAdd()" type="button" class="bb-tab-button-wrap btn bb-tab-button-add bb-btn-secondary">\n  <span class="btn bb-btn-secondary"><i class="fa fa-lg fa-plus-circle"></i></span>\n</button>\n'),$templateCache.put("sky/templates/tabset/dropdown.html",'<div class="bb-tabset-dropdown nav nav-tabs" uib-dropdown ng-show="bbTabsetOptions.isSmallScreen &amp;&amp; bbTabsetOptions.tabCount > 1">\n  <button type="button" class="btn btn-primary bb-tab-dropdown-button" uib-dropdown-toggle><div class="bb-tab-header-text">{{bbTabsetOptions.selectedTabHeader}}</div><i class="fa fa-caret-down"></i></button>\n</div>\n'),$templateCache.put("sky/templates/tabset/openbutton.html",'<button ng-click="bbTabOpen()" type="button" class="bb-tab-button-wrap bb-tab-button-open btn bb-btn-secondary">\n  <span class="btn bb-btn-secondary"><i class="fa fa-lg fa-folder-open-o"></i></span>\n</button>\n'),$templateCache.put("sky/templates/tabset/tabbutton.html",'<li class="bb-tab-button"></li>\n'),$templateCache.put("sky/templates/textexpand/container.html",'<div class="bb-text-expand-container"></div>\n'),$templateCache.put("sky/templates/textexpand/ellipsis.html",'<span class="bb-text-expand-ellipsis">...</span>\n'),$templateCache.put("sky/templates/textexpand/expandmodal.html",'<bb-modal>\n  <bb-modal-header>\n    {{expandCtrl.headerContent}}\n  </bb-modal-header>\n  <div class="modal-form">\n    <div bb-modal-body>\n      <div>\n        <span class="bb-text-expand-text">{{expandCtrl.textExpandContent}}</span>\n      </div>\n    </div>\n    <bb-modal-footer>\n      <bb-modal-footer-button-cancel>{{::expandCtrl.closeText}}</bb-modal-footer-button-cancel>\n    </bb-modal-footer>\n  </div>\n</bb-modal>\n'),$templateCache.put("sky/templates/textexpand/seemore.html",'<button type="button" class="btn bb-btn-link-inline bb-text-expand-see-more"></button>\n'),$templateCache.put("sky/templates/textexpand/space.html",'<span class="bb-text-expand-space"> </span>\n'),$templateCache.put("sky/templates/textexpand/text.html",'<span class="bb-text-expand-text"></span>\n'),$templateCache.put("sky/templates/tiles/tile.html",'<section ng-class="{ \'collapsed\': bbTile.isCollapsed }" class="bb-tile">\n    <div bb-scroll-into-view="bbTile.scrollIntoView">\n        <div class="bb-tile-title" ng-click="bbTile.titleClick()">\n            <div class="bb-tile-header-with-content">\n                <h2 class="bb-tile-header">{{bbTile.tileHeader}}</h2>\n            </div>\n            <div class="bb-tile-header-column-tools">\n                <div class="bb-tile-tools">\n                    <button type="button" ng-class="\'fa-chevron-\' + (bbTile.isCollapsed ? \'down\' : \'up\')" class="fa bb-tile-chevron"></button>\n                    <button type="button" ng-if="bbTile.hasSettings" class="bb-tile-settings bb-icon bb-icon-config" ng-click="$event.stopPropagation();bbTile.bbTileSettingsClick();"></button>\n                    <i class="bb-tile-grab-handle glyphicon glyphicon-th" ng-click="$event.stopPropagation()"></i>\n                </div>\n            </div>\n        </div>\n        <div uib-collapse="bbTile.isCollapsed" class="bb-tile-content in collapse" ng-transclude>\n        </div>\n    </div>\n</section>\n'),$templateCache.put("sky/templates/tiles/tiledashboard.html",'<div class="row">\n  <div class="col-md-6 bb-page-content-tile-column bb-page-content-tile-column-sortable" data-dashboard-column="1">\n    <div ng-repeat="tile in bbTileDashboard.tiles" data-tile-id="{{tile.id}}" data-ui-view="{{tile.view_name}}" id="{{tile.view_name}}">\n    </div>\n  </div>\n\n  <div class="col-md-6 bb-page-content-tile-column bb-page-content-tile-column-sortable" data-dashboard-column="2">\n  </div>\n</div>\n'),$templateCache.put("sky/templates/tiles/tileheadercheck.html",'<i class="fa fa-check bb-tile-header-check"></i>'),$templateCache.put("sky/templates/tiles/tileheadercontent.html",'<div class="bb-tile-header-content" ng-transclude></div>')}]);
//# sourceMappingURL=sky.min.js.map